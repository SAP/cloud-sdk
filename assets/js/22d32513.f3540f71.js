"use strict";(self.webpackChunksap_cloud_sdk_documentation=self.webpackChunksap_cloud_sdk_documentation||[]).push([[91123],{59614:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"guides/upgrade-to-version-4","title":"How to upgrade to version 4 of the SAP Cloud SDK for JavaScript","description":"This document will guide you through the upgrade process from version 3 to 4.","source":"@site/docs-js/guides/upgrade-to-version-4.mdx","sourceDirName":"guides","slug":"/guides/upgrade-to-version-4","permalink":"/cloud-sdk/docs/js/guides/upgrade-to-version-4","draft":false,"unlisted":false,"editUrl":"https://github.com/SAP/cloud-sdk/edit/main/docs-js/guides/upgrade-to-version-4.mdx","tags":[],"version":"current","frontMatter":{"id":"upgrade-to-version-4","title":"How to upgrade to version 4 of the SAP Cloud SDK for JavaScript","hide_title":false,"hide_table_of_contents":false,"sidebar_label":"Upgrade to version 4","description":"This document will guide you through the upgrade process from version 3 to 4."},"sidebar":"docsJsSidebar","previous":{"title":"Kubernetes with SAP Kyma","permalink":"/cloud-sdk/docs/js/environments/kyma"},"next":{"title":"Connecting to External Systems from BAS","permalink":"/cloud-sdk/docs/js/guides/bas"}}');var o=i(74848),t=i(28453);const d={id:"upgrade-to-version-4",title:"How to upgrade to version 4 of the SAP Cloud SDK for JavaScript",hide_title:!1,hide_table_of_contents:!1,sidebar_label:"Upgrade to version 4",description:"This document will guide you through the upgrade process from version 3 to 4."},r="How to Upgrade to Version 4 of the SAP Cloud SDK for JavaScript ",c={},a=[{value:"Update Your Project Dependencies",id:"update-your-project-dependencies",level:2},{value:"Update to Node 22 or Newer",id:"update-to-node-22-or-newer",level:2},{value:"Destination caching is enabled by default",id:"destination-caching-is-enabled-by-default",level:2},{value:"<code>iasToXsuaaTokenExchange</code> option is <code>false</code> by default",id:"iastoxsuaatokenexchange-option-is-false-by-default",level:2},{value:"Remove Deprecated Content",id:"remove-deprecated-content",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"how-to-upgrade-to-version-4-of-the-sap-cloud-sdk-for-javascript-",children:"How to Upgrade to Version 4 of the SAP Cloud SDK for JavaScript "})}),"\n",(0,o.jsx)(n.p,{children:"This document outlines changes introduced in version 4 of the SAP Cloud SDK and provides guidance for updating your project where needed.\nSome points highlight changes in default behavior rather than required actions."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#update-your-project-dependencies",children:"Update Your Project Dependencies"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#update-to-node-22-or-newer",children:"Update to Node 22 or Newer"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#destination-caching-is-enabled-by-default",children:"Destination caching is enabled by default"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsxs)(n.a,{href:"#iastoxsuaatokenexchange-option-is-false-by-default",children:[(0,o.jsx)(n.code,{children:"iasToXsuaaTokenExchange"})," option is ",(0,o.jsx)(n.code,{children:"false"})," by default"]})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#remove-deprecated-content",children:"Remove Deprecated Content"})}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"update-your-project-dependencies",children:"Update Your Project Dependencies"}),"\n",(0,o.jsxs)(n.p,{children:["Search for occurrences of ",(0,o.jsx)(n.code,{children:"@sap-cloud-sdk/[some module]"})," in your ",(0,o.jsx)(n.code,{children:"package.json"})," files.\nReplace the version numbers with ",(0,o.jsx)(n.code,{children:"^4"}),".\nrun ",(0,o.jsx)(n.code,{children:"npm install"})," or similar to install the dependencies and update the lock file."]}),"\n",(0,o.jsx)(n.p,{children:"Running your tests or deploying your application might fail at this point if you need to adapt to any breaking changes.\nWe recommend updating your applications in one commit or pull request and making sure everything still works using your existing test suite."}),"\n",(0,o.jsx)(n.h2,{id:"update-to-node-22-or-newer",children:"Update to Node 22 or Newer"}),"\n",(0,o.jsxs)(n.p,{children:["All SAP Cloud SDK for JavaScript libraries now support node 22 (LTS) as the ",(0,o.jsx)(n.strong,{children:"minimum"})," node version.\nIf you are using a node version older than 22, update your runtime environment to a newer version.\nOn Cloud Foundry you can do this by ",(0,o.jsxs)(n.a,{href:"https://docs.cloudfoundry.org/buildpacks/node/index.html#runtime",children:["setting the node engine in your ",(0,o.jsx)(n.code,{children:"package.json"})]}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"destination-caching-is-enabled-by-default",children:"Destination caching is enabled by default"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Destination caching while retrieving destinations via the destination service is now enabled by default."})}),"\n",(0,o.jsxs)(n.p,{children:["This change affects the default behaviour of ",(0,o.jsx)(n.code,{children:"getDestination()"})," method, ",(0,o.jsx)(n.code,{children:"getAllDestinationsFromDestinationService()"})," method, generated client's ",(0,o.jsx)(n.code,{children:"execute()"})," method and generic HTTP requests execution using ",(0,o.jsx)(n.code,{children:"executeHttpRequest()"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["To disable caching set ",(0,o.jsx)(n.code,{children:"useCache: false"})," in the options, for example in ",(0,o.jsx)(n.code,{children:"execute()"})," method:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-TS",children:".execute({ destinationName: 'DESTINATION', jwt: 'JWT', useCache: false })\n"})}),"\n",(0,o.jsxs)(n.h2,{id:"iastoxsuaatokenexchange-option-is-false-by-default",children:[(0,o.jsx)(n.code,{children:"iasToXsuaaTokenExchange"})," option is ",(0,o.jsx)(n.code,{children:"false"})," by default"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["Token exchange from IAS to XSUAA is now disabled by default.\nSet ",(0,o.jsx)(n.code,{children:"iasToXsuaaTokenExchange"})," to ",(0,o.jsx)(n.code,{children:"true"})," explicitly if token exchange is expected."]})}),"\n",(0,o.jsx)(n.p,{children:"This change affects the default behaviour of following functions"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"getDestination()"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"getAllDestinationsFromDestinationService()"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"getDestinationFromDestinationService()"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"useOrFetchDestination()"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"toDestinationNameUrl()"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"buildHttpRequest()"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"executeHttpRequest()"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"executeHttpRequestWithOrigin()"})}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"and following methods of request builder"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"execute()"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"executeRaw()"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"url()"})}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"remove-deprecated-content",children:"Remove Deprecated Content"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"@sap-cloud-sdk/connectivity"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"getAgentConfig()"})," function is now asynchronous, the ",(0,o.jsx)(n.code,{children:"getAgentConfigAsync()"})," function has been removed."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"destinationForServiceBinding()"})," function has been removed, use ",(0,o.jsx)(n.code,{children:"getDestinationFromServiceBinding()"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"PartialDestinationFetchOptions"})," type has been removed, use either ",(0,o.jsx)(n.code,{children:"ServiceBindingTransformOptions"})," or ",(0,o.jsx)(n.code,{children:"getDestinationFromServiceBinding()"})," function."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"serviceToken()"})," function no longer takes ",(0,o.jsx)(n.code,{children:"xsuaaCredentials"})," as part of the ",(0,o.jsx)(n.code,{children:"options"})," parameter."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"parseDestination()"})," function is no longer a public API."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"DestinationForServiceBindingOptions"})," interface has been renamed to ",(0,o.jsx)(n.code,{children:"DestinationFromServiceBindingOptions"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"@sap-cloud-sdk/odata-common"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"FunctionImportParameters"})," type has been removed, use ",(0,o.jsx)(n.code,{children:"OperationParameters"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"ODataFunctionImportRequestConfig"})," constant has been removed, use ",(0,o.jsx)(n.code,{children:"ODataFunctionRequestConfig"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"FunctionImportParameter"})," constant has been removed, use ",(0,o.jsx)(n.code,{children:"OperationParameter"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"ActionFunctionImportRequestBuilderBase"})," constant has been removed, use ",(0,o.jsx)(n.code,{children:"OperationRequestBuilderBase"})," instead."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"@sap-cloud-sdk/odata-v2"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"ODataFunctionImportRequestConfig"})," constant has been removed, use ",(0,o.jsx)(n.code,{children:"ODataFunctionRequestConfig"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"FunctionImportRequestBuilder"})," constant has been removed, use ",(0,o.jsx)(n.code,{children:"OperationRequestBuilder"})," instead."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"@sap-cloud-sdk/odata-v4"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"ODataFunctionImportRequestConfig"})," constant has been removed, use ",(0,o.jsx)(n.code,{children:"ODataFunctionRequestConfig"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"ActionImportParameter"})," class has been removed, use ",(0,o.jsx)(n.code,{children:"OperationParameter"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"ActionImportParameters"})," type has been removed, use ",(0,o.jsx)(n.code,{children:"OperationParameters"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"FunctionImportRequestBuilder"})," class has been removed, use ",(0,o.jsx)(n.code,{children:"OperationRequestBuilder"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"BoundFunctionImportRequestBuilder"})," class has been removed, use ",(0,o.jsx)(n.code,{children:"OperationRequestBuilder"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"BoundActionImportRequestBuilder"})," class has been removed, use ",(0,o.jsx)(n.code,{children:"OperationRequestBuilder"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"ODataActionImportRequestConfig"})," constant has been removed, use ",(0,o.jsx)(n.code,{children:"ODataActionRequestConfig"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"ODataBoundActionImportRequestConfig"})," class has been removed, use ",(0,o.jsx)(n.code,{children:"ODataBoundActionRequestConfig"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"OdataBoundFunctionImportRequestConfig"})," constant has been removed, use ",(0,o.jsx)(n.code,{children:"ODataBoundFunctionRequestConfig"})," instead."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"ActionImportRequestBuilder"})," class has been removed, use ",(0,o.jsx)(n.code,{children:"OperationRequestBuilder"})," instead."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"@sap-cloud-sdk/resilience"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"circuitBreakerHttp"})," constant has been removed, use ",(0,o.jsx)(n.code,{children:"circuitBreaker"})," instead."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"@sap-cloud-sdk/util"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"assoc"})," constant has been removed, there is no replacement."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"@sap-cloud-sdk/mail-client"})," package has been removed in v4.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["As an alternative, implement your own mail client by checking the ",(0,o.jsx)(n.a,{href:"https://github.com/SAP/cloud-sdk-js/blob/v3-main/packages/mail-client/src/mail-client.ts",children:"v3 implementation"})," and the SAP BTP documentation for ",(0,o.jsx)(n.a,{href:"https://help.sap.com/docs/connectivity/sap-btp-connectivity-cf/using-tcp-protocol-for-cloud-applications?locale=en-US",children:"using the TCP protocol for cloud applications"}),"."]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>r});var s=i(96540);const o={},t=s.createContext(o);function d(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);