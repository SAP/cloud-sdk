"use strict";(self.webpackChunksap_cloud_sdk_documentation=self.webpackChunksap_cloud_sdk_documentation||[]).push([[58873],{5519:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"guides/5.0-upgrade-steps","title":"Steps to update to Version 5 of the SAP Cloud SDK","description":"Update your application to use version 5 of the SAP Cloud SDK","source":"@site/docs-java/guides/5.0-upgrade-steps.mdx","sourceDirName":"guides","slug":"/guides/5.0-upgrade-steps","permalink":"/cloud-sdk/docs/java/guides/5.0-upgrade-steps","draft":false,"unlisted":false,"editUrl":"https://github.com/SAP/cloud-sdk/edit/main/docs-java/guides/5.0-upgrade-steps.mdx","tags":[],"version":"current","frontMatter":{"id":"5.0-upgrade-steps","title":"Steps to update to Version 5 of the SAP Cloud SDK","hide_title":false,"hide_table_of_contents":false,"sidebar_label":"Update Steps to Version 5","description":"Update your application to use version 5 of the SAP Cloud SDK","keywords":["sap","cloud","sdk","cloud native","cloud sdk","sap cloud sdk","5","Update"]},"sidebar":"docsJavaSidebar","previous":{"title":"Kubernetes with SAP Kyma","permalink":"/cloud-sdk/docs/java/environments/kubernetes-kyma"},"next":{"title":"Dependency Management","permalink":"/cloud-sdk/docs/java/guides/manage-dependencies"}}');var i=t(74848),r=t(28453),o=t(11470),d=t(19365);const a={id:"5.0-upgrade-steps",title:"Steps to update to Version 5 of the SAP Cloud SDK",hide_title:!1,hide_table_of_contents:!1,sidebar_label:"Update Steps to Version 5",description:"Update your application to use version 5 of the SAP Cloud SDK",keywords:["sap","cloud","sdk","cloud native","cloud sdk","sap cloud sdk",5,"Update"]},c=void 0,l={},h=[{value:"Before You Update",id:"before-you-update",level:2},{value:"Change Version of Your <code>sdk-bom</code> or <code>sdk-modules-bom</code>",id:"change-version-of-your-sdk-bom-or-sdk-modules-bom",level:2},{value:"Remove or Replace Modified SAP Cloud SDK Dependencies",id:"remove-or-replace-modified-sap-cloud-sdk-dependencies",level:2},{value:"Steps to migrate <code>Destination</code> usages",id:"steps-to-migrate-destination-usages",level:2},{value:"Remove or Replace Modified SAP Cloud SDK APIs",id:"remove-or-replace-modified-sap-cloud-sdk-apis",level:2},{value:"Generate and Use Your Own OData Clients",id:"generate-and-use-your-own-odata-clients",level:2},{value:"Generate Your Own OData Clients",id:"generate-your-own-odata-clients",level:3},{value:"Handle OData Virtual Data Model Instantiation",id:"handle-odata-virtual-data-model-instantiation",level:3},{value:"Remove Discontinued ServletFilter from Your <code>web.xml</code>",id:"remove-discontinued-servletfilter-from-your-webxml",level:2},{value:"Audit Log usage",id:"audit-log-usage",level:2}];function u(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Version 5 of the SAP Cloud SDK is here and we highly recommend updating to it as soon as possible.\nIt brings various improvements, it is now Open Source and the Destination API has been unified."}),"\n",(0,i.jsx)(n.admonition,{title:"Release Blog Post",type:"note",children:(0,i.jsx)(n.p,{children:"For more information also check out our version 5 release blog post"})}),"\n",(0,i.jsx)(n.admonition,{title:"Minimum Java Version",type:"warning",children:(0,i.jsx)(n.p,{children:"Starting with version 5.0.0 the SAP Cloud SDK requires a Java version of at least 17."})}),"\n",(0,i.jsx)(n.admonition,{title:"Minimum CAP version",type:"info",children:(0,i.jsxs)(n.p,{children:["If you are using the Cloud Application Programming model (CAP) to build your application, please note that the SAP Cloud SDK version 5 requires a minimum CAP/CDS version of at least ",(0,i.jsx)(n.code,{children:"2.4.0"}),".\nIf you are on an older CAP stack, please follow the ",(0,i.jsx)(n.a,{href:"https://cap.cloud.sap/docs/java/migration#one-to-two",children:"CAP migration guide"})," first."]})}),"\n",(0,i.jsx)(n.h2,{id:"before-you-update",children:"Before You Update"}),"\n",(0,i.jsx)(n.p,{children:"Before you increase the SAP Cloud SDK version to 5, it is recommended to first update to the latest available version of the SAP Cloud SDK 4 and migrate any usage of deprecated API.\nFollow the deprecation notes in the Javadocs to find recommended replacements.\nAll deprecated APIs are removed with version 5."}),"\n",(0,i.jsxs)(n.p,{children:["Also, make sure that you are using Java 17 or higher.\nTo setup your build to use Java 17 you can use ",(0,i.jsx)(n.a,{href:"https://www.baeldung.com/maven-java-version",children:"this guide"}),".\nAs Java EE modules have been removed from Java 11, you might also need to update your application to use the ",(0,i.jsx)(n.a,{href:"https://jakarta.ee/",children:"Jakarta EE"})," modules instead.\nThis JEP provides a good overview of the changes: ",(0,i.jsx)(n.a,{href:"https://openjdk.java.net/jeps/320",children:"JEP 320: Remove the Java EE and CORBA Modules"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["If you are consuming SOAP APIs and are relying on the ",(0,i.jsx)(n.code,{children:"axis2-wsdl2code-maven-plugin"})," to generate classes, please also additionally include ",(0,i.jsx)(n.code,{children:"javax.activation:activation"})," artifact to your dependencies to avoid compilation errors."]}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsx)(n.p,{children:"We recommend to update your application in the following order:"}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Make sure you use the latest SAP Cloud SDK v4 version available."}),"\n",(0,i.jsx)(n.li,{children:"Update your application to use Java 17."}),"\n",(0,i.jsx)(n.li,{children:"Update your application to use the latest SAP Cloud SDK v5 and Spring Boot/Spring version available."}),"\n"]})]}),"\n",(0,i.jsxs)(n.h2,{id:"change-version-of-your-sdk-bom-or-sdk-modules-bom",children:["Change Version of Your ",(0,i.jsx)(n.code,{children:"sdk-bom"})," or ",(0,i.jsx)(n.code,{children:"sdk-modules-bom"})]}),"\n",(0,i.jsxs)(n.p,{children:["The first step is to change the version of the SAP Cloud SDK dependency in your ",(0,i.jsx)(n.code,{children:"pom.xml"})," file.\nDepending on your project setup you might use one of our BOMs or the individual modules."]}),"\n",(0,i.jsxs)(n.p,{children:["To find our BOMs, search for the following entries in your maven ",(0,i.jsx)(n.code,{children:"dependencyManagement"})," section: ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk:sdk-bom"})," and ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk:sdk-modules-bom"}),".\nUpdate them directly to version ",(0,i.jsx)(n.code,{children:"5.0.0"})," or the ",(0,i.jsx)(n.a,{href:"https://central.sonatype.com/artifact/com.sap.cloud.sdk/sdk-bom",children:"latest version"}),"."]}),"\n",(0,i.jsxs)(o.A,{groupId:"bomType",defaultValue:"springBoot",values:[{label:"Spring Boot",value:"springBoot"},{label:"SAP Java Buildpack",value:"sjb"}],children:[(0,i.jsxs)(d.A,{value:"sjb",children:[(0,i.jsxs)(n.p,{children:["If you are using the SAP Java Buildpack and produce a ",(0,i.jsx)(n.code,{children:"war"})," deployment (e.g. when you require JCo for your application),\nplease replace the ",(0,i.jsx)(n.code,{children:"sdk-sjb-bom"})," with the ",(0,i.jsx)(n.code,{children:"cf-tomee7-bom"})," and the ",(0,i.jsx)(n.code,{children:"sdk-bom"})," instead:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",metastring:'title="pom.xml"',children:"<dependencyManagement>\n    <dependencies>\n        \x3c!-- Cloud SDK + SAP Java Buildpack BOMs --\x3e\n        <dependency>\n            <groupId>com.sap.cloud.sjb.cf</groupId>\n            <artifactId>cf-tomee7-bom</artifactId>\n            <version>use-latest-version-here</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n        <dependency>\n            <groupId>com.sap.cloud.sdk</groupId>\n            <artifactId>sdk-bom</artifactId>\n            <version>use-latest-version-here</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n        \x3c!-- Work around for SOAP users only --\x3e\n        <dependency>\n            <groupId>org.codehaus.woodstox</groupId>\n            <artifactId>stax2-api</artifactId>\n            <version>4.2.2</version>\n            <scope>compile</scope>\n        </dependency>\n    </dependencies>\n</dependencyManagement>\n"})}),(0,i.jsxs)(n.p,{children:["Change the target runtime from ",(0,i.jsx)(n.code,{children:"tomee7"})," to ",(0,i.jsx)(n.code,{children:"tomcat"}),", and the buildpack from ",(0,i.jsx)(n.code,{children:"sap_java_buildpack"})," to ",(0,i.jsx)(n.code,{children:"sap_java_buildpack_jakarta"}),":"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",metastring:'title="manifest.yml"',children:"  buildpacks:\n-   - sap_java_buildpack\n+   - sap_java_buildpack_jakarta\n  env:\n-   TARGET_RUNTIME: tomee7\n+   TARGET_RUNTIME: tomcat\n"})})]}),(0,i.jsxs)(d.A,{value:"springBoot",children:[(0,i.jsxs)(n.p,{children:["If you are building on Spring or Spring Boot you should also update to the latest version of the respective BOMs, so ",(0,i.jsx)(n.code,{children:"6.1.0"})," (Spring) or ",(0,i.jsx)(n.code,{children:"3.1.6"})," (Spring Boot) as of the time of writing.\nThese BOMs should be listed after any SAP Cloud SDK related BOM, so for Spring Boot your ",(0,i.jsx)(n.code,{children:"dependencyManagement"})," section should look something like this:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",metastring:'title="pom.xml"',children:"<dependencyManagement>\n    <dependencies>\n        <dependency>\n            <groupId>com.sap.cloud.sdk</groupId>\n            <artifactId>sdk-bom</artifactId>\n            <version>5.0.0</version> \x3c!-- TODO: replace this with the most recent version --\x3e\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-dependencies</artifactId>\n            <version>3.1.6</version> \x3c!-- TODO: replace this with the most recent version --\x3e\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n    </dependencies>\n</dependencyManagement>\n"})})]})]}),"\n",(0,i.jsxs)(n.p,{children:["At the same time you should also replace usages of ",(0,i.jsx)(n.code,{children:"javax"})," dependencies with the respective ",(0,i.jsx)(n.code,{children:"jakarta"})," dependency.\nAs we only provide a managed version for ",(0,i.jsx)(n.code,{children:"jakarta.servlet-api"})," in our BOM, you will need to add the formerly managed version for the ",(0,i.jsx)(n.code,{children:"jakarta.inject-api"})," dependency manually:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"-<dependency>\n-    <groupId>javax.inject</groupId>\n-    <artifactId>javax.inject</artifactId>\n-</dependency>\n+<dependency>\n+    <groupId>jakarta.inject</groupId>\n+    <artifactId>jakarta.inject-api</artifactId>\n+    <version>2.0.1</version>\n+</dependency>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Also remember to migrate all your dependencies to their respective ",(0,i.jsx)(n.code,{children:"jakarta"})," versions if applicable."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, if you were using ",(0,i.jsx)(n.code,{children:"com.sap.hcp.cf.logging:cf-java-logging-support-servlet"})," for application logging you must instead switch to using ",(0,i.jsx)(n.code,{children:"com.sap.hcp.cf.logging:cf-java-logging-support-servlet-jakarta"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"-<dependency>\n-    <groupId>com.sap.hcp.cf.logging</groupId>\n-    <artifactId>cf-java-logging-support-servlet</artifactId>\n-</dependency>\n+<dependency>\n+    <groupId>com.sap.hcp.cf.logging</groupId>\n+    <artifactId>cf-java-logging-support-servlet-jakarta</artifactId>\n+    <version>latest-lib-version</version>\n+</dependency>\n"})}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"For projects that were already upgraded to Java 17 and Spring Boot 3 in SAP Cloud SDK 4"}),(0,i.jsx)(n.p,{children:"Please remove any workarounds that were needed to make Java 17 and Spring Boot 3 work with SAP Cloud SDK 4:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["When using the ",(0,i.jsx)(n.code,{children:"scp-cf"})," module or its replacement ",(0,i.jsx)(n.code,{children:"sdk-core"}),", please remove the ",(0,i.jsx)(n.code,{children:"servlet-jakarta"})," module."]}),"\n",(0,i.jsxs)(n.li,{children:["When using the ",(0,i.jsx)(n.code,{children:"@ServletComponentScan"})," annotation, please update the namespace back to:"]}),"\n"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:'- @ServletComponentScan({"com.sap.cloud.sdk.cloudplatform.servletjakarta", ...\n+ @ServletComponentScan({"com.sap.cloud.sdk", ...\n'})})]}),"\n",(0,i.jsx)(n.h2,{id:"remove-or-replace-modified-sap-cloud-sdk-dependencies",children:"Remove or Replace Modified SAP Cloud SDK Dependencies"}),"\n",(0,i.jsx)(n.p,{children:"The lists below contains all modules that have been renamed or removed from the SAP Cloud SDK.\nTherefore, you should also rename respectively remove those from your project setup."}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Full list of renamed or replaced modules"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Module ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.frameworks:resilience4j"})," has been moved to ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:resilience4j"})]}),"\n",(0,i.jsxs)(n.li,{children:["Module ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.frameworks:apache-httpclient5"})," has been moved to ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:connectivity-apache-httpclient5"})]}),"\n",(0,i.jsxs)(n.li,{children:["Module ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:servlet"})," has been removed and functionally replaced by ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:servlet-jakarta"})," (replacing usage of ",(0,i.jsx)(n.code,{children:"javax.servlet"})," with ",(0,i.jsx)(n.code,{children:"jakarta.servlet"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Module ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:scp-cf"})," has been deprecated and functionally replaced by ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk:sdk-core"})]}),"\n"]})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Full list of removed modules"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Bill of Materials","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk:sdk-sjb-bom"})," Please use the ",(0,i.jsx)(n.code,{children:"cf-tomee7-bom"})," and the ",(0,i.jsx)(n.code,{children:"sdk-bom"})," instead."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Archetypes (Replaced by single archetype: ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.archetypes:spring-boot3"}),")","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.archetypes:scp-cf-tomee"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.archetypes:scp-neo-javaee7"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Neo related modules, please migrate to the Cloud Foundry environment.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:auditlog-scp-neo"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:cloudplatform-connectivity-scp-neo"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:cloudplatform-core-scp-neo"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:concurrency-scp-neo"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:scp-neo"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:security-scp-neo"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:tenant-scp-neo"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.plugins:scp-neo-maven-plugin"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Generator CLIs","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.datamodel:odata-generator-cli"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Call the generator directly as a maven plugin:"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mvn com.sap.cloud.sdk.datamodel:odata-generator-maven-plugin:5.0.0:generate"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.datamodel:odata-v4-generator-cli"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Call the generator directly as a maven plugin:"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mvn com.sap.cloud.sdk.datamodel:odata-v4-generator-maven-plugin:5.0.0:generate"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.datamodel:openapi-generator-cli"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Call the generator directly as a maven plugin:"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"mvn com.sap.cloud.sdk.datamodel:openapi-generator-maven-plugin:5.0.0:generate"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Pregenerated Clients, ",(0,i.jsx)(n.a,{href:"#generate-and-use-your-own-odata-virtual-data-model",children:"generate and use your own OData clients"})," instead.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.s4hana:s4hana-all"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.s4hana:s4hana-api-odata"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.s4hana:s4hana-api-odata-onpremise"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.s4hana:s4hana-api-odata-v4"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.s4hana:s4hana-api-odata-v4-onpremise"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Services (Dropped without replacement)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.services:blockchain-business-services-sdk"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.services:blockchain-business-services-visibility"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.services:blockchain-client-fabric"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.services:blockchain-client-multichain"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.services:btp-business-rules"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.services:btp-shared-ledger-client"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.services:scp-blockchain"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.services:scp-business-logging-all"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.services:scp-business-logging-core"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.services:scp-business-logging-odata"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.services:scp-business-logging-rest"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.services:scp-workflow-cf"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Others","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:auditlog"})," (See ",(0,i.jsx)(n.a,{href:"./5.0-upgrade-steps#audit-log-usage",children:"Audit Log usage"})," section below)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:auditlog-scp-cf"})," (See ",(0,i.jsx)(n.a,{href:"./5.0-upgrade-steps#audit-log-usage",children:"Audit Log usage"})," section below)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:cloudplatform-connectivity-scp"})," (No replacement necessary)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:cloudplatform-core-scp-cf"})," (No replacement necessary)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:security-scp-cf"})," (Functionally integrated into the ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:security"})," module)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:security-servlet"})," (See the ",(0,i.jsx)("a",{href:"",children:"ServletFilter"})," section below)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:tenant-scp-cf"})," (Functionally integrated into the ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:tenant"})," module)"]}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,i.jsxs)(n.p,{children:["If you are using our BOMs to provide the module versions, a fast way to do identify those is to run any ",(0,i.jsx)(n.code,{children:"mvn"})," command.\nThis will now lead to error messages like this:"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["'dependencies.dependency.version' for com.sap.cloud.sdk.cloudplatform:auditlog-scp-cf",":jar"," is missing"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This helps you to identify which modules you need to remove or replace in your project setup."}),"\n",(0,i.jsxs)(n.h2,{id:"steps-to-migrate-destination-usages",children:["Steps to migrate ",(0,i.jsx)(n.code,{children:"Destination"})," usages"]}),"\n",(0,i.jsxs)(n.p,{children:["Version 5 of the SAP Cloud SDK comes with a major cleanup of the APIs around the ",(0,i.jsx)(n.code,{children:"Destination"})," concept.\nThis cleanup comes ",(0,i.jsx)(n.strong,{children:"without a lot of breaking changes"})," so that existing applications require only a minimum of adjustments.\nTo make the process of adjusting existing applications as easy as possible, please follow the below steps:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Remove any invocation of ",(0,i.jsx)(n.code,{children:"Destination#decorate"}),".\nThis method was only used in conjunction with the ",(0,i.jsx)(n.code,{children:"DefaultErpHttpDestination"}),", which has been removed in this major version update.\nThe functionality has been moved internally, so that decorating existing ",(0,i.jsx)(n.code,{children:"Destination"})," instances is no longer needed."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["(Optional) Remove any invocations of ",(0,i.jsx)(n.code,{children:"Destination#asHttp"})," or ",(0,i.jsx)(n.code,{children:"Destination#asRfc"}),".\nA big part of the ",(0,i.jsx)(n.code,{children:"Destination"})," cleanup was to straighten our public APIs that expected specific sub-types of ",(0,i.jsx)(n.code,{children:"Destination"})," or ",(0,i.jsx)(n.code,{children:"DestinationProperties"})," (e.g. ",(0,i.jsx)(n.code,{children:"HttpClientAccessor#getHttpClient(HttpDestinationProperties)"}),").\nThese APIs now all rely on ",(0,i.jsx)(n.code,{children:"Destination"}),", which makes casting via ",(0,i.jsx)(n.code,{children:"#asHttp"})," or ",(0,i.jsx)(n.code,{children:"#asRfc"})," unnecessary."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Replace any of the removed classes related to the ",(0,i.jsx)(n.code,{children:"Destination"})," API as mentioned in the ",(0,i.jsx)(n.a,{href:"#remove-or-replace-modified-sap-cloud-sdk-apis",children:"list of removed APIs"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"caution",children:[(0,i.jsxs)(n.mdxAdmonitionTitle,{children:["Updated guidance on ",(0,i.jsx)(n.code,{children:"DestinationAccessException"})]}),(0,i.jsxs)(n.p,{children:["An earlier version of the upgrade guide contained an additional instruction to move handling of ",(0,i.jsx)(n.code,{children:"DestinationAccessException"})," from ",(0,i.jsx)(n.code,{children:"DestinationAccessor.getDestination()"})," to ",(0,i.jsx)(n.code,{children:"destination.getHeaders()"}),".\nThis instruction was incorrect and has been removed.\nIn case you have followed this instruction, please revert the change."]})]}),"\n",(0,i.jsx)(n.h2,{id:"remove-or-replace-modified-sap-cloud-sdk-apis",children:"Remove or Replace Modified SAP Cloud SDK APIs"}),"\n",(0,i.jsx)(n.p,{children:"Once the build doesn't complain about missing dependency versions anymore, you can start to fix the compilation errors."}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Full list of removed API"}),(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"API"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Replacement"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Comment"})})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"DefaultErpHttpDestination"}),(0,i.jsx)("td",{children:"HttpDestination"}),(0,i.jsx)("td",{children:(0,i.jsx)(n.p,{children:"HttpDestination now automatically adds sap-client and sap-language\nheaders defined on the destination"})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ErpHttpDestination"}),(0,i.jsx)("td",{children:"DefaultHttpDestination"}),(0,i.jsx)("td",{children:"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ErpHttpDestinationProperties"}),(0,i.jsx)("td",{children:"DefaultHttpDestination"}),(0,i.jsx)("td",{children:"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ErpHttpDestinationUtils"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No replacement necessary"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"AbstractHttpDestination"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsxs)("td",{children:["No direct replacement.",(0,i.jsx)("br",{}),"Most use cases, however, should be able to leverage the ",(0,i.jsx)("code",{children:"\nDefaultHttpDestination"})," instead."]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"WrappedDestination"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No replacement necessary"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"AbstractScpDestination"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No replacement necessary"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"AbstractScpDestinationBuilder"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No replacement necessary"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfAuthTokenFacade"}),(0,i.jsx)("td",{children:"DefaultAuthTokenFacade"}),(0,i.jsx)("td",{children:"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfDestination"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No replacement necessary"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfDestinationLoader"}),(0,i.jsx)("td",{children:"DestinationService"}),(0,i.jsx)("td",{children:"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfDestinationOptionsAugmenter"}),(0,i.jsx)("td",{children:"DestinationServiceOptionsAugmenter"}),(0,i.jsx)("td",{children:"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfDestinationServiceResponseProvider"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No replacement necessary"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfHttpDestination"}),(0,i.jsx)("td",{children:"DefaultHttpDestination"}),(0,i.jsx)("td",{children:"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfRfcDestination"}),(0,i.jsx)("td",{children:"DefaultRfcDestination"}),(0,i.jsx)("td",{children:"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfServiceDestinationLoader"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"../features/connectivity/service-bindings",children:(0,i.jsx)(n.p,{children:"ServiceBindingDestinationLoader"})})}),(0,i.jsx)("td",{children:"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"WithDestinationName"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No replacement"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"StringConverter"}),(0,i.jsx)("td",{children:"Java Standard Library"}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:["The Java Standard Library offers the same features, e.g. ",(0,i.jsx)("code",{children:"SimpleDateFormat"}),"\nor ",(0,i.jsx)("code",{children:"DateTimeFormatter"}),", with the pattern ",(0,i.jsx)("code",{children:"yyyy-MM-dd"})," or ",(0,i.jsxs)("code",{children:["yyyy-MM-dd\nHH:mm",":ss"]})]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"StringValidator"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://commons.apache.org/proper/commons-codec/",children:(0,i.jsx)(n.p,{children:"Apache Commons Codec"})})}),(0,i.jsxs)("td",{children:[" Use libraries like"," "," ",(0,i.jsx)("a",{href:"https://commons.apache.org/proper/commons-codec/",children:"\nApache Commons Codec\n"})," , which offers a"," "," ",(0,i.jsx)("a",{href:"https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html",children:"\nBase64\n"})," "," class. "]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ClientCredentialsValidator"}),(0,i.jsx)("td",{children:"Java Standard Library"}),(0,i.jsxs)("td",{children:[" For validation client secrets see ",(0,i.jsx)("code",{children:"StringValidator"})," above. To validate the\nclient id, try to match the regular expression ",(0,i.jsx)("code",{children:"[a-zA-Z0-9\\-!|]+"}),". "]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"OAuth2ServiceProvider"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main/token-client",children:"SAP\nBTP Java Token Client"})}),(0,i.jsxs)("td",{children:[" Please directly use the ",(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main/token-client",children:"SAP\nBTP Java Token Client"})," library instead. "]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"AuthTokenBuilder"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/auth0/java-jwt",children:"Java JWT implementation"})}),(0,i.jsxs)("td",{children:[" For creating an ",(0,i.jsx)("code",{children:"AuthToken"})," from scratch, please manually define the claims\nand optional audience field. For example: ",(0,i.jsxs)("pre",{children:["String jwt = JWT.create()",(0,i.jsx)("br",{}),'\n\xa0\xa0.withClaim("zid", "tenant-id")',(0,i.jsx)("br",{}),'\n\xa0\xa0.withClaim("iss", "',(0,i.jsx)(n.a,{href:"http://subscriber.domain",children:"http://subscriber.domain"}),'")',(0,i.jsx)("br",{}),'\n\xa0\xa0.withAudience("my-app!t123")',(0,i.jsx)("br",{}),"\n\xa0\xa0.sign(Algorithm.none());",(0,i.jsx)("br",{}),"\nAuthToken token = new AuthToken(JWT.decode(jwt));"]}),"\nAlternatively for creating extended unit tests based on token handling, please find the ",(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main/java-security-test",children:"SAP\nBTP Java Security Test"})," library instead. "]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"AccessToken"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsxs)("td",{children:["Use the results returned by the ",(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main/token-client",children:"Token\nClient library"})," instead"]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"AuditLogger"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsxs)("td",{children:[" You can use version 4 of the Audit Log artifact with version 5 of the SAP Cloud SDK.\nPlease refer the ",(0,i.jsx)("a",{href:"#audit-log-usage",children:"Audit Log usage"})," section below for more\ndetails. Please approach the SAP Cloud SDK development team if you face issues by ",(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-sdk-java/issues/new",children:"creating a GitHub support issue"}),"\n. ",(0,i.jsx)("br",{})," This change also affects the Audit Log integration with the S/4HANA Connectivity\nmodule. You will have to explicitly use ",(0,i.jsx)(n.code,{children:"AuditLogger"})," to log events. "]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfPrincipal"}),(0,i.jsx)("td",{children:"DefaultPrincipal"}),(0,i.jsx)("td",{children:" - "})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfPrincipalFacade"}),(0,i.jsx)("td",{children:"DefaultPrincipalFacade"}),(0,i.jsx)("td",{children:" - "})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"LocalScopePrefixProvider"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No replacement."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"DefaultLocalScopePrefixProvider"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No replacement."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"LocalScopePrefixExtractor"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No replacement."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Audience"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main",children:(0,i.jsx)(n.p,{children:"SAP BTP Security Libraries"})})}),(0,i.jsxs)("td",{id:"XsuaaComment",children:[(0,i.jsxs)(n.p,{children:["Use the SAP BTP Security Libraries to retrieve token information from\nthe token stored in the ",(0,i.jsx)("code",{children:"SecurityContext"}),". For example: ",(0,i.jsx)("br",{})]}),(0,i.jsx)("pre",{children:(0,i.jsxs)(n.p,{children:["Token token = SecurityContext.getToken(); ",(0,i.jsx)("br",{}),"\nString audience = token.getClaimAsString(TokenClaims.AUDIENCE); ",(0,i.jsx)("br",{}),"\nList<String> scopes = token.getClaimAsStringList(TokenClaims.XSUAA.SCOPES); ",(0,i.jsx)("br",{}),"\n..."]})}),(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsxs)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/blob/main/java-api/src/main/java/com/sap/cloud/security/token/TokenClaims.java",children:["\n",(0,i.jsx)("code",{children:"TokenClaims"}),"\n"]})," class for additional claims."]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Authorization"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main",children:(0,i.jsx)(n.p,{children:"SAP BTP Security Libraries"})})}),(0,i.jsxs)("td",{children:["See comment on ",(0,i.jsx)("a",{href:"#XsuaaComment",children:"retrieving token information."})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Role"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main",children:(0,i.jsx)(n.p,{children:"SAP BTP Security Libraries"})})}),(0,i.jsxs)("td",{children:["See comment on ",(0,i.jsx)("a",{href:"#XsuaaComment",children:"retrieving token information."})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Scope"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main",children:(0,i.jsx)(n.p,{children:"SAP BTP Security Libraries"})})}),(0,i.jsxs)("td",{children:["See comment on ",(0,i.jsx)("a",{href:"#XsuaaComment",children:"retrieving token information."})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"TenantSpecificAuthorization"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main",children:(0,i.jsx)(n.p,{children:"SAP BTP Security Libraries"})})}),(0,i.jsxs)("td",{children:["See comment on ",(0,i.jsx)("a",{href:"#XsuaaComment",children:"retrieving token information."})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"UserSpecificAuthorization"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main",children:(0,i.jsx)(n.p,{children:"SAP BTP Security Libraries"})})}),(0,i.jsxs)("td",{children:["See comment on ",(0,i.jsx)("a",{href:"#XsuaaComment",children:"retrieving token information."})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"PrincipalAttribute"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main",children:(0,i.jsx)(n.p,{children:"SAP BTP Security Libraries"})})}),(0,i.jsxs)("td",{children:["See comment on ",(0,i.jsx)("a",{href:"#XsuaaComment",children:"retrieving token information."})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"CollectionPrincipalAttribute"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main",children:(0,i.jsx)(n.p,{children:"SAP BTP Security Libraries"})})}),(0,i.jsxs)("td",{children:["See comment on ",(0,i.jsx)("a",{href:"#XsuaaComment",children:"retrieving token information."})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"SimplePrincipalAttribute"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main",children:(0,i.jsx)(n.p,{children:"SAP BTP Security Libraries"})})}),(0,i.jsxs)("td",{children:["See comment on ",(0,i.jsx)("a",{href:"#XsuaaComment",children:"retrieving token information."})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"StringCollectionPrincipalAttribute"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main",children:(0,i.jsx)(n.p,{children:"SAP BTP Security Libraries"})})}),(0,i.jsxs)("td",{children:["See comment on ",(0,i.jsx)("a",{href:"#XsuaaComment",children:"retrieving token information."})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"StringPrincipalAttribute"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main",children:(0,i.jsx)(n.p,{children:"SAP BTP Security Libraries"})})}),(0,i.jsxs)("td",{children:["See comment on ",(0,i.jsx)("a",{href:"#XsuaaComment",children:"retrieving token information."})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[(0,i.jsx)("p",{children:"ScpCfDestinationRetrievalStrategy"}),(0,i.jsx)("p",{children:".CURRENT_TENANT_THEN_PROVIDER"})]}),(0,i.jsx)("td",{children:"-"}),(0,i.jsxs)("td",{children:["Please query subscriber and provider tenants individually instead using ",(0,i.jsx)("code",{children:"\nONLY_SUBSCRIBER"})," and ",(0,i.jsx)("code",{children:"ALWAYS_PROVIDER"})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[(0,i.jsx)("p",{children:"PrincipalPropagationStrategy"}),(0,i.jsx)("p",{children:".setDefaultStrategy(...)"})]}),(0,i.jsx)("td",{children:"PrincipalPropagationMode"}),(0,i.jsxs)("td",{children:["Use via destination custom property: ",(0,i.jsx)("br",{}),(0,i.jsx)("code",{children:"DestinationProperty.PRINCIPAL_PROPAGATION_MODE\n= (TOKEN_FORWARDING|TOKEN_EXCHANGE)"}),"Default: ",(0,i.jsx)("code",{children:"TOKEN_FORWARDING"}),", for\nreduced token exchanges. ",(0,i.jsx)("a",{href:"https://help.sap.com/docs/connectivity/sap-btp-connectivity-cf/configure-principal-propagation-via-user-exchange-token",target:"_new",children:"See more."})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfTenant"}),(0,i.jsx)("td",{children:"DefaultTenant"}),(0,i.jsx)("td",{children:" - "})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"DwcTenant"}),(0,i.jsx)("td",{children:"DefaultTenant"}),(0,i.jsx)("td",{children:" - "})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfTenantFacade"}),(0,i.jsx)("td",{children:"DefaultTenantFacade"}),(0,i.jsx)("td",{children:" - "})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ThreadContextDecoratorInternal"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"Neo related classes are not supported anymore."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"JndiLookupAccessor"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"Neo related classes are not supported anymore."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"JndiLookupFacade"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"Neo related classes are not supported anymore."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"DefaultJndiLookupFacade"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"Neo related classes are not supported anymore."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"WithRuntimeDependencies"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"Neo related classes are not supported anymore."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfSecretStore"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No SAP Cloud SDK replacement. A similar functionality can be achieved by using the\njava.security.KeyStore feature."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfSecretStoreFacade"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No SAP Cloud SDK replacement. A similar functionality can be achieved by using the\njava.security.KeyStore feature."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"SecretStore"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No SAP Cloud SDK replacement. A similar functionality can be achieved by using the\njava.security.KeyStore feature."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"SecretStoreAccessor"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No SAP Cloud SDK replacement. A similar functionality can be achieved by using the\njava.security.KeyStore feature."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"SecretStoreFacade"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No SAP Cloud SDK replacement. A similar functionality can be achieved by using the\njava.security.KeyStore feature."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(n.p,{children:"CloudPlatform"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{}),"\n"]})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(n.p,{children:["No SAP Cloud SDK replacement. ",(0,i.jsx)("br",{})," Handling bound applications (i.e. ",(0,i.jsx)("code",{children:"\nVCAP_SERVICES"}),") is done via the ",(0,i.jsx)("a",{href:"https://github.com/SAP/btp-environment-variable-access",children:"Service Binding library"}),"\n.",(0,i.jsx)("br",{})," Handling application information (i.e. ",(0,i.jsx)("code",{children:"VCAP_APPLICATION"}),") can be done\nmanually: ",(0,i.jsx)("br",{})]}),(0,i.jsx)("pre",{children:(0,i.jsx)(n.p,{children:'new Gson().fromJson(System.getenv("VCAP_APPLICATION"), JsonObject.class).asMap();'})})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfCloudPlatform"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsxs)("td",{children:["No replacement. See note on ",(0,i.jsx)("code",{children:"CloudPlatform"})," (above)."]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"CloudPlatformFacade"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsxs)("td",{children:["No replacement. See note on ",(0,i.jsx)("code",{children:"CloudPlatform"})," (above)."]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ScpCfCloudPlatformFacade"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsxs)("td",{children:["No replacement. See note on ",(0,i.jsx)("code",{children:"CloudPlatform"})," (above)."]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"CloudPlatformAccessor"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsxs)("td",{children:["No replacement. See note on ",(0,i.jsx)("code",{children:"CloudPlatform"})," (above)."]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ThreadContextInvocationInterceptor"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No replacement."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ThrowableAssertionUtil"}),(0,i.jsx)("td",{children:"-"}),(0,i.jsx)("td",{children:"No replacement."})]})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"generate-and-use-your-own-odata-clients",children:"Generate and Use Your Own OData Clients"}),"\n",(0,i.jsx)(n.h3,{id:"generate-your-own-odata-clients",children:"Generate Your Own OData Clients"}),"\n",(0,i.jsx)(n.p,{children:"The SAP Cloud SDK no longer provides pre-generated OData Virtual Data Models.\nWe made this decision to reduce the maintenance effort and to allow you to generate your own OData clients with the exact version of the OData service you are using.\nThat way there is no need to wait for the next SAP Cloud SDK release to get the latest changes of an OData service you are consuming."}),"\n",(0,i.jsxs)(n.p,{children:["To generate your own OData VDM, you can use the ",(0,i.jsx)(n.a,{href:"../features/odata/vdm-generator",children:"OData Generator Maven Plugin"})," directly.\nYou can use the following configuration to generate an OData client that is compatible with the OData VDM the SAP Cloud SDK provided in version 4:"]}),"\n",(0,i.jsxs)(o.A,{groupId:"odataVersion",defaultValue:"v4",values:[{label:"OData v2",value:"v2"},{label:"OData v4",value:"v4"}],children:[(0,i.jsxs)(d.A,{value:"v4",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<inputDirectory>${project.basedir}/src/main/resources/odata/edmx</inputDirectory>\n<outputDirectory>${project.build.directory}/vdm</outputDirectory>\n<serviceNameMappingFile>${project.basedir}/src/main/resources/odata/serviceNameMappings.properties</serviceNameMappingFile>\n<deleteOutputDirectory>true</deleteOutputDirectory>\n<packageName>com.sap.cloud.sdk.s4hana.datamodel.odatav4</packageName>\n<compileScope>COMPILE</compileScope>\n"})}),(0,i.jsxs)(n.p,{children:["The file specified under ",(0,i.jsx)(n.em,{children:"serviceNameMappingFile"})," will be created and populated, if it doesn't exist yet.\nIf you want to create an OData client that is compatible with the OData VDM the SAP Cloud SDK provided in version 4, you can use this ",(0,i.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(41183).A+"",children:(0,i.jsx)(n.em,{children:"serviceNameMappings.properties"})}),"."]})]}),(0,i.jsxs)(d.A,{value:"v2",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<inputDirectory>${project.basedir}/src/main/resources/odata/edmx</inputDirectory>\n<outputDirectory>${project.build.directory}/vdm</outputDirectory>\n<serviceNameMappingFile>${project.basedir}/src/main/resources/odata/serviceNameMappings.properties</serviceNameMappingFile>\n<deleteOutputDirectory>true</deleteOutputDirectory>\n<packageName>com.sap.cloud.sdk.s4hana.datamodel.odata</packageName>\n<compileScope>COMPILE</compileScope>\n"})}),(0,i.jsxs)(n.p,{children:["The file specified under ",(0,i.jsx)(n.em,{children:"serviceNameMappingFile"})," will be created and populated, if it doesn't exist yet.\nIf you want to create an OData client that is compatible with the OData VDM the SAP Cloud SDK provided in version 4, you can use this ",(0,i.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(821).A+"",children:(0,i.jsx)(n.em,{children:"serviceNameMappings.properties"})}),"."]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["If you want to generate an OData client that is compatible with the On-Premise OData VDM the SAP Cloud SDK provided in version 4, take special care of the ",(0,i.jsx)(n.code,{children:"packageName"})," and the contents of the ",(0,i.jsx)(n.em,{children:"serviceNameMappingFile"})," to reflect what you are expecting."]}),"\n",(0,i.jsx)(n.h3,{id:"handle-odata-virtual-data-model-instantiation",children:"Handle OData Virtual Data Model Instantiation"}),"\n",(0,i.jsxs)(n.p,{children:["Depending on your project setup, you might have relied on the ",(0,i.jsx)(n.code,{children:"@Inject"})," annotation in your OData VDM services.\nAs the OData generators don't generate the ",(0,i.jsx)(n.code,{children:"javax.inject.Named"})," annotations anymore, you will need to instantiate your own services instead.\nFor that you can either use your own dependency injection framework, or instantiate the services manually."]}),"\n",(0,i.jsx)(n.p,{children:"The manual approach would look something like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- @Inject\n- private BusinessPartnerService businessPartnerService;\n+ private BusinessPartnerService businessPartnerService = new DefaultBusinessPartnerService();\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"remove-discontinued-servletfilter-from-your-webxml",children:["Remove Discontinued ServletFilter from Your ",(0,i.jsx)(n.code,{children:"web.xml"})]}),"\n",(0,i.jsxs)(n.p,{children:["We decided to remove all security related ",(0,i.jsx)(n.code,{children:"Filter"})," implementations from the SAP Cloud SDK, to have a clearer separation between the ",(0,i.jsx)(n.a,{href:"https://github.com/SAP/cloud-security-services-integration-library/",children:"SAP Security Libraries"})," and the SAP Cloud SDK."]}),"\n",(0,i.jsxs)(n.p,{children:["This means you need to remove all mentions of the following filters from your ",(0,i.jsx)(n.code,{children:"web.xml"})," (mind the ",(0,i.jsx)(n.code,{children:"security"})," in the package): ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform.security.servlet.*Filter"})]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform.servlet.RequestAccessorFilter"})," is functionally replaced by ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform.servletjakarta.RequestAccessorFilter"})," found in ",(0,i.jsx)(n.code,{children:"com.sap.cloud.sdk.cloudplatform:servlet-jakarta"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"audit-log-usage",children:"Audit Log usage"}),"\n",(0,i.jsx)(n.p,{children:"The Audit Log feature is no longer released with version 5 of the SAP Cloud SDK.\nIf you want to continue using audit logging, you could still use version 4 of the audit logging artifact along with version 5 of the SAP Cloud SDK."}),"\n",(0,i.jsx)(n.p,{children:"You would have to manually add all the following artifacts(only available internally) to your project:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"      <dependency>\n         <groupId>com.sap.cloud.sdk.cloudplatform</groupId>\n         <artifactId>auditlog-scp-cf</artifactId>\n         <version>4.28.0</version> \x3c!-- Pay attention that this the old v4 artifact --\x3e\n      </dependency>\n      <dependency>\n         <groupId>com.sap.xs.auditlog</groupId>\n         <artifactId>audit-java-client-api</artifactId>\n         <version>latest-available-version-in-artifactory</version>\n      </dependency>\n      <dependency>\n         <groupId>com.sap.xs.auditlog</groupId>\n         <artifactId>audit-java-client-impl</artifactId>\n         <version>latest-available-version-in-artifactory</version>\n      </dependency>\n      <dependency>\n         <groupId>com.sap.xs.java</groupId>\n         <artifactId>xs-env</artifactId>\n         <version>latest-available-version-in-artifactory</version>\n      </dependency>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You will then be able to log events using the ",(0,i.jsx)(n.code,{children:"AuditLogger"})," API."]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},19365:(e,n,t)=>{t.d(n,{A:()=>o});t(96540);var s=t(34164);const i={tabItem:"tabItem_Ymn6"};var r=t(74848);function o({children:e,hidden:n,className:t}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,s.A)(i.tabItem,t),hidden:n,children:e})}},11470:(e,n,t)=>{t.d(n,{A:()=>k});var s=t(96540),i=t(34164),r=t(17559),o=t(23104),d=t(56347),a=t(205),c=t(57485),l=t(31682),h=t(70679);function u(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return u(e).map((({props:{value:e,label:n,attributes:t,default:s}})=>({value:e,label:n,attributes:t,default:s})))}(t);return function(e){const n=(0,l.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function j({value:e,tabValues:n}){return n.some((n=>n.value===e))}function x({queryString:e=!1,groupId:n}){const t=(0,d.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(i),(0,s.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(t.location.search);n.set(i,e),t.replace({...t.location,search:n.toString()})}),[i,t])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,r=p(e),[o,d]=(0,s.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!j({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:r}))),[c,l]=x({queryString:t,groupId:i}),[u,m]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,i]=(0,h.Dv)(n);return[t,(0,s.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:i}),f=(()=>{const e=c??u;return j({value:e,tabValues:r})?e:null})();(0,a.A)((()=>{f&&d(f)}),[f]);return{selectedValue:o,selectValue:(0,s.useCallback)((e=>{if(!j({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);d(e),l(e),m(e)}),[l,m,r]),tabValues:r}}var f=t(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(74848);function y({className:e,block:n,selectedValue:t,selectValue:s,tabValues:r}){const d=[],{blockElementScrollPositionUntilNextRender:a}=(0,o.a_)(),c=e=>{const n=e.currentTarget,i=d.indexOf(n),o=r[i].value;o!==t&&(a(n),s(o))},l=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=d.indexOf(e.currentTarget)+1;n=d[t]??d[0];break}case"ArrowLeft":{const t=d.indexOf(e.currentTarget)-1;n=d[t]??d[d.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:r.map((({value:e,label:n,attributes:s})=>(0,v.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{d.push(e)},onKeyDown:l,onClick:c,...s,className:(0,i.A)("tabs__item",g.tabItem,s?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function b({lazy:e,children:n,selectedValue:t}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find((e=>e.props.value===t));return e?(0,s.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function S(e){const n=m(e);return(0,v.jsxs)("div",{className:(0,i.A)(r.G.tabs.container,"tabs-container",g.tabList),children:[(0,v.jsx)(y,{...n,...e}),(0,v.jsx)(b,{...n,...e})]})}function k(e){const n=(0,f.A)();return(0,v.jsx)(S,{...e,children:u(e.children)},String(n))}},821:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/files/SDKv4-ODatav2-serviceNameMappings-34740cba84ef539e1fc9ad72d9c9bdc9.properties"},41183:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/files/SDKv4-ODatav4-serviceNameMappings-ac34a445d1ce29bb6a8c86bc8b129b7b.properties"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>d});var s=t(96540);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);