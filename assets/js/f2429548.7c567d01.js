"use strict";(self.webpackChunksap_cloud_sdk_documentation=self.webpackChunksap_cloud_sdk_documentation||[]).push([[11179],{16891:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"features/odata/v4/request-builder","title":"request-builder","description":"OData supports operations, called actions and functions.","source":"@site/docs-js_versioned_docs/version-v3/features/odata/v4/request-builder.mdx","sourceDirName":"features/odata/v4","slug":"/features/odata/v4/request-builder","permalink":"/cloud-sdk/docs/js/v3/features/odata/v4/request-builder","draft":false,"unlisted":false,"editUrl":"https://github.com/SAP/cloud-sdk/edit/main/docs-js_versioned_docs/version-v3/features/odata/v4/request-builder.mdx","tags":[],"version":"v3","frontMatter":{}}');var s=t(74848),i=t(28453);const a={},r=void 0,c={},d=[{value:"Using Operations",id:"using-operations",level:3},{value:"Response Transformation",id:"response-transformation",level:3}];function u(e){const n={a:"a",code:"code",em:"em",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"OData supports operations, called actions and functions."}),"\n",(0,s.jsx)(n.p,{children:"Actions may have side-effects, functions may not have side-effects."}),"\n",(0,s.jsxs)(n.p,{children:["Actions and functions work quite similar but have differences in some details.\nIn the following, ",(0,s.jsx)(n.em,{children:"operations"})," refers to something that applies both to ",(0,s.jsx)(n.em,{children:"functions"})," and ",(0,s.jsx)(n.em,{children:"actions"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Operations can be ",(0,s.jsx)(n.em,{children:"bound"})," or ",(0,s.jsx)(n.em,{children:"unbound"}),'.\nBound means that the operation is tied to an entity.\nThis is similar to how a method is tied to a class instance in object oriented languages, while functions or "static" methods are not tied to an instance.']}),"\n",(0,s.jsxs)(n.p,{children:["To learn how to generate an API client from the service definition, look at ",(0,s.jsx)(n.a,{href:"/cloud-sdk/docs/js/v3/features/odata/generate-client",children:"this article"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"using-operations",children:"Using Operations"}),"\n",(0,s.jsx)(n.p,{children:"Bound operations are generated into their respective entity class."}),"\n",(0,s.jsx)(n.p,{children:"They can be called on the entity class like in the following example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const { catalogApi } = catalogService();\n\nconst entity = catalogApi.requestBuilder().getByKey(42).execute(destination);\n\nentity.boundActionWithoutArguments({}).execute(destination);\nentity\n  .boundActionWithArguments({ argument1: 'foo', argument2: 'bar' })\n  .execute(destination);\n\nentity.boundFunctionWithoutArguments({}).execute(destination);\nentity\n  .boundFunctionWithArguments({ argument1: 'foo', argument2: 'bar' })\n  .execute(destination);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Unbound actions and functions are generated into ",(0,s.jsx)(n.code,{children:"operations"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"The following code snippet shows the syntax for using them:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const {\n  operations: {\n    unboundActionWithArguments,\n    unboundActionWithoutArguments,\n    unboundFunctionWithArguments,\n    unboundFunctionWithoutArguments\n  }\n} = catalogService();\n\nunboundActionWithoutArguments({}).execute(destination);\nunboundActionWithArguments({ argument1: 'foo', argument2: 'bar' }).execute(\n  destination\n);\n\nunboundFunctionWithoutArguments({}).execute(destination);\nunboundFunctionWithArguments({ argument1: 'foo', argument2: 'bar' }).execute(\n  destination\n);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"response-transformation",children:"Response Transformation"}),"\n",(0,s.jsxs)(n.p,{children:["If the response structure does not match the transformation type, the promise from ",(0,s.jsx)(n.code,{children:"execute(destination)"})," will be resolved into ",(0,s.jsx)(n.code,{children:"undefined"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"The default transformer expects the following response format:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "d": {\n    "Count": 0\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Assume the actual response has an additional layer ",(0,s.jsx)(n.code,{children:"Foo"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "d": {\n    "Foo": {\n      "Count": 0\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["In this case, ",(0,s.jsx)(n.code,{children:"dataAccessor"})," can be used in the following way to modify the response into the desired form for further deserialization."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"functionImportRequestBuilder.execute(destination, data => data.d.Foo);\n"})})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var o=t(96540);const s={},i=o.createContext(s);function a(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);