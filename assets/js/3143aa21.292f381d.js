"use strict";(self.webpackChunksap_cloud_sdk_documentation=self.webpackChunksap_cloud_sdk_documentation||[]).push([[21673],{52718:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"guides/remote-debugging","title":"Remotely debug an application on SAP BTP","description":"This article describes how you can remotely debug an application on SAP Business Technology Platform","source":"@site/docs-js_versioned_docs/version-v3/guides/debug-remote-app.mdx","sourceDirName":"guides","slug":"/guides/remote-debugging","permalink":"/cloud-sdk/docs/js/guides/remote-debugging","draft":false,"unlisted":false,"editUrl":"https://github.com/SAP/cloud-sdk/edit/main/docs-js_versioned_docs/version-v3/guides/debug-remote-app.mdx","tags":[],"version":"v3","frontMatter":{"id":"remote-debugging","title":"Remotely debug an application on SAP BTP","sidebar_label":"Remotely debug an application on SAP BTP","description":"This article describes how you can remotely debug an application on SAP Business Technology Platform","keywords":["sap","cloud","sdk","debug","cloud-foundry","JavaScript","TypeScript"]},"sidebar":"docsJsSidebar","previous":{"title":"How to retrieve JWTs","permalink":"/cloud-sdk/docs/js/guides/retrieve-jwt"},"next":{"title":"Download specification files","permalink":"/cloud-sdk/docs/js/guides/api-business-hub-download-specification"}}');var t=o(74848),i=o(28453),a=o(21122),d=o(86025);const l={id:"remote-debugging",title:"Remotely debug an application on SAP BTP",sidebar_label:"Remotely debug an application on SAP BTP",description:"This article describes how you can remotely debug an application on SAP Business Technology Platform",keywords:["sap","cloud","sdk","debug","cloud-foundry","JavaScript","TypeScript"]},r=void 0,c={},u=[{value:"Assign yourself as a Space Developer",id:"assign-yourself-as-a-space-developer",level:2},{value:"Deploy Your Application with Debug Mode",id:"deploy-your-application-with-debug-mode",level:2},{value:"Open an ssh Tunnel to Your Application",id:"open-an-ssh-tunnel-to-your-application",level:2},{value:"Attach a Local Debugger",id:"attach-a-local-debugger",level:2},{value:"Visual Studio Code",id:"visual-studio-code",level:3},{value:"Webstorm",id:"webstorm",level:3}];function p(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"This guides outlines the steps you need to follow to start a remote debugging session from your IDE for an application that is already deployed on Cloud Foundry in SAP BTP."}),"\n",(0,t.jsx)(n.h2,{id:"assign-yourself-as-a-space-developer",children:"Assign yourself as a Space Developer"}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["You need to have the Space Manager or Org Manager role.\nFor details see ",(0,t.jsx)(n.a,{href:"https://help.sap.com/docs/BTP/65de2977205c403bbc107264b8eccf4b/81d0b4dcfbc84016b6b3c1465d4272f4.html",children:"here"}),"."]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Open the ",(0,t.jsx)(n.a,{href:"https://account.hana.ondemand.com/",children:"SAP Business Technology Platform Cockpit"})," and navigate to your subaccount"]}),"\n",(0,t.jsx)(n.li,{children:"Go to the space on Cloud Foundry where your application will be pushed to"}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.em,{children:"Member"})," on the left side menu"]}),"\n",(0,t.jsxs)(n.li,{children:["Add yourself as a ",(0,t.jsx)(n.em,{children:"Space Developer"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"deploy-your-application-with-debug-mode",children:"Deploy Your Application with Debug Mode"}),"\n",(0,t.jsxs)(n.p,{children:["In the package.json file, replace the ",(0,t.jsx)(n.code,{children:"start"})," script to run in debug mode.\nE.g., instead of ",(0,t.jsx)(n.code,{children:"node start.js"})," for node, use:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"node --inspect start.js\n"})}),"\n",(0,t.jsxs)(n.p,{children:["And instead of ",(0,t.jsx)(n.code,{children:"ts-node start.ts"}),", use:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"node -r ts-node/register --inspect start.ts\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You can do this by either changing your start script in the package.json or the command script in the ",(0,t.jsx)(n.code,{children:"manifest.yml"}),"."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Don't use ",(0,t.jsx)(n.code,{children:"--inspect-brk"}),", this will make the ",(0,t.jsx)(n.code,{children:"start"})," timeout on SAP Business Technology Platform."]})}),"\n",(0,t.jsx)(n.p,{children:"Deploy your application as usual by running the command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cf deploy\n"})}),"\n",(0,t.jsx)(n.h2,{id:"open-an-ssh-tunnel-to-your-application",children:"Open an ssh Tunnel to Your Application"}),"\n",(0,t.jsxs)(n.p,{children:["Open an ",(0,t.jsx)(n.a,{href:"https://docs.cloudfoundry.org/devguide/deploy-apps/ssh-apps.html#ssh-command",children:"ssh tunnel"})," to your backend application to connect your local debugger with the node inspector running on port 9229.\nReplace ",(0,t.jsx)(n.code,{children:"<your-app-name>"})," with your application name and run:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$ cf ssh <your-app-name> -L 9229:127.0.0.1:9229 -T -N\n"})}),"\n",(0,t.jsx)(n.h2,{id:"attach-a-local-debugger",children:"Attach a Local Debugger"}),"\n",(0,t.jsx)(n.p,{children:"Now you can attach your local debugger.\nFor this you will have to launch a debugger that attaches to the remote session."}),"\n",(0,t.jsx)(n.h3,{id:"visual-studio-code",children:"Visual Studio Code"}),"\n",(0,t.jsxs)(n.p,{children:["In Visual Studio Code, you can use the below attach configuration for Node.js debugging.\nReplace ",(0,t.jsx)(n.code,{children:"YOUR_APPLICATION_PATH"})," with the relative path to your application directory:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-JSON",children:'{\n  "version": "0.2.0",\n  "configurations": [\n    {\n      "type": "node",\n      "request": "attach",\n      "name": "Attach to Remote",\n      "address": "127.0.0.1",\n      "port": 9229,\n      "localRoot": "${workspaceFolder}/YOUR_APPLICATION_PATH",\n      "remoteRoot": "/home/vcap/app",\n      "skipFiles": ["node_modules/**"]\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"webstorm",children:"Webstorm"}),"\n",(0,t.jsx)(n.p,{children:"In Webstorm you can add configure debugging by creating a config as shown below:"}),"\n",(0,t.jsx)(a.A,{alt:"Application Router flow",sources:{light:(0,d.Ay)("img/remote-debugging-config-webstorm.png"),dark:(0,d.Ay)("img/remote-debugging-config-webstorm.png")},className:"center",width:"80%"}),"\n",(0,t.jsx)(n.p,{children:"Start the debugger !"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>a,x:()=>d});var s=o(96540);const t={},i=s.createContext(t);function a(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);