## 5.24.0 - October 30, 2025

[All Release Changes](https://github.com/SAP/cloud-sdk-java/releases/tag/rel%2F5.24.0)

### ‚ú® New Functionality

- Add support for using the Zero Trust Identity Service (ZTIS) on Kyma by detecting the [well-known environment variable `SPIFFE_ENDPOINT_SOCKET`](https://github.com/spiffe/spiffe/blob/main/standards/SPIFFE_Workload_Endpoint.md#4-locating-the-endpoint).
- Add support for explicitly passing the `clientid` of the target system when using the IAS App2App authentication flow.
  Use the new methods `withProviderClient(clientid)` and `withProviderClient(clientid, apptid)` under `BtpServiceOptions.IasOptions`.

### üìà Improvements

- When the circuit breaker opens, the resulting `ResilienceRuntimeException` will have the original `CallNotPermittedException` from the circuit breaker stored as a suppressed exception. 


## 5.23.0 - October 08, 2025

[All Release Changes](https://github.com/SAP/cloud-sdk-java/releases/tag/rel%2F5.23.0)

### üîß Compatibility Notes

- The builder methods for `TransparentProxyDestination` have been renamed:
  - `staticDestination()` to `destination()`
  - `dynamicDestination()` to `gateway()`

### üìà Improvements

- Circuit breaker exceptions `CallNotPermittedException` have been replaced in favor of the previously thrown exception to provide more context on the failure.

## 5.22.0 - August 29, 2025

[All Release Changes](https://github.com/SAP/cloud-sdk-java/releases/tag/rel%2F5.22.0)

### ‚ú® New Functionality

- Add built-in support for the [Transparent Proxy](https://help.sap.com/docs/connectivity/sap-btp-connectivity-cf/transparent-proxy-for-kubernetes) via a new `TransparentProxyDestination`.
  For more information, refer to the [documentation](https://sap.github.io/cloud-sdk/docs/java/features/connectivity/transparent-proxy).
- Add _experimental_ support for cross-level destination consumption via a new `CrossLevelScope` setting under `DestinationServiceOptionsAugmenter`.
- Add _experimental_ support for setting custom headers in requests to the destination service via the new `DestinationServiceOptionsAugmenter#customHeaders`.

### üêõ Fixed Issues

- [OpenAPI] Fix code generator for transitive dependency version inconsistencies for Jackson.
- [ODatav4] Fix incorrect HTTP header name when sending entity version identifier in bound-action requests.
- [ODatav4] Fix an issue when generating clients.
  - Property names: `value`, `item` and `properties` are now allowed.

## 5.21.0 - August 01, 2025

[All Release Changes](https://github.com/SAP/cloud-sdk-java/releases/tag/rel%2F5.21.0)

### ‚ú® New Functionality

- Add `TokenCacheParameters` to `OAuth2Options` to configurate token cache duration, expiration delta and cache size.

### üìà Improvements

- Relax OAuth2 token cache duration to 1hr to avoid unnecessary token refreshes.
- Disable refresh tokens when obtaining user tokens from IAS.
  This acts as a workaround for a limitation of IAS, where obtaining a refresh token invalidates the original token.

### üêõ Fixed Issues

- OData v2 and OData v4: Fix eager HTTP response evaluation for _Create_, _Update_, and _Delete_ request builders in convenience APIs.
  Previous change of `5.20.0` may have resulted in the HTTP connection being left open after the request was executed.
- Generic OData Client: Revert behavior change introduced in `5.20.0` that let to HTTP responses not being consumed by default.
  If you want to use `disableBufferingHttpResponse()` on `ODataRequestRead` or `ODataRequestReadByKey` please switch to `withoutResponseBuffering()` instead.

### üêõ Known Issues

- Using the `openapi-generator-plugin` in combination with a _Swagger v2_ specification file will likely lead to dependency convergence issue.
  If you have a `MethodNotFoundException` please use `5.20.0` or `5.22.0` (or later).

## 5.20.0 - June 20, 2025

[All Release Changes](https://github.com/SAP/cloud-sdk-java/releases/tag/rel%2F5.20.0)

### üêõ Fixed Issues

- Fix `CVE-2025-48734` by transitive dependency update in `connectivity-ztis`.
- For OData Generic Client: Fix `disableBufferingHttpResponse()` in `ODataRequestResultGeneric`.

### üêõ Known Issues

- For OData clients: This release changed the default HTTP response lifecycle for OData request-execution results.

  Until `5.19.0` the underlying _OData Generic Client_ was "eagerly" consuming the HTTP response.
  With `5.20.0` it changed to "lazily" consuming the HTTP response while buffering the content.
  While this is considered a fix and acceptable change for the expert _OData Generic Client_, we unintentionally changed the behavior in the convenience classes for OData v2 and OData v4 as well.
  This behavior change in convenience API will be reverted with next `5.21.0`.

  Affected users may observe the following exception message due to HTTP responses not being consumed and HTTP connections not being closed automatically:

  ```
  ConnectionPoolTimeoutException: Timeout waiting for connection from pool
  ```

  Please use `5.19.0` until this is fixed in `5.21.0`.

## 5.19.0 - May 26, 2025

[All Release Changes](https://github.com/SAP/cloud-sdk-java/releases/tag/rel%2F5.19.0)

### üìà Improvements

- Improve the detection and masking of secrets when logging data to debug.

### üêõ Fixed Issues

- Fix OData v2 error: Disable Validation in the absence of DOCTYPE
- Fix OData v2/v4 error: Navigating `nextLink` in paginated result-set no longer results in duplicate query parameters.

## 5.18.0 - April 16, 2025

[All Release Changes](https://github.com/SAP/cloud-sdk-java/releases/tag/rel%2F5.18.0)

### üîß Compatibility Notes

- Changed a behavior details when obtaining tokens from IAS with the default strategy `CURRENT_TENANT`.
  In case the current tenant is the provider tenant, and `TenantAccessor.getCurrentTenant()` is returning a `Tenant` object, this object is now required to have a subdomain != null.

### üêõ Fixed Issues

- OpenAPI: When `apiMaturity` is set to `beta`, generated enums will now be `@Beta` annotated.

## 5.17.0 - February 20, 2025

[All Release Changes](https://github.com/SAP/cloud-sdk-java/releases/tag/rel%2F5.17.0)

### üîß Compatibility Notes

- Changes regarding the TLS `Upgrade` header thanks to [Apache httpclient5 5.4.2](https://github.com/apache/httpcomponents-client/commit/5ab09ea39fed1c39ea35905532ba1567c785330a)
  - `TlsUpgrade.DISABLED` no changes
  - `TlsUpgrade.ENABLED` will not send the `Upgrade` header for non-proxy connections anymore
  - `TlsUpgrade.AUTOMATIC` **Default behaviour** will not send the `Upgrade` header anymore
    - Except for `proxyType(ProxyType.INTERNET)`

### ‚ú® New Functionality

- OpenAPI: Add `toMap()` and deprecate `getCustomField(String)` on generated model classes.

## 5.16.0 - January 29, 2025

[All Release Changes](https://github.com/SAP/cloud-sdk-java/releases/tag/rel%2F5.16.0)

### ‚ú® New Functionality

- Add experimental support for updating nested fields in OData v2 complex types via PATCH requests
  - Use optional argument `FluentHelperUpdate#modifyingEntity( ModifyPatchStrategy )` to control updates with delta or full complex property payloads.

### üìà Improvements

- Improve the OData v4 class `BatchRequestBuilder` to now also implement the `ModificationRequestBuilder` interface.

### üêõ Fixed Issues

- Fix non-compilable code using OpenAPI generator with schema definitions having `additionalProperties: true`.
  Previously they would result in model classes extending `HashMap`, which disabled proper deserialization and serialization.

## 5.15.0 - December 19, 2024

[All Release Changes](https://github.com/SAP/cloud-sdk-java/releases/tag/rel%2F5.15.0)

### ‚ú® New Functionality

- Add support for `TypeDefinition` entries in OData V4 EDMX files.
- Add `generateApis` and `generateModels` options to the `openapi-generator-maven-plugin` to
  disable the generation of APIs and models respectively.

### üìà Improvements

- Stabilize most of the remaining experimental APIs without changes, e.g.
  - RequestHeaderAccessor
  - ServiceBindingDestinationLoader
- OData v2 and v4 generators now use `LinkedHashMap` for the properties of the generated classes to maintain the order of the properties.

### üêõ Fixed Issues

- Fix ApacheHttpClient5Wrapper to propagate the configuration to Spring RestTemplate.
- Fix OData v2 and v4 generators to work when property name is `value` or `values` and is of collection type.
  - The internal variable is now respectively `cloudSdkValue` or `cloudSdkValues` to avoid conflicts with the `value` or `values` property.
