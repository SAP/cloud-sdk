---
id: 5.0-upgrade-steps
title: Steps to update to Version 5 of the SAP Cloud SDK
hide_title: false
hide_table_of_contents: false
sidebar_label: Update Steps to Version 5
description: Update your application to use version 5 of the SAP Cloud SDK
keywords:
  - sap
  - cloud
  - sdk
  - cloud native
  - cloud sdk
  - sap cloud sdk
  - 5
  - Update
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Version 5 of the SAP Cloud SDK is here and we highly recommend updating to it as soon as possible.
It brings various improvements, it is now Open Source and the Destination API has been unified.

:::note Release Blog Post
For more information also check out our version 5 release blog post
:::

:::warning Minimum Java Version
Starting with version 5.0.0 the SAP Cloud SDK requires a Java version of at least 17.
:::

:::info Minimum CAP version
If you are using the Cloud Application Programming model (CAP) to build your application, please note that the SAP Cloud SDK version 5 requires a minimum CAP/CDS version of at least `2.4.0`.
If you are on an older CAP stack, please follow the [CAP migration guide](https://cap.cloud.sap/docs/java/migration#one-to-two) first.
:::

## Before You Update

Before you increase the SAP Cloud SDK version to 5, it is recommended to first update to the latest available version of the SAP Cloud SDK 4 and migrate any usage of deprecated API. Follow the deprecation notes in the Javadocs to find recommended replacements. All deprecated APIs are removed with version 5.

Also, make sure that you are using Java 17 or higher. To setup your build to use Java 17 you can use [this guide](https://www.baeldung.com/maven-java-version).
As Java EE modules have been removed from Java 11, you might also need to update your application to use the [Jakarta EE](https://jakarta.ee/) modules instead.
This JEP provides a good overview of the changes: [JEP 320: Remove the Java EE and CORBA Modules](https://openjdk.java.net/jeps/320).

If you are consuming SOAP APIs and are relying on the `axis2-wsdl2code-maven-plugin` to generate classes, please also additionally include `javax.activation:activation` artifact to your dependencies to avoid compilation errors.

:::tip

We recommend to update your application in the following order:

1. Make sure you use the latest Cloud SDK v4 version available.
2. Update your application to use Java 17.
3. Update your application to use the latest Cloud SDK v5 and Spring Boot/Spring version available.

:::

## Change Version of Your `sdk-bom` or `sdk-modules-bom`

The first step is to change the version of the SAP Cloud SDK dependency in your `pom.xml` file.
Depending on your project setup you might use one of our BOMs or the individual modules.

To find our BOMs, search for the following entries in your maven `dependencyManagement` section: `com.sap.cloud.sdk:sdk-bom` and `com.sap.cloud.sdk:sdk-modules-bom`.
Update them directly to version `5.0.0` or the [latest version](https://central.sonatype.com/artifact/com.sap.cloud.sdk/sdk-bom).

If you are using `com.sap.cloud.sdk:sdk-sjb-bom` and produce a `war` deployment (e.g. when you require JCo for your application) you will need to stay on the latest version 4 of the SAP Cloud SDK.
In the other cases you should replace it with one of the BOMs mentioned above.

If you are building on Spring or Spring Boot you should also update to the latest version of the respective BOMs, so `6.1.0` (Spring) or `3.1.6` (Spring Boot) as of the time of writing.
These BOMs should be listed after any SAP Cloud SDK related BOM, so for Spring Boot your `dependencyManagement` section should look something like this:

```xml
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>com.sap.cloud.sdk</groupId>
            <artifactId>sdk-bom</artifactId>
            <version>5.0.0</version> <!-- TODO: replace this with the most recent version -->
            <type>pom</type>
            <scope>import</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-dependencies</artifactId>
            <version>3.1.6</version> <!-- TODO: replace this with the most recent version -->
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```

At the same time you should also replace usages of `javax` dependencies with the respective `jakarta` dependency.
As we only provide a managed version for `jakarta.servlet-api` in our BOM, you will need to add the formerly managed version for the `jakarta.inject-api` dependency manually:

```diff
-<dependency>
-    <groupId>javax.inject</groupId>
-    <artifactId>javax.inject</artifactId>
-</dependency>
+<dependency>
+    <groupId>jakarta.inject</groupId>
+    <artifactId>jakarta.inject-api</artifactId>
+    <version>2.0.1</version>
+</dependency>
```

Also remember to migrate all your dependencies to their respective `jakarta` versions if applicable.

For example, if you were previously using `com.sap.hcp.cf.logging:cf-java-logging-support-servlet` for application logging you must instead switch to using `com.sap.hcp.cf.logging:cf-java-logging-support-servlet-jakarta`.

```diff
-<dependency>
-    <groupId>com.sap.hcp.cf.logging</groupId>
-    <artifactId>cf-java-logging-support-servlet</artifactId>
-</dependency>
+<dependency>
+    <groupId>com.sap.hcp.cf.logging</groupId>
+    <artifactId>cf-java-logging-support-servlet-jakarta</artifactId>
+    <version>latest-lib-version</version>
+</dependency>
```

<details>
<summary>For projects that were already upgraded to Java 17 and Spring Boot 3 in SDK 4</summary>

Please remove any workarounds that were needed to make Java 17 and Spring Boot 3 work with SDK 4:

- When using the `scp-cf` module or its replacement `sdk-core`, please remove the `servlet-jakarta` module.
- When using the `@ServletComponentScan` annotation, please update the namespace back to:

```diff
- @ServletComponentScan({"com.sap.cloud.sdk.cloudplatform.servletjakarta", ...
+ @ServletComponentScan({"com.sap.cloud.sdk", ...
```

</details>

## Remove or Replace Modified Cloud SDK Dependencies

The lists below contains all modules that have been renamed or removed from the SDK.
Therefore, you should also rename respectively remove those from your project setup.

<details>
  <summary>Full list of renamed or replaced modules</summary>

- Module `com.sap.cloud.sdk.frameworks:resilience4j` has been moved to `com.sap.cloud.sdk.cloudplatform:resilience4j`
- Module `com.sap.cloud.sdk.frameworks:apache-httpclient5` has been moved to `com.sap.cloud.sdk.cloudplatform:connectivity-apache-httpclient5`
- Module `com.sap.cloud.sdk.cloudplatform:servlet` has been removed and functionally replaced by `com.sap.cloud.sdk.cloudplatform:servlet-jakarta` (replacing usage of `javax.servlet` with `jakarta.servlet`)
- Module `com.sap.cloud.sdk.cloudplatform:scp-cf` has been deprecated and functionally replaced by `com.sap.cloud.sdk:sdk-core`

</details>

<details>
    <summary>Full list of removed modules</summary>

- Bill of Materials
  - `com.sap.cloud.sdk:sdk-sjb-bom` Please use the cf-tomee7-bom and the sdk-bom instead.
- Archetypes (Replaced by single archetype: `com.sap.cloud.sdk.archetypes:spring-boot3`)
  - `com.sap.cloud.sdk.archetypes:scp-cf-tomee`
  - `com.sap.cloud.sdk.archetypes:scp-neo-javaee7`
- Neo related modules. Please migrate to the Cloud Foundry environment.
  - `com.sap.cloud.sdk.cloudplatform:auditlog-scp-neo`
  - `com.sap.cloud.sdk.cloudplatform:cloudplatform-connectivity-scp-neo`
  - `com.sap.cloud.sdk.cloudplatform:cloudplatform-core-scp-neo`
  - `com.sap.cloud.sdk.cloudplatform:concurrency-scp-neo`
  - `com.sap.cloud.sdk.cloudplatform:scp-neo`
  - `com.sap.cloud.sdk.cloudplatform:security-scp-neo`
  - `com.sap.cloud.sdk.cloudplatform:tenant-scp-neo`
  - `com.sap.cloud.sdk.plugins:scp-neo-maven-plugin`
- Generator CLIs
  - `com.sap.cloud.sdk.datamodel:odata-generator-cli`
    - Call the generator directly as a maven plugin:
    - `mvn com.sap.cloud.sdk.datamodel:odata-generator-maven-plugin:5.0.0:generate`
  - `com.sap.cloud.sdk.datamodel:odata-v4-generator-cli`
    - Call the generator directly as a maven plugin:
    - `mvn com.sap.cloud.sdk.datamodel:odata-v4-generator-maven-plugin:5.0.0:generate`
  - `com.sap.cloud.sdk.datamodel:openapi-generator-cli`
    - Call the generator directly as a maven plugin:
    - `mvn com.sap.cloud.sdk.datamodel:openapi-generator-maven-plugin:5.0.0:generate`
- Pregenerated Clients. [Generate and use your own OData VDM](#generate-and-use-your-own-odata-vdm) instead.
  - `com.sap.cloud.sdk.s4hana:s4hana-all`
  - `com.sap.cloud.sdk.s4hana:s4hana-api-odata`
  - `com.sap.cloud.sdk.s4hana:s4hana-api-odata-onpremise`
  - `com.sap.cloud.sdk.s4hana:s4hana-api-odata-v4`
  - `com.sap.cloud.sdk.s4hana:s4hana-api-odata-v4-onpremise`
- Services (Dropped without replacement)
  - `com.sap.cloud.sdk.services:blockchain-business-services-sdk`
  - `com.sap.cloud.sdk.services:blockchain-business-services-visibility`
  - `com.sap.cloud.sdk.services:blockchain-client-fabric`
  - `com.sap.cloud.sdk.services:blockchain-client-multichain`
  - `com.sap.cloud.sdk.services:btp-business-rules`
  - `com.sap.cloud.sdk.services:btp-shared-ledger-client`
  - `com.sap.cloud.sdk.services:scp-blockchain`
  - `com.sap.cloud.sdk.services:scp-business-logging-all`
  - `com.sap.cloud.sdk.services:scp-business-logging-core`
  - `com.sap.cloud.sdk.services:scp-business-logging-odata`
  - `com.sap.cloud.sdk.services:scp-business-logging-rest`
  - `com.sap.cloud.sdk.services:scp-workflow-cf`
- Others
  - `com.sap.cloud.sdk.cloudplatform:auditlog` (See `AuditLogger` in the <a href="#replaceremove-changed-api">list of deprecated API</a> section below)
  - `com.sap.cloud.sdk.cloudplatform:auditlog-scp-cf` (See `AuditLogger` in the <a href="#replaceremove-changed-api">list of deprecated API</a> section below)
  - `com.sap.cloud.sdk.cloudplatform:cloudplatform-connectivity-scp` (No replacement necessary)
  - `com.sap.cloud.sdk.cloudplatform:cloudplatform-core-scp-cf` (No replacement necessary)
  - `com.sap.cloud.sdk.cloudplatform:security-scp-cf` (Functionally integrated into the `com.sap.cloud.sdk.cloudplatform:security` module)
  - `com.sap.cloud.sdk.cloudplatform:security-servlet` (See the <a href="">ServletFilter</a> section below)
  - `com.sap.cloud.sdk.cloudplatform:tenant-scp-cf` (Functionally integrated into the `com.sap.cloud.sdk.cloudplatform:tenant` module)

</details>

If you are using our BOMs to provide the module versions, a fast way to do identify those is to run any `mvn` command.
This will now lead to error messages like this:

> 'dependencies.dependency.version' for com.sap.cloud.sdk.cloudplatform:auditlog-scp-cf:jar is missing

This helps you to identify which modules you need to remove or replace in your project setup.

## Steps to migrate `Destination` usages

Version 5 of the SAP Cloud SDK comes with a major cleanup of the APIs around the `Destination` concept.
Luckily, this cleanup comes **without a lot of breaking changes** so that existing applications require only a minimum of adjustments.
To make the process of adjusting existing applications as easy as possible, please follow the below steps:

1.  Remove any invocation of `Destination#decorate`.
    This method was only really used in conjunction with the `DefaultErpHttpDestination`, which has been removed in this major version update.
    The functionality has been moved internally, so that decorating existing `Destination` instances is no longer needed.

2.  (Optional) Remove any invocations of `Destination#asHttp` or `Destination#asRfc`.
    A big part of the `Destination` cleanup was to straighten our public APIs that previously expected specific sub-types of `Destination` or `DestinationProperties` (e.g. `HttpClientAccessor#getHttpClient(HttpDestinationProperties)`).
    These APIs now all simply rely on `Destination`, which makes casting via `#asHttp` or `#asRfc` unnecessary.

3.  Adjust error handling.
    Prior to version 5 of the SAP Cloud SDK, `Destination#asHttp` would throw an Exception in case the Destination Service wasn't able to provide valid `Authorization` header suggestions.
    This has been changed so that `asHttp` will no longer throw an Exception.
    Instead, calling the `getHeaders` method on an `HttpDestination` will throw an exception if any `Authorization` header suggestion provided by the Destination service contained an error.

    This change is **important** to keep in mind because it influences where applications are expected to catch Exceptions as the `getHeaders` method will be called during request execution.

<details>
<summary>Example</summary>

Given the following code:

```java
Try<Destination> maybeDestination = DestinationAccessor.tryGetDestination("my-destination");
if (maybeDestination.isFailure()) {
    throw new IllegalStateException("Unable to retrieve 'my-destination'.", maybeDestination.getCause());
}

HttpDestination httpDestination;
try {
    httpDestination = maybeDestination.get().asHttp();
} catch (DestinationAccessException e) {
    throw new IllegalStateException("Destination service wasn't able to provide a valid HTTP destination.", e);
}

try {
    new MyODataService().getAllEntities().executeRequest(httpDestination);
} catch (ODataException e) {
    throw new IllegalStateException("Unable to retrieve odata entities.", e);
}
```

The code should be updated like this:

```diff
Try<Destination> maybeDestination = DestinationAccessor.tryGetDestination("my-destination");
if (maybeDestination.isFailure()) {
    throw new IllegalStateException("Unable to retrieve 'my-destination'.", maybeDestination.getCause());
}

- HttpDestination httpDestination;
- try {
-   httpDestination = maybeDestination.get().asHttp();
- } catch (DestinationAccessException e) {
-   throw new IllegalStateException("Destination service wasn't able to provide a valid HTTP destination.", e);
- }

try {
-   new MyODataService().getAllEntities().executeRequest(httpDestination);
+   new MyODataService().getAllEntities().executeRequest(maybeDestination.get());
+ } catch (DestinationAccessException e) {
+   throw new IllegalStateException("Destination service wasn't able to provide a valid HTTP destination.", e);
} catch (ODataException e) {
    throw new IllegalStateException("Unable to retrieve odata entities.", e);
}
```

</details>

4.  Replace any of the removed classes related to the `Destination` API as mentioned in the [list of removed APIs](#remove-or-replace-modified-cloud-sdk-apis).

## Remove or Replace Modified Cloud SDK APIs

Once the build doesn't complain about missing dependency versions anymore, you can start to fix the compilation errors.

<details>
  <summary>Full list of removed API</summary>

  <table>
    <thead>
      <tr>
        <td>
          <b>API</b>
        </td>
        <td>
          <b>Replacement</b>
        </td>
        <td>
          <b>Comment</b>
        </td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>DefaultErpHttpDestination</td>
        <td>HttpDestination</td>
        <td>
          HttpDestination now automatically adds sap-client and sap-language
          headers defined on the destination
        </td>
      </tr>
      <tr>
        <td>ErpHttpDestination</td>
        <td>DefaultHttpDestination</td>
        <td>-</td>
      </tr>
      <tr>
        <td>ErpHttpDestinationProperties</td>
        <td>DefaultHttpDestination</td>
        <td>-</td>
      </tr>
      <tr>
        <td>ErpHttpDestinationUtils</td>
        <td>-</td>
        <td>No replacement necessary</td>
      </tr>
      <tr>
        <td>AbstractHttpDestination</td>
        <td>-</td>
        <td>No replacement necessary</td>
      </tr>
      <tr>
        <td>WrappedDestination</td>
        <td>-</td>
        <td>No replacement necessary</td>
      </tr>
      <tr>
        <td>AbstractScpDestination</td>
        <td>-</td>
        <td>No replacement necessary</td>
      </tr> 
      <tr>
        <td>AbstractScpDestinationBuilder</td>
        <td>-</td>
        <td>No replacement necessary</td>
      </tr>
      <tr>
        <td>ScpCfDestination</td>
        <td>-</td>
        <td>No replacement necessary</td>
      </tr>
      <tr>
        <td>ScpCfDestinationServiceResponseProvider</td>
        <td>-</td>
        <td>No replacement necessary</td>
      </tr>
      <tr>
        <td>ScpCfHttpDestination</td>
        <td>DefaultHttpDestination</td>
        <td>-</td>
      </tr>
      <tr>
        <td>ScpCfRfcDestination</td>
        <td>DefaultRfcDestination</td>
        <td>-</td>
      </tr>
      <tr>
        <td>WithDestinationName</td>
        <td>-</td>
        <td>No replacement</td>
      </tr>
      <tr>
        <td>StringConverter</td>
        <td>Java Standard Library</td>
        <td>
          The Java Standard Library offers the same features, e.g.
          <code>SimpleDateFormat</code> or <code>DateTimeFormatter</code>, with the
          pattern
          <code>yyyy-MM-dd</code> or <code>yyyy-MM-dd HH:mm:ss</code>
        </td>
      </tr>
      <tr>
        <td>StringValidator</td>
        <td>
          <a href="https://commons.apache.org/proper/commons-codec/">
            Apache Commons Codec
          </a>
        </td>
        <td>
          Use libraries like{' '}
          <a href="https://commons.apache.org/proper/commons-codec/">
            Apache Commons Codec
          </a>
          , which offers a{' '}
          <a href="https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html">
            Base64
          </a>{' '}
          class.
        </td>
      </tr>
      <tr>
        <td>ClientCredentialsValidator</td>
        <td>Java Standard Library</td>
        <td>
          For validation client secrets see <code>StringValidator</code> above.
          To validate the client id, try to match the regular expression
          <code>[a-zA-Z0-9\\-!|]+</code>.
        </td>
      </tr>
      <tr>
        <td>OAuth2ServiceProvider</td>
        <td><a href="https://github.com/SAP/cloud-security-services-integration-library/tree/main/token-client">SAP BTP Java Token Client</a></td>
        <td>
          Please directly use the <a href="https://github.com/SAP/cloud-security-services-integration-library/tree/main/token-client">SAP BTP Java Token Client</a> library instead.
        </td>
      </tr>
      <tr>
        <td>AuthTokenBuilder</td>
        <td><a href="https://github.com/auth0/java-jwt">Java JWT implementation</a></td>
        <td>
          For creating an <code>AuthToken</code> from scratch, please manually define the claims and optional audience field. For example:
          <pre>String jwt = JWT.create()<br />
          &nbsp;&nbsp;.withClaim("zid", "tenant-id")<br />
          &nbsp;&nbsp;.withClaim("iss", "http://subscriber.domain")<br />
          &nbsp;&nbsp;.withAudience("my-app!t123")<br />
          &nbsp;&nbsp;.sign(Algorithm.none());<br />
          AuthToken token = new AuthToken(JWT.decode(jwt));</pre>
          Alternatively for creating extended unit tests based on token handling, please find the <a href="https://github.com/SAP/cloud-security-services-integration-library/tree/main/java-security-test">SAP BTP Java Security Test</a> library instead.
        </td>
      </tr>
      <tr>
        <td>AccessToken</td>
        <td>-</td>
        <td>Use the results returned by the <a href="https://github.com/SAP/cloud-security-services-integration-library/tree/main/token-client">Token Client library</a> instead</td>
      </tr>
      <tr>
        <td>AuditLogger</td>
        <td>-</td>
        <td>
          Please approach the SAP Cloud SDK development team about migration guidance by <a href="https://github.com/SAP/cloud-sdk-java/issues/new">creating a GitHub support issue</a>.
          <br />
          This change also affects the Auditlog integration with the S/4HANA Connectivity module.
        </td>
      </tr>
      <tr>
        <td>ScpCfPrincipal</td>
        <td>DefaultPrincipal</td>
        <td> - </td>
      </tr>
      <tr>
        <td>ScpCfPrincipalFacade</td>
        <td>DefaultPrincipalFacade</td>
        <td> - </td>
      </tr>
      <tr>
        <td>LocalScopePrefixProvider</td>
        <td>-</td>
        <td>No replacement.</td>
      </tr>
      <tr>
        <td>DefaultLocalScopePrefixProvider</td>
        <td>-</td>
        <td>No replacement.</td>
      </tr>
      <tr>
        <td>LocalScopePrefixExtractor</td>
        <td>-</td>
        <td>No replacement.</td>
      </tr>
      <tr>
        <td>Audience</td>
        <td><a href= "https://github.com/SAP/cloud-security-services-integration-library/tree/main">
                    SAP BTP Security Services Integration Libraries</a></td>
        <td id="XsuaaComment">Use the SAP BTP Security Services Integration Libraries to retrieve token information from the token stored
                    in the <code>SecurityContext</code>. For example: <br />
         <pre>
         Token token = SecurityContext.getToken(); <br />
         String audience = token.getClaimAsString(TokenClaims.AUDIENCE); <br />
         List&lt;String&gt; scopes = token.getClaimAsStringList(TokenClaims.XSUAA.SCOPES); <br />
         ...
         </pre>
         See the <a href= "https://github.com/SAP/cloud-security-services-integration-library/blob/main/java-api/src/main/java/com/sap/cloud/security/token/TokenClaims.java">
                    <code>TokenClaims</code></a> class for additional claims.
        </td>
      </tr>
      <tr>
        <td>Authorization</td>
        <td><a href= "https://github.com/SAP/cloud-security-services-integration-library/tree/main">
                    SAP BTP Security Services Integration Libraries</a></td>
        <td>See comment on <a href="#XsuaaComment">retrieving token information.</a></td>
      </tr>
      <tr>
        <td>Role</td>
        <td><a href= "https://github.com/SAP/cloud-security-services-integration-library/tree/main">
                            SAP BTP Security Services Integration Libraries</a></td>
        <td>See comment on <a href="#XsuaaComment">retrieving token information.</a></td>
      </tr>
      <tr>
        <td>Scope</td>
        <td><a href= "https://github.com/SAP/cloud-security-services-integration-library/tree/main">
                            SAP BTP Security Services Integration Libraries</a></td>
        <td>See comment on <a href="#XsuaaComment">retrieving token information.</a></td>
      </tr>
      <tr>
        <td>TenantSpecificAuthorization</td>
        <td><a href= "https://github.com/SAP/cloud-security-services-integration-library/tree/main">
                            SAP BTP Security Services Integration Libraries</a></td>
        <td>See comment on <a href="#XsuaaComment">retrieving token information.</a></td>
      </tr>
      <tr>
        <td>UserSpecificAuthorization</td>
        <td><a href= "https://github.com/SAP/cloud-security-services-integration-library/tree/main">
                            SAP BTP Security Services Integration Libraries</a></td>
        <td>See comment on <a href="#XsuaaComment">retrieving token information.</a></td>
      </tr>
      <tr>
        <td>PrincipalAttribute</td>
        <td><a href= "https://github.com/SAP/cloud-security-services-integration-library/tree/main">
                            SAP BTP Security Services Integration Libraries</a></td>
        <td>See comment on <a href="#XsuaaComment">retrieving token information.</a></td>
      </tr>
      <tr>
        <td>CollectionPrincipalAttribute</td>
        <td><a href= "https://github.com/SAP/cloud-security-services-integration-library/tree/main">
                            SAP BTP Security Services Integration Libraries</a></td>
        <td>See comment on <a href="#XsuaaComment">retrieving token information.</a></td>
      </tr>
      <tr>
        <td>SimplePrincipalAttribute</td>
        <td><a href= "https://github.com/SAP/cloud-security-services-integration-library/tree/main">
                            SAP BTP Security Services Integration Libraries</a></td>
        <td>See comment on <a href="#XsuaaComment">retrieving token information.</a></td>
      </tr>
      <tr>
        <td>StringCollectionPrincipalAttribute</td>
        <td><a href= "https://github.com/SAP/cloud-security-services-integration-library/tree/main">
                            SAP BTP Security Services Integration Libraries</a></td>
        <td>See comment on <a href="#XsuaaComment">retrieving token information.</a></td>
      </tr>
      <tr>
        <td>StringPrincipalAttribute</td>
        <td><a href= "https://github.com/SAP/cloud-security-services-integration-library/tree/main">
                            SAP BTP Security Services Integration Libraries</a></td>
        <td>See comment on <a href="#XsuaaComment">retrieving token information.</a></td>
      </tr>
      <tr>
        <td>ScpCfDestinationRetrievalStrategy.CURRENT_TENANT_THEN_PROVIDER</td>
        <td>Please query subscriber and provider tenants individually instead using <code>ONLY_SUBSCRIBER</code> and <code>ALWAYS_PROVIDER</code></td>
        <td>-</td>
      </tr>
      <tr>
        <td>PrincipalPropagationStrategy.setDefaultStrategy(...)</td>
        <td>Destination custom property: <br /><code>DestinationProperty.PRINCIPAL_PROPAGATION_MODE = (TOKEN_FORWARDING|TOKEN_EXCHANGE)</code></td>
        <td>Default: <code>TOKEN_FORWARDING</code>, for reduced token exchanges. <a href="https://help.sap.com/docs/connectivity/sap-btp-connectivity-cf/configure-principal-propagation-via-user-exchange-token" target="_new">See more.</a></td>
      </tr>
      <tr>
        <td>ScpCfTenant</td>
        <td>DefaultTenant</td>
        <td> - </td>
      </tr>
      <tr>
        <td>DwcTenant</td>
        <td>DefaultTenant</td>
        <td> - </td>
      </tr>
      <tr>
        <td>ScpCfTenantFacade</td>
        <td>DefaultTenantFacade</td>
        <td> - </td>
      </tr>
      <tr>
        <td>ThreadContextDecoratorInternal</td>
        <td>-</td>
        <td>Neo related classes are not supported anymore.</td>
      </tr>
      <tr>
        <td>JndiLookupAccessor</td>
        <td>-</td>
        <td>Neo related classes are not supported anymore.</td>
      </tr>
      <tr>
        <td>JndiLookupFacade</td>
        <td>-</td>
        <td>Neo related classes are not supported anymore.</td>
      </tr>
      <tr>
        <td>DefaultJndiLookupFacade</td>
        <td>-</td>
        <td>Neo related classes are not supported anymore.</td>
      </tr>
      <tr>
        <td>WithRuntimeDependencies</td>
        <td>-</td>
        <td>Neo related classes are not supported anymore.</td>
      </tr>
      <tr>
        <td>ScpCfSecretStore</td>
        <td>-</td>
        <td>No SDK replacement. A similiar functioniality can be achieved by using the java.security.KeyStore feature.</td>
      </tr>
      <tr>
        <td>ScpCfSecretStoreFacade</td>
        <td>-</td>
        <td>No SDK replacement. A similiar functioniality can be achieved by using the java.security.KeyStore feature.</td>
      </tr>
      <tr>
        <td>SecretStore</td>
        <td>-</td>
        <td>No SDK replacement. A similiar functioniality can be achieved by using the java.security.KeyStore feature.</td>
      </tr>
      <tr>
        <td>SecretStoreAccessor</td>
        <td>-</td>
        <td>No SDK replacement. A similiar functioniality can be achieved by using the java.security.KeyStore feature.</td>
      </tr>
      <tr>
        <td>SecretStoreFacade</td>
        <td>-</td>
        <td>No SDK replacement. A similiar functioniality can be achieved by using the java.security.KeyStore feature.</td>
      </tr>
      <tr>
        <td>CloudPlatform</td>
        <td>-</td>
        <td>No replacement, as all platform specifics are handled by the <a href="https://github.com/SAP/btp-environment-variable-access">Service Binding library</a>.</td>
      </tr>
      <tr>
        <td>ScpCfCloudPlatform</td>
        <td>-</td>
        <td>No replacement, as all platform specifics are handled by the <a href="https://github.com/SAP/btp-environment-variable-access">Service Binding library</a>.</td>
      </tr>
      <tr>
        <td>CloudPlatformFacade</td>
        <td>-</td>
        <td>No replacement, as all platform specifics are handled by the <a href="https://github.com/SAP/btp-environment-variable-access">Service Binding library</a>.</td>
      </tr>
      <tr>
        <td>ScpCfCloudPlatformFacade</td>
        <td>-</td>
        <td>No replacement, as all platform specifics are handled by the <a href="https://github.com/SAP/btp-environment-variable-access">Service Binding library</a>.</td>
      </tr>
      <tr>
        <td>CloudPlatformAccessor</td>
        <td>-</td>
        <td>No replacement, as all platform specifics are handled by the <a href="https://github.com/SAP/btp-environment-variable-access">Service Binding library</a>.</td>
      </tr>
      <tr>
        <td>ThreadContextInvocationInterceptor</td>
        <td>-</td>
        <td>No replacement.</td>
      </tr>
      <tr>
        <td>ThrowableAssertionUtil</td>
        <td>-</td>
        <td>No replacement.</td>
      </tr>
    </tbody>
  </table>
</details>

## Generate and Use Your Own OData VDM

### Generate Your Own OData VDM

The SAP Cloud SDK no longer provides pre-generated OData VDMs. We made this decision to reduce the maintenance effort and to allow you to generate your own VDM with the exact version of the OData service you are using. That way there is no need to wait for the next SDK release to get the latest changes of an OData service you are consuming.

To generate your own OData VDM, you can use the [OData Generator Maven Plugin](../features/odata/vdm-generator) directly.
You can use the following configuration to generate a VDM that is compatible with the OData VDM the SDK provided in version 4:

<Tabs groupId="odataVersion" defaultValue="v4" values={[ { label: 'OData v2', value: 'v2', }, { label: 'OData v4', value: 'v4', }]}>

<TabItem value="v4">

```xml
<inputDirectory>${project.basedir}/src/main/resources/odata/edmx</inputDirectory>
<outputDirectory>${project.build.directory}/vdm</outputDirectory>
<serviceNameMappingFile>${project.basedir}/src/main/resources/odata/serviceNameMappings.properties</serviceNameMappingFile>
<deleteOutputDirectory>true</deleteOutputDirectory>
<packageName>com.sap.cloud.sdk.s4hana.datamodel.odatav4</packageName>
<compileScope>COMPILE</compileScope>
```

The file specified under _serviceNameMappingFile_ will be created and populated, if it doesn't exist yet.
If you want to create a VDM that is compatible with the OData VDM the SDK provided in version 4, you can use this [_serviceNameMappings.properties_](/resources/SDKv4-ODatav4-serviceNameMappings.properties).

</TabItem>
<TabItem value="v2">

```xml
<inputDirectory>${project.basedir}/src/main/resources/odata/edmx</inputDirectory>
<outputDirectory>${project.build.directory}/vdm</outputDirectory>
<serviceNameMappingFile>${project.basedir}/src/main/resources/odata/serviceNameMappings.properties</serviceNameMappingFile>
<deleteOutputDirectory>true</deleteOutputDirectory>
<packageName>com.sap.cloud.sdk.s4hana.datamodel.odata</packageName>
<compileScope>COMPILE</compileScope>
```

The file specified under _serviceNameMappingFile_ will be created and populated, if it doesn't exist yet.
If you want to create a VDM that is compatible with the OData VDM the SDK provided in version 4, you can use this [_serviceNameMappings.properties_](/resources/SDKv4-ODatav2-serviceNameMappings.properties).

</TabItem>
</Tabs>

If you want to generate a VDM that is compatible with the On-Premise OData VDM the SDK provided in version 4, take special care of the `packageName` and the contents of the _serviceNameMappingFile_ to reflect what you are expecting.

### Handle OData VDM Instantiation

Depending on your project setup, you might have relied on the `@Inject` annotation in your OData VDM services.
As the OData generators don't generate the `javax.inject.Named` annotations anymore, you will need to instantiate your own services instead.
For that you can either use your own dependency injection framework, or instantiate the services manually.

The manual approach would look something like this:

```diff
- @Inject
- private BusinessPartnerService businessPartnerService;
+ private BusinessPartnerService businessPartnerService = new DefaultBusinessPartnerService();
```

## Remove Discontinued ServletFilter from Your `web.xml`

We decided to remove all security related `Filter` implementations from the SAP Cloud SDK, to have a clearer separation between the [SAP Security Libraries](https://github.com/SAP/cloud-security-services-integration-library/) and the SAP Cloud SDK.

This means you need to remove all mentions of the following filters from your `web.xml` (mind the `security` in the package): `com.sap.cloud.sdk.cloudplatform.security.servlet.*Filter`

The `com.sap.cloud.sdk.cloudplatform.servlet.RequestAccessorFilter` is functionally replaced by `com.sap.cloud.sdk.cloudplatform.servletjakarta.RequestAccessorFilter` found in `com.sap.cloud.sdk.cloudplatform:servlet-jakarta`.
