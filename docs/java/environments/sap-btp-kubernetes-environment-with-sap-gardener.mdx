---
title: Kubernetes environment with SAP Gardener
sidebar_label: Kubernetes with SAP Gardener
description: Kubernetes is...
keywords:
  - sap
  - cloud
  - sdk
  - cloud native
  - cloud sdk
  - sap cloud sdk
  - kubernetes
  - java
  - k8s
  - gardener
---

[SAP Gardener](https://gardener.cloud/) is a managed Kubernetes service by SAP developed as an Open Source project.
Essentially, Gardener is a thin layer of conventions on top of the plain Kubernetes.
It helps create and manage multiple Kubernetes clusters with less effort by abstracting environment specifics to deliver the same homogeneous Kubernetes-native DevOps experience everywhere.

![Gardener](https://gardener.cloud/images/lp/lp-gardener-diagram.svg)

## The SAP Cloud SDK Features Supported on SAP Gardener

The SAP Cloud SDK supports SAP Gardener-based Kubernetes clusters out of the box.
The following SAP Cloud SDK features are available in this environment:

- Let's create a list of features that we usually port to different environments.
- The list below is only for inspiration.
    You know for what we are creating the tests.
- Consume SAP BTP services like Destination, Connectivity, IAS, XSUAA, and others.
- Connect to and consume services from SAP S/4HANA Cloud
- Connect to and consume services from SAP S/4HANA On-Premise
- Support for Multitenancy
- Seamless use of typed clients provided by the SAP Cloud SDK

## Develop the SAP Cloud SDK Application on SAP Gardener

This detailed guide will help get your SAP Cloud SDK Java application up and running in the SAP Gardener-based Kubernetes cluster.
You can also use this guide to migrate your existing application to Kubernetes.

### Prerequisites

You need:
- A Gardener managed cluster
- `kubectl` installed & configured for accessing the cluster
- Docker & a publicly reachable Docker repository
- A Spring Boot Application using the SAP Cloud SDK
  - If you don't have one you can comfortably [create one from our archetypes](../getting-started)

<details>
  <summary>Verify your Cluster Access</summary>

Running `kubectl cluster-info` should print out your cluster endpoints.

In case you haven't set this up you can do so by downloading a kubeconfig file from your Gardener dashboard.
</details>

### Containerize the Application

To run on Kubernetes the application needs to be shipped in a container.
For this guide we will be using Docker.

Create a Dockerfile in the project root directory:
```
FROM openjdk:8-jdk-alpine
ARG JAR_FILE=application/target/*.jar
COPY ${JAR_FILE} app.jar
ENTRYPOINT ["java","-jar","/app.jar"]
EXPOSE 8080
```

Compile and push the image by running:

```bash
docker build -t <your-repo>/<your-image-name> .
docker push <your-repo>/<your-image-name>
```

<details>
  <summary>Docker Repository Access</summary>

You can use any publicly reachable repository.
For example a personal Docker Hub account to get started or a repository on [https://common.repositories.cloud.sap](https://common.repositories.cloud.sap)

Depending on your repository you may have to login first via `docker login`.
In that case you also need to store a docker login secret on the Kubernetes cluster.
</details>

### Create a Kubernetes Deployment

Create a new `deployment.yml` file describing the Kubernetes deployment:

```yml
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: my-app
  template:
    metadata:
      labels:
        app: my-app
    spec:
      containers:
        # Configure the docker image you just pushed to your repository here
        - image: <your-repo>/<your-image>:latest
          name: my-app
          imagePullPolicy: Always
          resources:
            requests:
              memory: "1Gi"
              cpu: "2500m"
            limits:
              memory: "1.5Gi"
              cpu: "750m"
      imagePullSecrets:
        # In case your repositoriy requires a login reference your secret here
        - name: <your-secret-for-docker-login>
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: my-app
  name: my-app
  namespace: default
spec:
  type: NodePort
  ports:
    - port: 8080
  selector:
    app: my-app
```

Install the configuration via `kubectl apply -f deployment.yml`.

Monitor the status of the deployment by running: `kubectl describe deployment my-app-deployment`

<details>
  <summary>Optional: Configure your application for access from outside the cluster</summary>

In case you already have configured an Ingress for your cluster you can make your application accessible via that Ingress by adding a service to the `deployment.yml`:

```yml
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: my-app
  name: my-app
  namespace: default
spec:
  type: NodePort
  ports:
    - port: 8080
  selector:
    app: my-app
```
</details>

### Access the Application

### Bind SAP BTP Services to the Application

The SAP Business Technology Platform offers various services that can be used by applications.
To access services from a Kubernetes environment instances have to be created and bound to the application.

There are multiple ways to achieve this.
We recommend using the SAP BTP Service Operator to achieve this.

:::note

::: 

### Configure Service Operator
