<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-docs-java docs-version-v3 docs-doc-page docs-doc-id-features/connectivity/destination-service" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Use Destinations To Connect To Other Systems and Services | SAP Cloud SDK</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sap.github.io/cloud-sdk/docs/java/v3/features/connectivity/destination-service"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v3"><meta data-rh="true" name="docusaurus_tag" content="docs-docs-java-v3"><meta data-rh="true" name="docsearch:version" content="v3"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs-java-v3"><meta data-rh="true" property="og:title" content="Use Destinations To Connect To Other Systems and Services | SAP Cloud SDK"><meta data-rh="true" name="description" content="This article describes how the SAP Cloud SDK for Java can be used to establish connections to other systems and services like SAP S/4HANA or SAP Business Technology Platform services."><meta data-rh="true" property="og:description" content="This article describes how the SAP Cloud SDK for Java can be used to establish connections to other systems and services like SAP S/4HANA or SAP Business Technology Platform services."><meta data-rh="true" name="keywords" content="sap,cloud,sdk,destination,java,connectivity"><link data-rh="true" rel="icon" href="/cloud-sdk/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://sap.github.io/cloud-sdk/docs/java/v3/features/connectivity/destination-service"><link data-rh="true" rel="alternate" href="https://sap.github.io/cloud-sdk/docs/java/v3/features/connectivity/destination-service" hreflang="en"><link data-rh="true" rel="alternate" href="https://sap.github.io/cloud-sdk/docs/java/v3/features/connectivity/destination-service" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://E4A268JVO0-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Destinations","item":"https://sap.github.io/cloud-sdk/docs/java/v3/features/connectivity/destination-service"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="SAP Cloud SDK" href="/cloud-sdk/opensearch.xml"><link rel="stylesheet" href="/cloud-sdk/assets/css/styles.fa9056a1.css">
<script src="/cloud-sdk/assets/js/runtime~main.e8b7d2d3.js" defer="defer"></script>
<script src="/cloud-sdk/assets/js/main.1f76f312.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/cloud-sdk/img/logo.svg"><link rel="preload" as="image" href="/cloud-sdk/img/logo-dark.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cloud-sdk/"><div class="navbar__logo"><img src="/cloud-sdk/img/logo.svg" alt="SAP Cloud SDK" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cloud-sdk/img/logo-dark.svg" alt="SAP Cloud SDK" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">SAP Cloud SDK</b></a><a class="navbar__item navbar__link" href="/cloud-sdk/docs/overview/overview-cloud-sdk">Overview</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" docspluginid="docs-java" href="/cloud-sdk/docs/java/overview-cloud-sdk-for-java">â˜• Java</a><a class="navbar__item navbar__link" docspluginid="docs-js" href="/cloud-sdk/docs/js/overview">ðŸš€ JavaScript</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://sap.github.io/ai-sdk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">SAP Cloud SDK for AI<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/cloud-sdk/docs/java/v3/features/connectivity/destination-service">v3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cloud-sdk/docs/java/features/connectivity/destination-service">v5</a></li><li><a class="dropdown__link" href="/cloud-sdk/docs/java/v4/features/connectivity/destination-service">v4</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/cloud-sdk/docs/java/v3/features/connectivity/destination-service">v3</a></li></ul></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/v3/overview-cloud-sdk-for-java">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/v3/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/cloud-sdk/docs/java/v3/features/odata/overview">Features</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/cloud-sdk/docs/java/v3/features/odata/overview">OData</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/cloud-sdk/docs/java/v3/features/rest/overview">OpenAPI</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/v3/features/bapi-and-rfc/overview">BAPI/RFC</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/cloud-sdk/docs/java/v3/features/connectivity/destination-service">Connectivity</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cloud-sdk/docs/java/v3/features/connectivity/destination-service">Destinations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/v3/features/connectivity/http-client">HttpClient</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/v3/features/connectivity/mtls">Certificate-based Authentication</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/cloud-sdk/docs/java/v3/features/multi-tenancy/thread-context">Multitenancy</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/cloud-sdk/docs/java/v3/features/resilience">Resilience &amp; Caching</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cloud-sdk/docs/java/v3/environments/overview">Environments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cloud-sdk/docs/java/v3/guides/manage-dependencies">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cloud-sdk/docs/java/v3/extensions/extensions-supported-by-sap-cloud-sdk-for-java">Extensions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cloud-sdk/docs/java/v3/video/video-tutorial-about-getting-started-with-sap-cloud-sdk-for-java">Video Tutorials</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/v3/troubleshooting-frequent-problems">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/v3/release-policy">Release Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/v3/release-notes">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/v3/frequently-asked-questions">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://search.maven.org/search?q=g:com.sap.cloud.sdk*" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Maven Central<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->SAP Cloud SDK<!-- --> <b>v3</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/cloud-sdk/docs/java/features/connectivity/destination-service">latest version</a></b> (<!-- -->v5<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cloud-sdk/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Features</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Connectivity</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Destinations</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Use Destinations To Connect To Other Systems and Services</h1></header><p>The SAP Cloud SDK offers some basic functionality that helps with connecting to other systems and services like SAP S/4HANA Cloud.
The SAP Cloud SDK introduces the general concept of a <code>Destination</code> which holds basic information about how to connect to such a system.
That could for instance be a <code>url</code>, a username, and password for basic authentication or some custom headers.</p>
<p>This concept is integrated with the <a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/7e306250e08340f89d6c103e28840f30.html" target="_blank" rel="noopener noreferrer">Destination Service</a> that is available on the SAP Business Technology Platform.
If the application has a service binding to this service in place the SAP Cloud SDK will provide access to these destinations.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-destinations">Accessing Destinations<a href="#accessing-destinations" class="hash-link" aria-label="Direct link to Accessing Destinations" title="Direct link to Accessing Destinations">â€‹</a></h2>
<p>In general destinations are accessed through the <code>DestinationAccessor</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">DestinationAccessor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDestination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my-destination&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>This will look up the destination in the destination service if the application is running on SAP Business Technology Platform.
Other sources like the environment variables are also considered.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Authentication Flows</div><div class="admonitionContent_BuS1"><p>Authentication flows like <strong>OAuth 2.0 Client Credentials</strong> and others are usually performed by the Destination Service.
They are executed when querying the destination information and the resulting authorization information will be included in the response.</p><p>See the note on <a href="#supported-authentication-flows">supported authentication flows</a>.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Destinations are cached for 5 minutes</div><div class="admonitionContent_BuS1"><p>To minimize the runtime overhead of finding destinations, the SAP Cloud SDK uses caching to internally maintain a list of already retrieved destinations.
Therefore, subsequent calls to <code>DestinationAccessor.getDestination(&quot;my-destination&quot;);</code> will be served from that cache instead of performing the look up over and over again.
By default, cache entries will automatically be invalidated 5 minutes after their initial creation.
The caching behavior can be customized.
Please refer to <a href="#configuring-caching-when-querying-the-destination-service-on-cloud-foundry">our section about configuring the cache configuration</a> for more details.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="supported-authentication-flows">Supported Authentication Flows<a href="#supported-authentication-flows" class="hash-link" aria-label="Direct link to Supported Authentication Flows" title="Direct link to Supported Authentication Flows">â€‹</a></h2>
<p>The SAP Cloud SDK does not implement most of the authentication flows itself.
Instead, it relies on the Destination Service to perform the flows and complements it with additional steps, if necessary.</p>
<p>The SAP Cloud SDK recognizes the following authentication types of the SAP BTP Destination Service:</p>
<table><thead><tr><th style="text-align:left">Authentication Type</th><th style="text-align:left">Parameter Name</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/4e13a04147314e8e9e54321f25d93fdc.html" target="_blank" rel="noopener noreferrer"><code>NoAuthentication</code></a></td><td style="text-align:left"><code>AuthenticationType.NO_AUTHENTICATION</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/4e13a04147314e8e9e54321f25d93fdc.html" target="_blank" rel="noopener noreferrer"><code>BasicAuthentication</code></a></td><td style="text-align:left"><code>AuthenticationType.BASIC_AUTHENTICATION</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/73194cc419894433994c5f0444b4c6a1.html" target="_blank" rel="noopener noreferrer"><code>PrincipalPropogation</code></a></td><td style="text-align:left"><code>AuthenticationType.PRINCIPAL_PROPAGATION</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/4e13a04147314e8e9e54321f25d93fdc.html" target="_blank" rel="noopener noreferrer"><code>ClientCertificateAuthentication</code></a></td><td style="text-align:left"><code>AuthenticationType.CLIENT_CERTIFICATE_AUTHENTICATION</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/b865ed651e414196b39f8922db2122c7/Cloud/en-US/e022a5eebaec4dbbabef7f5d60e13dd4.html?q=AppToAppSSO" target="_blank" rel="noopener noreferrer"><code>AppToAppSSO</code></a></td><td style="text-align:left"><code>AuthenticationType.APP_TO_APP_SSO</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/4e1d742a3d45472d83b411e141729795.html" target="_blank" rel="noopener noreferrer"><code>OAuth2ClientCredentials</code></a></td><td style="text-align:left"><code>AuthenticationType.OAUTH2_CLIENT_CREDENTIALS</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/c69ea6aacd714ad2ae8ceb5fc3ceea56.html" target="_blank" rel="noopener noreferrer"><code>OAuth2SAMLBearerAssertion</code></a></td><td style="text-align:left"><code>AuthenticationType.OAUTH2_SAML_BEARER_ASSERTION</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/e3c333f9de6245fca326993f2397c13a.html" target="_blank" rel="noopener noreferrer"><code>OAuth2UserTokenExchange</code></a></td><td style="text-align:left"><code>AuthenticationType.OAUTH2_USER_TOKEN_EXCHANGE</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/283cd2d1c72147a18c69daf681650f07.html" target="_blank" rel="noopener noreferrer"><code>OAuth2JWTBearer</code></a></td><td style="text-align:left"><code>AuthenticationType.OAUTH2_JWT_BEARER</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/ceb8c4fa61e6443190185696c6d0342d.html" target="_blank" rel="noopener noreferrer"><code>SAPAssertionSSO</code></a></td><td style="text-align:left"><code>AuthenticationType.SAP_ASSERTION_SSO</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/2d168c76daa1406b8567eee447eb1b2f/Cloud/en-US/a9c2c896be574077b56a7b2e2790e86c.html?q=InternalSystemAuthentication" target="_blank" rel="noopener noreferrer"><code>InternalSystemAuthentication</code></a></td><td style="text-align:left"><code>AuthenticationType.INTERNAL_SYSTEM_AUTHENTICATION</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/452357cdd82a4c0ba6095b36c0057526.html" target="_blank" rel="noopener noreferrer"><code>OAuth2Password</code></a></td><td style="text-align:left"><code>AuthenticationType.OAUTH2_PASSWORD</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/d81e1683bd434823abf3ceefc4ff157f.html" target="_blank" rel="noopener noreferrer"><code>SAMLAssertion</code></a></td><td style="text-align:left"><code>AuthenticationType.SAML_ASSERTION</code></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Other Destination Sources</div><div class="admonitionContent_BuS1"><p>In some situations you may want to obtain a destination <strong>not</strong> from the Destination Service, but e.g. from the environment variables.</p><p>In that case, only <code>NoAuthentication</code> and <code>BasicAuthentication</code> are supported by default.
Additionally, <code>OAuth2ClientCredentials</code> as well as <code>OAuth2UserTokenExchange</code> are available through a dedicated API.</p><p>For more details visit the sections on how to <a href="#configure-http-destinations-for-local-development-environment">Configure HTTP Destinations for Local Deployment</a> and <a href="#skip-destination-creation-step-for-certain-authentication-types-on-cloud-foundry">Skip Destination Creation Step for Certain Authentication Types on Cloud Foundry</a>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="integrated-multi-tenancy">Integrated Multi-Tenancy<a href="#integrated-multi-tenancy" class="hash-link" aria-label="Direct link to Integrated Multi-Tenancy" title="Direct link to Integrated Multi-Tenancy">â€‹</a></h3>
<p>By default, the <code>DestinationAccessor</code> is tenant aware.
If a tenant is available, it will be used to access the destination service on behalf of that tenant.
If no destination is found in the tenant-specific destination service, the SAP Cloud SDK will try to get it using the service binding of the application.</p>
<p>This default retrieval strategy can be overridden by passing options to the destination loader as follows:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">DestinationAccessor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">tryGetDestination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">destinationName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>See the section on <a href="#building-destination-options">destination options</a> below.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-samlassertion-authentication-type">Using the SAMLAssertion Authentication Type<a href="#using-the-samlassertion-authentication-type" class="hash-link" aria-label="Direct link to Using the SAMLAssertion Authentication Type" title="Direct link to Using the SAMLAssertion Authentication Type">â€‹</a></h3>
<p>Using the <a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/d81e1683bd434823abf3ceefc4ff157f.html" target="_blank" rel="noopener noreferrer"><code>SAMLAssertion</code></a> authentication types requires a different caching strategy for <code>HttpClient</code>s.
This is because upon authentication at the target system, a session cookie is returned, which is stored within the used <code>HttpClient</code> instance.
For subsequent calls, the service then expects authenticated clients to include their session cookie.</p>
<p>By default, the SAP Cloud SDK uses the <code>RequestScopedHttpClientCache</code> to store <code>HttpClient</code> instances for the duration of a specific (incoming) request.
Using this default strategy results into deleting the <code>HttpClient</code> (together with the session cookie) that was used to authorize at the target system, once the initial request has been handled.
To avoid authorizing over and over again, the SAP Cloud SDK offers the <code>TimeScopedHttpClientCache</code>, which keeps existing <code>HttpClient</code>s for a certain period of time.
These instances are then automatically reused for consecutive (incoming) requests, so that the session is retained.</p>
<p>Switching the cache can be done as follows:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// run this code once in a setup step, afterwards HttpClient instances are kept for 5 minutes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">HttpClientAccessor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setHttpClientCache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">TimeScopedHttpClientCache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">TimeUnit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">MINUTES</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Hint</div><div class="admonitionContent_BuS1"><p>The cached <code>HttpClient</code> instances are also isolated based on the tenant and principal.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="supported-proxy-types">Supported Proxy Types<a href="#supported-proxy-types" class="hash-link" aria-label="Direct link to Supported Proxy Types" title="Direct link to Supported Proxy Types">â€‹</a></h2>
<table><thead><tr><th style="text-align:left">Proxy Type</th><th style="text-align:left">Parameter Name</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/42a0e6b966924f2e902090bdf435e1b2.html" target="_blank" rel="noopener noreferrer"><code>Internet</code></a></td><td style="text-align:left"><code>ProxyType.INTERNET</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/42a0e6b966924f2e902090bdf435e1b2.html" target="_blank" rel="noopener noreferrer"><code>OnPremise</code></a></td><td style="text-align:left"><code>ProxyType.ON_PREMISE</code></td></tr><tr><td style="text-align:left"><a href="https://help.sap.com/viewer/product/PRIVATE_LINK/CLOUD/en-US" target="_blank" rel="noopener noreferrer"><code>PrivateLink</code></a>*</td><td style="text-align:left"><code>ProxyType.PRIVATE_LINK</code></td></tr></tbody></table>
<p>* Further reading: <a href="https://blogs.sap.com/2021/10/28/btp-private-linky-swear-with-azure-propagate-your-sap-principels/" target="_blank" rel="noopener noreferrer">SAP BTP Private Link Announcement Blog Post</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="decorating-destinations">Decorating Destinations<a href="#decorating-destinations" class="hash-link" aria-label="Direct link to Decorating Destinations" title="Direct link to Decorating Destinations">â€‹</a></h2>
<p>Depending on the use case, one needs to wrap the accessed destination before issuing a request to a system.
This is to make sure all required destination properties are correctly set before invoking the actual request.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="http-destinations">HTTP Destinations<a href="#http-destinations" class="hash-link" aria-label="Direct link to HTTP Destinations" title="Direct link to HTTP Destinations">â€‹</a></h3>
<p>In case of HTTP connections one needs to wrap the retrieved destination as <code>HttpDestination</code> using <code>asHttp()</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">DestinationAccessor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDestination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my-destination&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">asHttp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>This method ensures that the required destination properties are all set to make the HTTP connection.
With the resulting destination instance depending on the use case one can run HTTP queries for OData or REST.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bapi-destinations">BAPI Destinations<a href="#bapi-destinations" class="hash-link" aria-label="Direct link to BAPI Destinations" title="Direct link to BAPI Destinations">â€‹</a></h3>
<p>Similarly, for BAPI endpoints you need to use <code>asRfc()</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">DestinationAccessor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDestination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my-destination&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">asRfc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connect-to-sap-s4hana-on-premise">Connect To SAP S/4HANA On-Premise<a href="#connect-to-sap-s4hana-on-premise" class="hash-link" aria-label="Direct link to Connect To SAP S/4HANA On-Premise" title="Direct link to Connect To SAP S/4HANA On-Premise">â€‹</a></h3>
<p>If your destination is exposing an SAP S/4HANA On-premise service via a <strong><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/e6c7616abb5710148cfcf3e75d96d596.html" target="_blank" rel="noopener noreferrer">Cloud Connector</a></strong> you need to decorate the destination with <code>DefaultErpHttpDestination</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">HttpDestination</span><span class="token plain"> httpDestination </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">destination</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">asHttp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">decorate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">DefaultErpHttpDestination</span><span class="token operator" style="color:#393A34">::</span><span class="token keyword" style="color:#00009f">new</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<ul>
<li>This ensures the mapping of all SAP S/4HANA properties like <code>sap-client</code> and <code>sap-locale</code> as HTTP request headers.</li>
<li>In case <strong>Principal Propagation</strong> is specified as an authentication type for the destination the SAP Cloud SDK will automatically apply it.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="registering-destinations-at-runtime">Registering Destinations at Runtime<a href="#registering-destinations-at-runtime" class="hash-link" aria-label="Direct link to Registering Destinations at Runtime" title="Direct link to Registering Destinations at Runtime">â€‹</a></h2>
<p>The SAP Cloud SDK offers convenient ways to create a destination at runtime and register it so that it will be available via <code>DestinationAccessor.getDestination()</code>.
This is especially useful when working in a local environment.
Destinations configured in the destination service are not available in a local setting and have to be mocked.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mocking-destinations-for-testing">Mocking Destinations for Testing<a href="#mocking-destinations-for-testing" class="hash-link" aria-label="Direct link to Mocking Destinations for Testing" title="Direct link to Mocking Destinations for Testing">â€‹</a></h3>
<p>The SAP Cloud SDK offers a <code>MockUtil</code> class that is capable of injecting destinations into the <code>DestinationAccessor</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">MockUtil</span><span class="token plain"> mockUtil </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MockUtil</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">MockDestination</span><span class="token plain"> destination </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">MockDestination</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my-destination&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">URI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://localhost:8080&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mockUtil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">mockDestination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">destination</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// This will now return the mocked destination</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">DestinationAccessor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDestination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my-destination&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">asHttp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>This helps with keeping production and test code nicely separated.
There are more overloads of the mocking on the <a href="https://help.sap.com/doc/b579bf8578954412aea2b458e8452201/1.0/en-US/com/sap/cloud/sdk/testutil/MockUtil.html" target="_blank" rel="noopener noreferrer"><code>MockUtil</code> class</a> that you can use.
Refer to <a href="https://developers.sap.com/tutorials/s4sdk-odata-service-cloud-foundry.html#b77d53b0-2d8b-449c-9a9a-9df80ee09a4e" target="_blank" rel="noopener noreferrer">these tutorial steps</a> on how to mock destinations for local development and testing.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-custom-destination-loaders">Using Custom Destination Loaders<a href="#using-custom-destination-loaders" class="hash-link" aria-label="Direct link to Using Custom Destination Loaders" title="Direct link to Using Custom Destination Loaders">â€‹</a></h3>
<p>The above is useful for testing but not suited for productive code.
If you want to register custom destinations in your productive code you can use the following API:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">customHttpDestination </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">DefaultHttpDestination</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://url&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;custom-destination&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">customLoader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">DefaultDestinationLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">registerDestination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customHttpDestination</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">DestinationAccessor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">appendDestinationLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">loader</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// This will now return the custom destination</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">DestinationAccessor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDestination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;custom-destination&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">asHttp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>By default, the <code>DestinationAccessor</code> is using a <code>DestinationLoaderChain</code> that comprises multiple loaders.
These are e.g. a loader to get destinations from the destination service and a loader that reads destinations from environment variables.</p>
<p>The above <code>appendDestinationLoader()</code> will add the provided loader at the end of such a chain.
That means the new loader can operate as a fallback.
Use <code>prependDestinationLoader()</code> to add it at the beginning if you would like it to take precedence.</p>
<p>Lastly use <code>setLoader()</code> to replace all existing loaders.
This is useful if you want to supply a single destination to a piece of test code.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="provide-headers-for-destinations">Provide Headers for Destinations<a href="#provide-headers-for-destinations" class="hash-link" aria-label="Direct link to Provide Headers for Destinations" title="Direct link to Provide Headers for Destinations">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How It Works<a href="#how-it-works" class="hash-link" aria-label="Direct link to How It Works" title="Direct link to How It Works">â€‹</a></h3>
<p>You can add headers that are sent for any request over destinations.
You can implement custom logic that defines which headers are sent under which circumstances.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Example Use-case</div><div class="admonitionContent_BuS1"><p>Let&#x27;s imagine, you want to send an API token via a request header with any calls made over any destination in your whole application.</p></div></div>
<p>The SAP Cloud SDK offers the interface <code>DestinationHeaderProvider</code> which defines the method <code>List&lt;Header&gt; getHeaders(DestinationRequestContext)</code>.
At runtime, while preparing an outbound request, the SAP Cloud SDK will use all implementations of that interface which have been registered via the Java ServiceLoader mechanism (see below).
For each registered implementation it invokes the method <code>getHeaders(DestinationRequestContext)</code> and appends the returned headers to the currently prepared request.</p>
<p>You can also add headers to a specific destination using properties so they will be always included when calling the target system.
See the <a href="#add-headers-via-destination-properties">relevant</a> section below.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="implement-own-header-provider">Implement Own Header Provider<a href="#implement-own-header-provider" class="hash-link" aria-label="Direct link to Implement Own Header Provider" title="Direct link to Implement Own Header Provider">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="implement-the-interface-destinationheaderprovider">Implement the Interface <code>DestinationHeaderProvider</code><a href="#implement-the-interface-destinationheaderprovider" class="hash-link" aria-label="Direct link to implement-the-interface-destinationheaderprovider" title="Direct link to implement-the-interface-destinationheaderprovider">â€‹</a></h4>
<p>To implement your custom destination header provider, you need to implement the interface <code>DestinationHeaderProvider</code>.
The method <code>getHeaders</code> provides access to the request specific context.
The method argument of type <code>DestinationRequestContext</code> lets you access the general properties over which the currently prepared request will be issued.
Depending on your logic to determine headers, you can read the following data types:</p>
<ul>
<li><code>DestinationProperties getDestination()</code> (e.g. the general destination name).</li>
<li><code>URI getRequestUri()</code> (e.g. the request specific query parameters)</li>
</ul>
<p>Here is one simple example implementation which returns the same header for each request:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Nonnull</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Header</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getHeaders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@Nonnull</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">DestinationRequestContext</span><span class="token plain"> requestContext </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Header</span><span class="token plain"> header </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Header</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;API-Token&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">obtainApiToken</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">Collections</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">singletonList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">header</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="make-interface-implementation-accessible">Make Interface Implementation Accessible<a href="#make-interface-implementation-accessible" class="hash-link" aria-label="Direct link to Make Interface Implementation Accessible" title="Direct link to Make Interface Implementation Accessible">â€‹</a></h4>
<p>The SAP Cloud SDK uses the <a href="https://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html" target="_blank" rel="noopener noreferrer">Service Loader</a> mechanism of Java to look up the <code>DestinationHeaderProvider</code> implementations at runtime.
To let your custom implementation be found, you need to provide a configuration file as resource in the folder <code>META-INF/services</code>.
Name this resource file as the interface <code>com.sap.cloud.sdk.cloudplatform.connectivity.DestinationHeaderProvider</code> and mention the fully-qualified class name of your custom implementation.
You can refer to several implementations by putting their fully qualified class names on separate lines.</p>
<p>Place the new folder + file in your resources folder.
In a Maven project the resource folder is typically <code>src/main/resources/</code>.
For example, if your custom implementation is named <code>ApiTokenHeaderProvider</code> in the package <code>com.example</code>, the configuration should be as follows:</p>
<ul>
<li>File path &amp; name:<!-- -->
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">src/main/resources/META-INF/services/com.sap.cloud.sdk.cloudplatform.connectivity.DestinationHeaderProvider</span><br></span></code></pre></div></div>
</li>
<li>File content:<!-- -->
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">com.example.ApiTokenHeaderProvider</span><br></span></code></pre></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-headers-via-destination-properties">Add Headers via Destination Properties<a href="#add-headers-via-destination-properties" class="hash-link" aria-label="Direct link to Add Headers via Destination Properties" title="Direct link to Add Headers via Destination Properties">â€‹</a></h3>
<p>Here is one example implementation which adds the (&quot;key1&quot;, &quot;value1&quot;) header to every call to the destination:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">destination </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">DefaultHttpDestination</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">baseUrl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;URL.headers.key1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>To include headers into every call to a target system you can define them as properties on the destination.
It can be a destination object that you defined in the Cloud Foundry Cockpit, or one you built in code via a destination builder.
For that, call the <code>.property()</code> method on the destination.
It expects a key-value pair with a key formatted as <code>URL.headers.&lt;key&gt;</code> and an arbitrary value string.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="provide-query-parameters-for-destinations">Provide Query Parameters for Destinations<a href="#provide-query-parameters-for-destinations" class="hash-link" aria-label="Direct link to Provide Query Parameters for Destinations" title="Direct link to Provide Query Parameters for Destinations">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works-1">How It Works<a href="#how-it-works-1" class="hash-link" aria-label="Direct link to How It Works" title="Direct link to How It Works">â€‹</a></h3>
<p>You can add query parameters to a specific destination using properties.
They will always be included in the query string when calling the target system.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-query-parameters-via-destination-properties">Add Query Parameters via Destination Properties<a href="#add-query-parameters-via-destination-properties" class="hash-link" aria-label="Direct link to Add Query Parameters via Destination Properties" title="Direct link to Add Query Parameters via Destination Properties">â€‹</a></h3>
<p>Here is one simple example implementation which adds &quot;key1=value1&quot; to the query string when calling the destination:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">destination </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">DefaultHttpDestination</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">baseUrl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;URL.queries.key1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>To include query parameters in the query string when calling to a target system you can define them as properties on the destination.
For that, call the <code>.property()</code> method on the destination.
It expects a key-value pair with a key formatted as <code>URL.headers.&lt;key&gt;</code> and an arbitrary value string.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="retrieving-destinations">Retrieving Destinations<a href="#retrieving-destinations" class="hash-link" aria-label="Direct link to Retrieving Destinations" title="Direct link to Retrieving Destinations">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-all-destinations-from-the-destination-service-on-cloud-foundry">Get All Destinations From the Destination Service on Cloud Foundry<a href="#get-all-destinations-from-the-destination-service-on-cloud-foundry" class="hash-link" aria-label="Direct link to Get All Destinations From the Destination Service on Cloud Foundry" title="Direct link to Get All Destinations From the Destination Service on Cloud Foundry">â€‹</a></h3>
<p>To fetch all destinations from the Destination Service, you need to make a call to <code>tryGetAllDestinations</code>.
The method queries the <a href="https://api.sap.com/api/SAP_CP_CF_Connectivity_Destination/overview" target="_blank" rel="noopener noreferrer">Destination Service API</a> and retrieves all the destinations available at the service instance and sub-account level.
In case there is a destination available on both the levels with the same name, then this method prioritizes the destination at the service instance level.</p>
<p>Below is the sample call to <code>tryGetAllDestinations</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Try</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Iterable</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">ScpCfDestination</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> destinations </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> destinationLoader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">tryGetAllDestinations</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>In the above call <code>destinationLoader</code> needs to be an instance of <code>ScpCfDestinationLoader</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-timeout-durations-when-querying-the-destination-service-on-cloud-foundry">Configuring Timeout Durations When Querying the Destination Service on Cloud Foundry<a href="#configuring-timeout-durations-when-querying-the-destination-service-on-cloud-foundry" class="hash-link" aria-label="Direct link to Configuring Timeout Durations When Querying the Destination Service on Cloud Foundry" title="Direct link to Configuring Timeout Durations When Querying the Destination Service on Cloud Foundry">â€‹</a></h4>
<p>By default, the <a href="/cloud-sdk/docs/java/features/resilience#resilience-capabilities"><code>TimeLimiter</code> resilience pattern</a> aborts requests to the Destination Service on Cloud Foundry after 6 seconds.
If your app requires more time when fetching destinations, you may create your own <code>ScpCfDestinationLoader</code> instance by:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Allow requests to take up to 10 seconds instead of just 6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">DestinationLoader</span><span class="token plain"> destinationLoader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">ScpCfDestinationLoader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withTimeLimiterConfiguration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ResilienceConfiguration</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">TimeLimiterConfiguration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Duration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>To disable the timeout entirely, use <code>TimeLimiterConfiguration.disabled()</code>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Hint</div><div class="admonitionContent_BuS1"><p>You may register your <code>destinationLoader</code> within the <code>DestinationAccessor</code> by:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">DestinationAccessor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">destinationLoader</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div><p>That way, all future requests to the Destination Service will use the increased timeout duration.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-caching-when-querying-the-destination-service-on-cloud-foundry">Configuring Caching When Querying the Destination Service on Cloud Foundry<a href="#configuring-caching-when-querying-the-destination-service-on-cloud-foundry" class="hash-link" aria-label="Direct link to Configuring Caching When Querying the Destination Service on Cloud Foundry" title="Direct link to Configuring Caching When Querying the Destination Service on Cloud Foundry">â€‹</a></h4>
<p>The SAP Cloud SDK, by default, caches up to 1,000 destinations retrieved from the Destination Service on Cloud Foundry for a maximum of 5 minutes.</p>
<p>This behavior has two implications:</p>
<ol>
<li>Application performance can be (drastically) improved by serving already known destinations from the cache instead of querying the Destination Service over and over again.</li>
<li>Changes to destinations, for example, via the SAP BTP Cockpit, may take a while until they are reflected in the application.</li>
</ol>
<p>Depending on the use-case, the default cache configuration might be suboptimal.
Therefore, the SAP Cloud SDK offers an API for adjusting the caching behavior at application runtime.</p>
<p>The examaple below changes the cache to store more entries for a longer period of time.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">ScpCfDestinationLoader</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setSizeLimit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10_000L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ScpCfDestinationLoader</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setExpiration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Duration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofHours</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">CacheExpirationStrategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">WHEN_CREATED</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>In rare circumstances, it might make sense to disable either specific aspects of the caching behavior, or even the entire cache.
For those scenarios, following APIs are available:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">ScpCfDestinationLoader</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">disableSizeLimit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// cache can store an infinite amount of entries</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ScpCfDestinationLoader</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">disableExpiration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// cache entries never expire</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ScpCfDestinationLoader</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">disable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// don&#x27;t cache destinations</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Shared Cache Size</div><div class="admonitionContent_BuS1"><p>The size limit is applied across all tenants and principals.
That means that one tenant (with a lot of principals) might fill up the entire cache.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Example</summary><div><div class="collapsibleContent_i85q"><p>If a thousand principals of the same tenant all query a single destination, the cache will be entirely filled up with destinations belonging to the same tenant.
As a consequence, existing cache entries - also those of different tenants - must be removed (<em>evicted</em>) from the cache to make space for the new entries.</p></div></div></details></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Hint</div><div class="admonitionContent_BuS1"><p>Changing the cache configuration at runtime will lead to a recreation of the underlying cache.
Hereby, <strong>all existing</strong> cache entries will be lost.</p><p>Therefore, we recommend adjusting the cache once at application startup.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="building-destination-options">Building Destination Options<a href="#building-destination-options" class="hash-link" aria-label="Direct link to Building Destination Options" title="Direct link to Building Destination Options">â€‹</a></h4>
<p>You need to build a <code>DestinationOptions</code> object and pass it as a parameter.
It defines how Destinations Service is queried.
In a simple application without provider/subscriber setup, your initial configuration is as simple as:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">DestinationOptions</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">DestinationOptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="retrieval-strategy-options">Retrieval Strategy Options<a href="#retrieval-strategy-options" class="hash-link" aria-label="Direct link to Retrieval Strategy Options" title="Direct link to Retrieval Strategy Options">â€‹</a></h5>
<p>For a provider/subscriber setup, a <a href="https://help.sap.com/doc/b579bf8578954412aea2b458e8452201/1.0/en-US/com/sap/cloud/sdk/cloudplatform/connectivity/ScpCfDestinationRetrievalStrategy.html" target="_blank" rel="noopener noreferrer">retrieval strategy</a> must be chosen according to your particular use case from:</p>
<ul>
<li><code>CURRENT_TENANT</code> (default, same behavior as the deprecated <code>ALWAYS_SUBSCRIBER</code>)</li>
<li><code>ALWAYS_PROVIDER</code></li>
<li><code>ONLY_SUBSCRIBER</code></li>
<li><code>CURRENT_TENANT_THEN_PROVIDER</code></li>
</ul>
<p>Here is an example for <code>CURRENT_TENANT_THEN_PROVIDER</code> option:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">DestinationOptions</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">DestinationOptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">augmentBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">ScpCfDestinationOptionsAugmenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">augmenter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">retrievalStrategy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ScpCfDestinationRetrievalStrategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">CURRENT_TENANT_THEN_PROVIDER</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="token-exchange-options">Token Exchange Options<a href="#token-exchange-options" class="hash-link" aria-label="Direct link to Token Exchange Options" title="Direct link to Token Exchange Options">â€‹</a></h5>
<p>Besides the retrieval strategy, the SAP Cloud SDK also offers a <a href="https://help.sap.com/doc/69f4a2d15d9b404fac06e968f0633d98/1.0/en-US/com/sap/cloud/sdk/cloudplatform/connectivity/ScpCfDestinationTokenExchangeStrategy.html" target="_blank" rel="noopener noreferrer">token exchange strategy</a> that lets you change the behavior when authentication requires a user token exchange.
There are three different options available:</p>
<ul>
<li><code>LOOKUP_THEN_EXCHANGE</code> (default)</li>
<li><code>LOOKUP_ONLY</code></li>
<li><code>EXCHANGE_ONLY</code></li>
</ul>
<p>By default, the SAP Cloud SDK first looks up the destination on the destination service and evaluates the authentication type.
If the authentication type requires a user token exchange the SAP Cloud SDK immediately performs that exchange.</p>
<p>If you know that the destination you are about to retrieve requires a user token exchange you can improve performance by skipping the initial &quot;look up&quot; request like so:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">DestinationOptions</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">DestinationOptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">augmentBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">ScpCfDestinationOptionsAugmenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">augmenter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">tokenExchangeStrategy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ScpCfDestinationTokenExchangeStrategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">EXCHANGE_ONLY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Try</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Destination</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> destination </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">DestinationAccessor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">tryGetDestination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;MyDestination&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-http-destinations-for-local-development-environment">Configure HTTP Destinations for Local Development Environment<a href="#configure-http-destinations-for-local-development-environment" class="hash-link" aria-label="Direct link to Configure HTTP Destinations for Local Development Environment" title="Direct link to Configure HTTP Destinations for Local Development Environment">â€‹</a></h2>
<p>When testing your app on you local development machine instead of SAP BTP, you require some configuration steps to make the destination retrieval work.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Relevant only for HTTP destinations</div><div class="admonitionContent_BuS1"><p>Check our <a href="/cloud-sdk/docs/java/v3/features/bapi-and-rfc/overview">BAPI and RFC documentation</a> if you want to configure an RFC destination for local development.</p></div></div>
<p>To better understand the configuration steps, we will shortly outline how destination retrieval works when your app runs on SAP BTP.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="background-destination-retrieval-on-sap-business-technology-platform">Background: Destination Retrieval on SAP Business Technology Platform<a href="#background-destination-retrieval-on-sap-business-technology-platform" class="hash-link" aria-label="Direct link to Background: Destination Retrieval on SAP Business Technology Platform" title="Direct link to Background: Destination Retrieval on SAP Business Technology Platform">â€‹</a></h3>
<p>By default, the SAP Cloud SDK uses a set of destination loaders in the following order when searching for a destination via the <code>DestinationAccessor</code> API</p>
<ol>
<li>Environment variable</li>
<li>SAP BTP Destination service</li>
</ol>
<p>Example API call looks like this:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">DestinationAccessor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">tryGetDestination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;MyDestination&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Details and example values of a destination retrieval</summary><div><div class="collapsibleContent_i85q"><ol>
<li>
<p>Lookup in the environment variable</p>
<p>The first destination loader attempts to find the requested destination in the environment variable <code>destinations</code>.
This works the same in the local development environment.
For example:</p>
</li>
</ol><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;HTTP&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MyDestination&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;proxyType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Internet&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This destination rocks!&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;authentication&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BasicAuthentication&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://URL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;user&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;USER&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;password&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PASSWORD&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div><p>You can add as many destinations as you need this way.</p><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Authorization Token Forwarding</div><div class="admonitionContent_BuS1"><p>By adding <code>&quot;forwardAuthToken&quot;: &quot;true&quot;</code> to your destination, you will forward the value of the <code>Authorization</code> header from the current request directly to the target system.</p></div></div><ol>
<li>
<p>Lookup via SAP BTP Destination service</p>
<p>If the previous lookup was not successful, the next destination loader examines the environment variable <code>VCAP_SERVICES</code> to see if the SAP BTP Destination service is bound.
The SAP Cloud SDK tries to fetch the destination from the SAP BTP Destination service using the given destination name.</p>
</li>
</ol><p><strong><em>Reaching On Premise Systems via the SAP BTP Connectivity Service</em></strong>
In case the destination is of proxy type <code>OnPremise</code>, the SAP Cloud SDK performs an additional query to the SAP BTP Connectivity service.
Further proxy information and an authorization token are obtained.</p></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="automatically-inject-service-bindings-via-cloud-application-programming-development-kit">Automatically Inject Service bindings via Cloud Application Programming Development Kit<a href="#automatically-inject-service-bindings-via-cloud-application-programming-development-kit" class="hash-link" aria-label="Direct link to Automatically Inject Service bindings via Cloud Application Programming Development Kit" title="Direct link to Automatically Inject Service bindings via Cloud Application Programming Development Kit">â€‹</a></h3>
<p>If you already have a SAP BTP account with all the service binding and want to leverage them in you local environment - try <a href="https://cap.cloud.sap/docs/advanced/hybrid-testing#run-with-service-bindings" target="_blank" rel="noopener noreferrer">CAP Development Kit</a>.
The SAP Cloud SDK will do the rest of the destination retrieval job for you as described above.
You will need <code>Node.js</code> to <a href="https://cap.cloud.sap/docs/advanced/hybrid-testing#run-cap-java-apps-with-service-bindings" target="_blank" rel="noopener noreferrer">install CAP Development Kit</a> by running:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm i -g @sap/cds-dk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Now, you can start any Java app with service binding injected into your local environment by using <code>cds bind</code> command.
The command will create a <code>VCAP_SERVICES</code> variable containing service keys from a Cloud Foundry space or Kubernetes cluster without storing credentials on a disk.
Start your Java application similarly to the code snippet below:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cds bind --exec mvn spring-boot:run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>For more details look at the <a href="https://cap.cloud.sap/docs/advanced/hybrid-testing#run-with-service-bindings" target="_blank" rel="noopener noreferrer">official CAP documentation</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-destinations-manually">Configure Destinations Manually<a href="#configure-destinations-manually" class="hash-link" aria-label="Direct link to Configure Destinations Manually" title="Direct link to Configure Destinations Manually">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="destinations-with-proxy-type-internet">Destinations With Proxy Type <code>Internet</code><a href="#destinations-with-proxy-type-internet" class="hash-link" aria-label="Direct link to destinations-with-proxy-type-internet" title="Direct link to destinations-with-proxy-type-internet">â€‹</a></h4>
<p>Create the destination configuration and pass it via the environment variable <code>destinations</code>.
Check the example below:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;HTTP&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MyDestination&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;proxyType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Internet&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This destination rocks!&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;authentication&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BasicAuthentication&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://URL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;user&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;USER&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;password&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PASSWORD&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>You can add as many destinations as you need by adding them to the <code>JSON</code> array.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Authorization Token Forwarding</div><div class="admonitionContent_BuS1"><p>By adding <code>&quot;forwardAuthToken&quot;: &quot;true&quot;</code> to your destination, you will forward the value of the <code>Authorization</code> header from the current request directly to the target system.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="destinations-with-proxy-type-onpremise">Destinations With Proxy Type <code>OnPremise</code><a href="#destinations-with-proxy-type-onpremise" class="hash-link" aria-label="Direct link to destinations-with-proxy-type-onpremise" title="Direct link to destinations-with-proxy-type-onpremise">â€‹</a></h4>
<p>For this destination types we need to access the <strong>Destination</strong> and <strong>Connectivity</strong> services on SAP BTP.
To achieve that you have to bind them and inject via <a href="#automatically-inject-service-bindings-via-cap-development-kit">CAP Development Kit</a>.
Or manually provide your <a href="#create-and-provide-vcap_services-variable"><code>VCAP_SERVIES</code></a> variable.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>When your Client and On-Premise Service are in the Same Network</div><div class="admonitionContent_BuS1"><p>If your local development environment and an On-Premise service are in the same network, you can use a simple HTTP destination by providing it via <code>destinations</code> environment variable instead of relying on the SAP BTP Connectivity service.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-and-provide-vcap_services-variable">Create and Provide <code>VCAP_SERVICES</code> Variable<a href="#create-and-provide-vcap_services-variable" class="hash-link" aria-label="Direct link to create-and-provide-vcap_services-variable" title="Direct link to create-and-provide-vcap_services-variable">â€‹</a></h4>
<p>How to create the <code>VCAP_SERVICES</code> representation depends on whether the Cloud Application Programming (CAP) Model is used.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">CAP is used</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">CAP is not used</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Create the <code>VCAP_SERVIES</code> environment variable on the shell or operating system level.
Copy the value of that environment variable from your app which is deployed to SCP.</p></div><div role="tabpanel" class="tabItem_Ymn6"><p>Create the file <code>default-env.json</code> in your project&#x27;s root and supply the <code>VCAP_SERVICES</code> value you copied beforehand so that the file looks similar to the following shortened example:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;VCAP_SERVICES&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;connectivity&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;label&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;connectivity&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;plan&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lite&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-connectivity&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;instance_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-connectivity&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;credentials&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;xsuaa&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;label&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xsuaa&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;plan&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;space&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-xsuaa&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;instance_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-xsuaa&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;credentials&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;destination&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;label&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;destination&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;plan&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lite&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-destination&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;instance_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-destination&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;credentials&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div><p>Furthermore, add the dependency <code>com.sap.cds:cds-integration-cloud-sdk</code> to your POM file:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.sap.cds</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">cds-integration-cloud-sdk</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="reach-on-premise-service-from-the-sap-business-application-studio">Reach On-Premise Service from the SAP Business Application Studio<a href="#reach-on-premise-service-from-the-sap-business-application-studio" class="hash-link" aria-label="Direct link to Reach On-Premise Service from the SAP Business Application Studio" title="Direct link to Reach On-Premise Service from the SAP Business Application Studio">â€‹</a></h4>
<p>If you are developing an application in the <strong>Business Application Studio (BAS)</strong>, and want to reach On-Premise systems, perform the following steps:</p>
<ol>
<li>Make sure your BAS instance is part of the same CF space as your Cloud Connector.</li>
<li>Add properties <code>WebIDEEnabled</code> and <code>HTML5.DynamicDestination</code> to your On-Premise destination with the value <code>true</code>.</li>
<li>In BAS, configure your <code>destinations</code> environment variable as follows:</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;HTTP&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;DESTINATION-NAME&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://&lt;DESTINATION-NAME&gt;.dest&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;ProxyHost&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;localhost&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;ProxyPort&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8887</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>Please refer to <a href="/cloud-sdk/docs/js/guides/bas">the BAS connectivity guide</a> created for the SAP Cloud SDK for JavaScript to get more information and a detailed description of the technical background.
The information there also applies to the SAP Cloud SDK for Java.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="skip-destination-creation-step-for-certain-authentication-types-on-cloud-foundry">Skip Destination Creation Step for Certain Authentication Types on Cloud Foundry<a href="#skip-destination-creation-step-for-certain-authentication-types-on-cloud-foundry" class="hash-link" aria-label="Direct link to Skip Destination Creation Step for Certain Authentication Types on Cloud Foundry" title="Direct link to Skip Destination Creation Step for Certain Authentication Types on Cloud Foundry">â€‹</a></h4>
<p>For certain authentication types i.e. <code>NoAuthentication</code> and <code>OAuth2ClientCredentials</code> there is an API that eliminates the need to manually create a destination in the CF account for connecting to services.</p>
<p>Example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> mapping </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">ScpCfServiceDestinationLoader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">buildClientCredentialsMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;credentials.endpoints.service_rest_url&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;credentials.uaa.clientid&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;credentials.uaa.clientsecret&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;credentials.endpoints.token_url&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>The <code>ScpCfServiceDestinationLoader.buildClientCredentialsMapping</code> method creates a mapping for loading a destination and provides JSON paths for all required destination properties.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">HttpDestination</span><span class="token plain"> destination </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">ScpCfServiceDestinationLoader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDestinationForService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;label&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;serviceBindingName&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">AuthenticationType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OAUTH2_CLIENT_CREDENTIALS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mapping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>For certain services (only SAP BTP Workflow service for now), we provide further convenience that skips the need to provide the <code>mapping</code> explicitly.
Example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">HttpDestination</span><span class="token plain"> destination </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">ScpCfServiceDestinationLoader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDestinationForService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">ScpCfServiceDestinationLoader</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">CfServices</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">WORKFLOW</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;my-workflow&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="enable-access-to-sap-business-technology-platform-connectivity-service">Enable Access to SAP Business Technology Platform Connectivity Service<a href="#enable-access-to-sap-business-technology-platform-connectivity-service" class="hash-link" aria-label="Direct link to Enable Access to SAP Business Technology Platform Connectivity Service" title="Direct link to Enable Access to SAP Business Technology Platform Connectivity Service">â€‹</a></h4>
<p>The SAP BTP connectivity service builds the connection between SAP BTP and the On-premise network.
That is why it has strong built-in restrictions to allow it only to be called from within SCP.
If you call the connectivity service from your local machine, you will encounter a connection timeout.
We&#x27;ll therefore apply port forwarding via SSH to simulate that your localhost plays the cloud app.</p>
<ul>
<li>Deploy your app to the SAP BTP once.</li>
<li>Enable SSH access to your app container with the <code>cf</code> CLI:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cf enable-ssh app-name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cf restart app-name</span><br></span></code></pre></div></div>
<ul>
<li>Inspect the value of the entry <code>connectivity</code> of your <code>VCAP_SERVICES</code> and take note of the values of the fields<!-- -->
<ul>
<li><code>credentials.onpremise_proxy_port</code></li>
<li><code>credentials.onpremise_proxy_host</code></li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>We&#x27;ll refer to these values as <em>proxy-port</em> and <em>proxy-host</em> hereafter.</p></div></div>
<ul>
<li>Create an SSH session to your app container with the following command and let the session opened:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cf ssh app-name -L proxy-port:proxy-host:proxy-port</span><br></span></code></pre></div></div>
<ul>
<li>Replace the value of the field <code>VCAP_SERVICES.connectivity.credentials.onpremise_proxy_host</code> in your <code>default-env.json</code>
with <code>localhost</code>.</li>
</ul>
<div class="theme-admonition theme-admonition-success admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Ready</div><div class="admonitionContent_BuS1"><p>Now your local setup is ready to consume an On-premise HTTP destination.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/SAP/cloud-sdk/edit/main/docs-java_versioned_docs/version-v3/features/connectivity/destinations.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cloud-sdk/docs/java/v3/features/bapi-and-rfc/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">BAPI/RFC</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cloud-sdk/docs/java/v3/features/connectivity/http-client"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">HttpClient</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#accessing-destinations" class="table-of-contents__link toc-highlight">Accessing Destinations</a></li><li><a href="#supported-authentication-flows" class="table-of-contents__link toc-highlight">Supported Authentication Flows</a><ul><li><a href="#integrated-multi-tenancy" class="table-of-contents__link toc-highlight">Integrated Multi-Tenancy</a></li><li><a href="#using-the-samlassertion-authentication-type" class="table-of-contents__link toc-highlight">Using the SAMLAssertion Authentication Type</a></li></ul></li><li><a href="#supported-proxy-types" class="table-of-contents__link toc-highlight">Supported Proxy Types</a></li><li><a href="#decorating-destinations" class="table-of-contents__link toc-highlight">Decorating Destinations</a><ul><li><a href="#http-destinations" class="table-of-contents__link toc-highlight">HTTP Destinations</a></li><li><a href="#bapi-destinations" class="table-of-contents__link toc-highlight">BAPI Destinations</a></li><li><a href="#connect-to-sap-s4hana-on-premise" class="table-of-contents__link toc-highlight">Connect To SAP S/4HANA On-Premise</a></li></ul></li><li><a href="#registering-destinations-at-runtime" class="table-of-contents__link toc-highlight">Registering Destinations at Runtime</a><ul><li><a href="#mocking-destinations-for-testing" class="table-of-contents__link toc-highlight">Mocking Destinations for Testing</a></li><li><a href="#using-custom-destination-loaders" class="table-of-contents__link toc-highlight">Using Custom Destination Loaders</a></li></ul></li><li><a href="#provide-headers-for-destinations" class="table-of-contents__link toc-highlight">Provide Headers for Destinations</a><ul><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How It Works</a></li><li><a href="#implement-own-header-provider" class="table-of-contents__link toc-highlight">Implement Own Header Provider</a></li><li><a href="#add-headers-via-destination-properties" class="table-of-contents__link toc-highlight">Add Headers via Destination Properties</a></li></ul></li><li><a href="#provide-query-parameters-for-destinations" class="table-of-contents__link toc-highlight">Provide Query Parameters for Destinations</a><ul><li><a href="#how-it-works-1" class="table-of-contents__link toc-highlight">How It Works</a></li><li><a href="#add-query-parameters-via-destination-properties" class="table-of-contents__link toc-highlight">Add Query Parameters via Destination Properties</a></li></ul></li><li><a href="#retrieving-destinations" class="table-of-contents__link toc-highlight">Retrieving Destinations</a><ul><li><a href="#get-all-destinations-from-the-destination-service-on-cloud-foundry" class="table-of-contents__link toc-highlight">Get All Destinations From the Destination Service on Cloud Foundry</a></li></ul></li><li><a href="#configure-http-destinations-for-local-development-environment" class="table-of-contents__link toc-highlight">Configure HTTP Destinations for Local Development Environment</a><ul><li><a href="#background-destination-retrieval-on-sap-business-technology-platform" class="table-of-contents__link toc-highlight">Background: Destination Retrieval on SAP Business Technology Platform</a></li><li><a href="#automatically-inject-service-bindings-via-cloud-application-programming-development-kit" class="table-of-contents__link toc-highlight">Automatically Inject Service bindings via Cloud Application Programming Development Kit</a></li><li><a href="#configure-destinations-manually" class="table-of-contents__link toc-highlight">Configure Destinations Manually</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">SAP Cloud SDK for Java</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developers.sap.com/tutorial-navigator.html?tag=products:technology-platform/sap-cloud-sdk/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://central.sonatype.com/search?q=g:com.sap.cloud.sdk*&amp;smo=true" target="_blank" rel="noopener noreferrer" class="footer__link-item">Maven<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/java/support">Support</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">SAP Cloud SDK for JavaScript</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/js/tutorials/getting-started/introduction">Tutorials</a></li><li class="footer__item"><a href="https://www.npmjs.com/search?q=%40sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">npm<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/SAP/cloud-sdk-js" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/SAP-samples/cloud-sdk-js" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sample repository<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/js/support">Support</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Additional Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://community.sap.com/topics/cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">SAP Cloud SDK Community Page<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://answers.sap.com/tags/73555000100800000895" target="_blank" rel="noopener noreferrer" class="footer__link-item">SAP Cloud SDK on SAP Answers<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://help.sap.com/viewer/product/SAP_CLOUD_SDK/1.0/en-US?task=discover_task" target="_blank" rel="noopener noreferrer" class="footer__link-item">SAP Cloud SDK on SAP Help<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://sap.github.io/ai-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">SAP Cloud SDK for AI<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 SAP SE or an SAP affiliate company. All rights reserved.</div></div></div></footer></div>
</body>
</html>