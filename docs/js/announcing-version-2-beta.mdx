import imports1 from '@site/static/img/imports-in-v1.png';
import imports2 from '@site/static/img/imports-in-v2.png';
import ecma2019 from '@site/static/img/ecma2019.png';
import es5 from '@site/static/img/es5.png';
import temporal from '@site/static/img/temporal.png';

# Announcing Version 2 Beta

## What Is Included in the Beta?

We announced four noteworthy changes for our upcoming version increase:
- Split packages and export only the public interface
- Increase compilation target to ECMAScript 2019
- Remove deprecated functionality
- ~~Replace `moment.js` with a flexible middleware approach for deserialization~~ (Postponed)

We think made good progress and would love you to try the beta.
Let's take a look what was achieved so far.

### Split Packages and Export Only the Public Interface

There is no more `@sap-cloud-sdk/core` package anymore.
Instead, there are the following packages:
- `@sap-cloud-sdk/connectivity` (e.g. `getDestination()`)
- `@sap-cloud-sdk/http-client` (e.g. `executeHttpRequest()`)
- `@sap-cloud-sdk/openapi`, `@sap-cloud-sdk/odata-v2` and `@sap-cloud-sdk/odata-v4` (e.g. filter functions, request builder)

Internal functions are not exported in our v2 packages to make it easier to find the right function for your use case.
We expose internals via a special import path, but offer no stability guarantee for this internal interface.

This means you will see this:
<img style={{ maxWidth: '75%', height:'auto'}} src={imports2} alt="autocomplete for import from core" />

rather than this:
<img style={{ maxWidth:'75%', height:'auto'}} src={imports1} alt="autocomplete for import from odata-v2" />

### Increase Compilation Target to ECMAScript 2019

This will only affect you if you run your application in a legacy environment.
It makes the compiled JavaScript code a little cleaner, as in this example.

Old:
<img style={{ maxWidth:'75%', height:'auto'}} src={es5} alt="file-generator in ES5" />

New:
<img style={{ maxWidth:'75%', height:'auto'}} src={ecma2019} alt="file-generator in ECMAScript 2019" />

The differences are minor, but it saves five lines of code in this file alone.

### Remove Deprecated Functionality

We hope you replaced deprecated functionality already.
If not, our upgrade guide lists all removed methods and their replacement.
In total, we removed a bit more than 100 deprecated methods.

### Middleware Approach for Deserialization (Postponed)

There is good progress toward a flexible middleware approach.
Sadly, it is not ready for the beta release yet.
To give you a sneak peek, here is an example for a middleware to serialize `Edm.DateTime`, `Edm.DateTimeOffset` and `Edm.Time` to `temporal`:

<img style={{ maxWidth:'75%', height:'auto'}} src={temporal} alt="example temporal serializer" />

## How Can I Use It?

We publish the beta version on `npm`.
You can install it by adding `@beta` after the package name (e.g. `npm install @sap-cloud-sdk/generator@beta`).

:::caution

If you use an OData or OpenAPI client, make sure it was generated with the same version as your other SAP Cloud SDK dependencies.
We do not provide pregenerated clients for beta versions.

:::

Check the [upgrade guide](./guides/upgrade-to-version-2.mdx) for detailed instructions how to upgrade.
