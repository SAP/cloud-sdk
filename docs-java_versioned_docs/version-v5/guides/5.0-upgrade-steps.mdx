---
id: 5.0-upgrade-steps
title: Steps to update to Version 5 of the SAP Cloud SDK
hide_title: false
hide_table_of_contents: false
sidebar_label: Update Steps to Version 5
description: Update your application to use version 5 of the SAP Cloud SDK
keywords:
  - sap
  - cloud
  - sdk
  - cloud native
  - cloud sdk
  - sap cloud sdk
  - 5
  - Update
---

This document provides a step-by-step guide on how you can leverage the new major version of the SAP Cloud SDK.

## 0. Before you Upgrade

Before you increase the SAP Cloud SDK version to 5 it can be beneficial to migrate any usage of deprecated API first. Follow the deprecation note of the Javadoc in case you are still using deprecated API from the SAP Cloud SDK. All deprecated API is removed With version 5.

## 1. Change Version of Your `sdk-bom` or `sdk-modules-bom` Bill of Materials

The first step is to change the version of the SAP Cloud SDK dependency in your `pom.xml` file.
Depending on your project setup you might use one of our BOMs or the individual modules.

To find our BOMs, search for the following entries in your maven `dependencyManagement` section: `com.sap.cloud.sdk:sdk-bom` and `com.sap.cloud.sdk:sdk-modules-bom`.
Update them directly to version `5.0.0` or the [latest version](https://central.sonatype.com/artifact/com.sap.cloud.sdk/sdk-bom).

If you are using `com.sap.cloud.sdk:sdk-sjb-bom` you will either need to replace it with one of the BOMs mentioned above, or stay on the latest version 4 of the SAP Cloud SDK.

## 2. Adapt Dependencies as Needed

The lists below contains all modules that have been renamed or removed from the SDK.
Therefore, you should also rename respectively remove those from your project setup.

<details>
  <summary>Full list of renamed modules</summary>

- Module `com.sap.cloud.sdk.frameworks:resilience4j` has been moved to `com.sap.cloud.sdk.cloudplatform:resilience4j`
- Module `com.sap.cloud.sdk.frameworks:apache-httpclient5` has been moved to `com.sap.cloud.sdk.cloudplatform:connectivity-apache-httpclient5`

</details>

<details>
    <summary>Full list of removed modules</summary>

- Bill of Materials
  - `com.sap.cloud.sdk:sdk-sjb-bom
- Archetypes
  - `com.sap.cloud.sdk.archetypes:scp-cf-tomee`
  - `com.sap.cloud.sdk.archetypes:scp-neo-javaee7`
- Neo related modules
  - `com.sap.cloud.sdk.cloudplatform:auditlog-scp-neo`
  - `com.sap.cloud.sdk.cloudplatform:cloudplatform-connectivity-scp-neo`
  - `com.sap.cloud.sdk.cloudplatform:cloudplatform-core-scp-neo`
  - `com.sap.cloud.sdk.cloudplatform:concurrency-scp-neo`
  - `com.sap.cloud.sdk.cloudplatform:scp-neo`
  - `com.sap.cloud.sdk.cloudplatform:security-scp-neo`
  - `com.sap.cloud.sdk.cloudplatform:tenant-scp-neo`
  - `com.sap.cloud.sdk.plugins:scp-neo-maven-plugin`
- Generator CLIs
  - `com.sap.cloud.sdk.datamodel:odata-generator-cli`
  - `com.sap.cloud.sdk.datamodel:odata-v4-generator-cli`
  - `com.sap.cloud.sdk.datamodel:openapi-generator-cli`
- Pregenerated Clients
  - `com.sap.cloud.sdk.s4hana:s4hana-all`
  - `com.sap.cloud.sdk.s4hana:s4hana-api-odata`
  - `com.sap.cloud.sdk.s4hana:s4hana-api-odata-onpremise`
  - `com.sap.cloud.sdk.s4hana:s4hana-api-odata-v4`
  - `com.sap.cloud.sdk.s4hana:s4hana-api-odata-v4-onpremise`
- Services
  - `com.sap.cloud.sdk.services:blockchain-business-services-sdk`
  - `com.sap.cloud.sdk.services:blockchain-business-services-visibility`
  - `com.sap.cloud.sdk.services:blockchain-client-fabric`
  - `com.sap.cloud.sdk.services:blockchain-client-multichain`
  - `com.sap.cloud.sdk.services:btp-business-rules`
  - `com.sap.cloud.sdk.services:btp-shared-ledger-client`
  - `com.sap.cloud.sdk.services:mdi-client-convenience`
  - `com.sap.cloud.sdk.services:mdi-client-core`
  - `com.sap.cloud.sdk.services:mdi-client-model`
  - `com.sap.cloud.sdk.services:mdi-client-parent`
  - `com.sap.cloud.sdk.services:mdi-generator`
  - `com.sap.cloud.sdk.services:mdi-model-core`
  - `com.sap.cloud.sdk.services:mdo-distribution-client-api`
  - `com.sap.cloud.sdk.services:mdo-distribution-client-integration-test`
  - `com.sap.cloud.sdk.services:mdo-distribution-client-odata`
  - `com.sap.cloud.sdk.services:scp-blockchain`
  - `com.sap.cloud.sdk.services:scp-business-logging-all`
  - `com.sap.cloud.sdk.services:scp-business-logging-core`
  - `com.sap.cloud.sdk.services:scp-business-logging-odata`
  - `com.sap.cloud.sdk.services:scp-business-logging-rest`
  - `com.sap.cloud.sdk.services:scp-workflow-cf`
- SAP Internal (?????)
  - `com.sap.cloud.sdk.cloudplatform:cloudplatform-connectivity-dwc`
  - `com.sap.cloud.sdk.cloudplatform:cloudplatform-core-dwc`
  - `com.sap.cloud.sdk.cloudplatform:cloudplatform-core-dwc-cf`
  - `com.sap.cloud.sdk.cloudplatform:sap-passport`
  - `com.sap.cloud.sdk.cloudplatform:security-dwc`
  - `com.sap.cloud.sdk.cloudplatform:tenant-dwc`
- Others
  - `com.sap.cloud.sdk.cloudplatform:auditlog`
  - `com.sap.cloud.sdk.cloudplatform:auditlog-scp-cf`
  - `com.sap.cloud.sdk.cloudplatform:cloudplatform-connectivity-scp`
  - `com.sap.cloud.sdk.cloudplatform:cloudplatform-core-scp-cf`
  - `com.sap.cloud.sdk.cloudplatform:security-scp-cf`
  - `com.sap.cloud.sdk.cloudplatform:security-servlet`
  - `com.sap.cloud.sdk.cloudplatform:tenant-scp-cf`

</details>

If you are using our BOMs to provide the module versions, a fast way to do identify those is to run any `mvn` command.
This will now lead to error messages like this:

> 'dependencies.dependency.version' for com.sap.cloud.sdk.cloudplatform:auditlog-scp-cf:jar is missing

This helps you to identify which modules you need to remove or replace in your project setup.

## 3. Introduce Missing Modules Based on Package Names

Once the build doesn't complain about missing dependency versions anymore, you can start to fix the compilation errors.
For this, the following table provides a helpful overview, over which packages can be found in which module.

:::warning TODO

check for further packages and remove lines for deprecated modules

:::

| Package                                             | Module                                                                                   |
| --------------------------------------------------- | ---------------------------------------------------------------------------------------- |
| `com.sap.cloud.sdk.s4hana.serialization`            | `com.sap.cloud.sdk.s4hana:s4hana-core` (TODO: deprecated?)                               |
| `com.sap.cloud.sdk.s4hana.connectivity.exception`   | `com.sap.cloud.sdk.s4hana:s4hana-connectivity` (TODO: deprecated?)                       |
| `com.sap.cloud.sdk.s4hana.connectivity.rfc`         | `com.sap.cloud.sdk.s4hana:rfc` (TODO: deprecated?)                                       |
| `com.sap.cloud.sdk.s4hana.datamodel.odata.services` | See the section below on [generating your own OData VDM](#4-generate-your-own-odata-vdm) |
| `com.sap.cloud.sdk.cloudplatform.servlet`           | `com.sap.cloud.sdk.cloudplatform:servlet` dependency                                     |

## 4. Generate Your Own OData VDM

The SAP Cloud SDK no longer provides a pre-generated OData VDM. We made this decision to reduce the maintenance effort and to allow you to generate your own VDM with the exact version of the OData service you are using. That way there is no need to wait for the next SDK release to get the latest changes of the OData service.

To generate your own OData VDM, you can use the [OData Generator Maven Plugin](../features/odata/vdm-generator) directly.
You can use the following configuration to generate a VDM that is compatible with the OData VDM the SDK provided in version 4:

```xml
<inputDirectory>${project.basedir}/src/main/resources/odata/edmx</inputDirectory>
<outputDirectory>${project.build.directory}/vdm</outputDirectory>
<serviceNameMappingFile>${project.basedir}/src/main/resources/odata/serviceNameMappings.properties</serviceNameMappingFile>
<deleteOutputDirectory>true</deleteOutputDirectory>
<packageName>com.sap.cloud.sdk.s4hana.datamodel.odata</packageName>
<compileScope>COMPILE</compileScope>
```

The file specified under _serviceNameMappingFile_ will be created and populated, if it doesn't exist yet.
If you want to create a VDM that is compatible with the OData VDM the SDK provided in version 4, you can use this [_serviceNameMappings.properties_](../../../static/resources/v4-serviceNameMappings.properties).

## 5. Handle OData VDM Instantiation

Depending on your project setup, you might have relied on the `@Inject` annotation in your OData VDM services.
As the Cloud SDK doesn't provide the pre-generated VDM anymore, you will need to instantiate your own services instead.
For that you can either use your own dependency injection framework, or instantiate the services manually.

The manual approach would look something like this:

```diff
- @Inject
- private BusinessPartnerService businessPartnerService;
+ private BusinessPartnerService businessPartnerService = new DefaultBusinessPartnerService();
```

## 6. Remove Discontinued ServletFilter from Your `web.xml`

We decided to remove all security related `Filter` implementations from the SAP Cloud SDK, to have a clearer separation between the [SAP Security Libraries](https://github.com/SAP/cloud-security-services-integration-library/) and the SAP Cloud SDK.

This means you need to remove all mentions of the following filters from your `web.xml` (mind the `security` in the package): `com.sap.cloud.sdk.cloudplatform.security.servlet.*Filter`

The `com.sap.cloud.sdk.cloudplatform.servlet.RequestAccessorFilter` remains in the SDK, as it is not security related.
