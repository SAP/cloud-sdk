## 4.32.0 - June 10, 2024

### Compatibility Notes

- This is the last planned minor version release of SAP Cloud SDK v4.
  Please update to v5 immediately, we will no longer provide support.
  Not even security updates.
  You can [follow this guide](https://sap.github.io/cloud-sdk/docs/java/guides/5.0-upgrade-steps).
  - Add warning message to the logs.
    It will be shown initially during application startup.
- We removed the direct dependency to `com.sap.cloud.sdk.cloudplatform:servlet` from the `com.sap.cloud.sdk.cloudplatform:security-scp-neo` module.
  Please check whether you are adding the `servlet` dependency explicitly in your project and, if not, add it to your dependencies.

### Improvements

- Dependency Updates:
  - SAP dependency updates:
    - Update [Service Binding Library](https://central.sonatype.com/artifact/com.sap.cloud.environment.servicebinding/java-modules-bom/0.10.5) from `0.10.1` to `0.10.5`
  - Other dependency updates:
    - Minor version updates:
      - Update [Jackson](https://central.sonatype.com/artifact/com.fasterxml.jackson.core/jackson-databind/2.17.0) (`com.fasterxml.jackson.core:jackson-databind`) from `2.16.0` to `2.17.0`
      - Update [Apache HttpClient v5](https://central.sonatype.com/artifact/org.apache.httpcomponents.client5/httpclient5/5.3.1) (`org.apache.httpcomponents.client5:httpclient5`) from `5.2.2` to `5.3.1`
      - Update [Apache HttpCore v5](https://central.sonatype.com/artifact/org.apache.httpcomponents.core5/httpcore5/5.2.4) (`org.apache.httpcomponents.core5:httpcore5`) from `5.2.3` to `5.2.4`
      - Update [Commons IO](https://central.sonatype.com/artifact/commons-io/commons-io/2.15.1) (`commons-io:commons-io`) from `2.15.0` to `2.15.1`
      - Update [Guava](https://central.sonatype.com/artifact/com.google.guava/guava/33.2.0-jre) (`com.google.guava:guava`) from `32.1.3-jre` to `33.2.0-jre`
      - Update [Spring Framework](https://central.sonatype.com/artifact/org.springframework/spring-framework-bom/5.3.34) (`org.springframework:spring-framework-bom`) from `5.3.32` to `5.3.34`

### Fixes issues

- Fix an issue where the current principal wasn't correctly derived from the incoming request in SAP BTP Neo applications.

## 4.31.0 - April 23, 2024

### Improvements

- Dependency Updates:
  - SAP dependency updates:
    - Update [XSUAA Security Client](https://central.sonatype.com/artifact/com.sap.cloud.security/java-bom/2.17.5) from `2.17.3` to `2.17.5`
  - Other dependency updates:
    - Minor version updates:
      - Update [Spring Framework](https://central.sonatype.com/artifact/org.springframework/spring-framework-bom/5.3.34) (`org.springframework:spring-framework-bom`) from `5.3.32` to `5.3.34`

## 4.30.0 - February 29, 2024

### Improvements

- Dependency Updates:
  - Minor version updates:
    - Update [Spring Framework](https://search.maven.org/search?q=g:org.springframework%20AND%20a:spring-framework-bom) (`org.springframework:spring-framework-bom`) from `5.3.31` to `5.3.32`
    - Update [org.apache.commons:commons-compress](https://commons.apache.org/proper/commons-compress/) from `1.24.0` to `1.26.0`

## 4.29.0 - January 22nd, 2024

### Improvements

- Dependency Updates:
  - SAP dependency updates:
    - Update [SAP Java Buildpack](https://central.sonatype.com/artifact/com.sap.cloud.sjb.cf/cf-tomcat-bom/1.85.0) from `1.82.0` to `1.85.0`
    - Update [XSUAA Security Client](https://central.sonatype.com/artifact/com.sap.cloud.security/java-bom/2.17.2) from `2.17.1` to `2.17.2`

## 4.28.0 - December 5th, 2023

### Compatibility Notes

- `AuditLogFacade` implementation `ScpCfAuditLogFacade` will no longer throw an exception of legacy type `DependencyNotFoundException` but of type `IllegalStateException`, in case classes are missing at runtime.
  The exception message details remain untouched.

### New Functionality

- The Auditlog convenience API is now compatible for both JavaEE and JakartaEE.
  `AccessRequester` can now be used like the following:

  ```java

  // for jakarta (new API)
  AccessRequester.ofJakarta(...);

  // for javax (existing API)
  AccessRequester.of(...);

  // for both (existing API)
  AccessRequester.ofCurrentRequest();
  ```

  **Note:** The _SAP Java Buildpack_ may not provide a JakartaEE compatible implementation yet.

### Improvements

- Dependency Updates:
  - SAP dependency updates:
    - Update the [SAP Security Library](https://github.com/SAP/cloud-security-services-integration-library) from `2.14.2` to `2.17.0`
  - Other dependency updates:
    - Minor version updates:
      - Update [Jackson](https://search.maven.org/search?q=g:com.fasterxml.jackson.core) (`com.fasterxml.jackson.core:jackson-databind`) from `2.15.3` to `2.16.0`
      - Update `org.apache.httpcomponents.client5` from `5.2.1` to `5.2.2`
      - Update `org.apache.httpcomponents.core5` from `5.2.1` to `5.2.2`
      - Update `org.apache.commons:commons-lang3` from `3.13.0` to `3.14.0`

## 4.27.0 - November 13, 2023

### Compatibility Notes

- Following classes have been deprecated and will be removed from the next major version (V5) of the SAP Cloud SDK:
  - `com.sap.cloud.sdk.cloudplatform.CloudPlatform`
  - `com.sap.cloud.sdk.cloudplatform.CloudPlatformFacade`
  - `com.sap.cloud.sdk.cloudplatform.CloudPlatformAccessor`
  - `com.sap.cloud.sdk.cloudplatform.ScpCfCloudPlatform`
  - `com.sap.cloud.sdk.cloudplatform.ScpCfCloudPlatformFacade`
  - `com.sap.cloud.sdk.cloudplatform.connectivity.AccessToken`
  - `com.sap.cloud.sdk.cloudplatform.connectivity.ScpCfDestinationServiceResponseProvider`
  - `com.sap.cloud.sdk.cloudplatform.WithRuntimeDependencies`
  - `com.sap.cloud.sdk.cloudplatform.exception.ConstraintViolationException`
  - `com.sap.cloud.sdk.cloudplatform.exception.DependencyNotFoundException`
  - `com.sap.cloud.sdk.cloudplatform.exception.EntityAlreadyExistsException`
  - `com.sap.cloud.sdk.cloudplatform.exception.EntityNotFoundException`
  - `com.sap.cloud.sdk.cloudplatform.exception.StringParsingException`
  - `com.sap.cloud.sdk.cloudplatform.exception.UnsupportedCloudFeatureException`
  - `com.sap.cloud.sdk.cloudplatform.security.principal.exception.PrincipalAttributeException`
  - `com.sap.cloud.sdk.cloudplatform.security.secret.SecretStore`
  - `com.sap.cloud.sdk.cloudplatform.security.secret.ScpCfSecretStore`
  - `com.sap.cloud.sdk.cloudplatform.security.secret.SecretStoreFacade`
  - `com.sap.cloud.sdk.cloudplatform.security.secret.ScpCfSecretStoreFacade`
  - `com.sap.cloud.sdk.cloudplatform.security.secret.SecretStoreAccessor`
  - `com.sap.cloud.sdk.cloudplatform.security.secret.exception.KeyStoreAccessException`
  - `com.sap.cloud.sdk.cloudplatform.security.secret.exception.SecretStoreAccessException`
  - `com.sap.cloud.sdk.testutil.ThreadContextInvocationInterceptor`
  - `com.sap.cloud.sdk.testutil.ThrowableAssertionUtil`

  Most of the contained functionality has already been migrated to other places.
  Accessing service bindings, for example, can now be done in a uniform and standardized way using the [Service Binding Library](https://github.com/SAP/btp-environment-variable-access).

### Improvements

- Dependency Updates:
  - Other dependency updates:
    - Minor version updates:
      - Update [`commons-io:commons-io`](https://central.sonatype.com/artifact/commons-io/commons-io/2.15.0) from `2.14.0` to `2.15.0`
      - Update [`org.checkerframework:checker-qual`](https://central.sonatype.com/artifact/org.checkerframework/checker-qual/3.40.0) declared for dependency convergence from `3.39.0` to `3.40.0`
      - Update [Protobuf Java](https://central.sonatype.com/artifact/com.google.protobuf/protobuf-java/3.25.0) from `3.24.4` to `3.25.0`

### Fixed Issues

- Fix an issue where silently no resilience would be applied if more than one `ResiliencecDecorationStrategy` implementation is on the classpath.
  Such a scenario will now produce a log message on `WARN` level.
  In addition to the log message, using any resilience pattern will lead to an `ResilienceRuntimeException` being thrown.
  The exception can be avoided by explicitly setting the correct `ResilienceDecorationStrategy` via the `ResilienceDecorator.setDecorationStrategy(ResilienceDecorationStrategy)` method (for example, at application start up).
- Fix an issue with OData clients (Generic OData Client, OData v2 FluentHelpers, OData v4 RequestBuilders) repeatedly attaching duplicate `Accept` headers for every paginated request.
- `ODataRequestResultMultipartGeneric.getResult()` now throws `ODataResponseException` instead of `IndexOutOfBoundsException` when a different number of batch request items are returned by the OData server than what was executed.
  This may occur, depending on OData server configurations, when a read operation fails and subsequent request items are no longer executed as a result.

## 4.26.0 - October 27, 2023

### Improvements

- Dependency Updates:
  - SAP dependency updates:
    - Update [Cf Tomee7 Bom](https://central.sonatype.com/search?q=g%3Acom.sap.cloud.sjb.cf+a%3Acf-tomee7-bom&smo=true) (`com.sap.cloud.sjb.cf:cf-tomee7-bom`) from `1.76.0` to `1.78.0`
    - Update [Java Bom](https://search.maven.org/search?q=g:com.sap.cloud.security%2BAND%2Ba:java-bom) (`com.sap.cloud.security:java-bom`) from `2.13.9` to `2.14.2`
    - Update [Neo Java Web API](https://central.sonatype.com/artifact/com.sap.cloud/neo-java-web-api/4.62.8) from `4.62.3` to `4.62.8`
    - Update [`com.sap.cds:cds-services-api`](https://central.sonatype.com/artifact/com.sap.cds/cds-services-api/1.34.7) from `1.34.6` to `1.34.7`
    - Update [`com.sap.cloud.sjb.cf:cf-tomee7-bom`](https://central.sonatype.com/artifact/com.sap.cloud.sjb.cf/cf-tomee7-bom) from `1.78.0` to `1.79.0`
  - Other dependency updates:
    - Minor version updates:
      - Update [JSON](https://central.sonatype.com/artifact/org.json/json/20231013) `20230618` to `20231013`
      - Update [`com.google.errorprone:error_prone_annotations`](https://central.sonatype.com/artifact/com.google.errorprone/error_prone_annotations/2.23.0) from `2.22.0` to `2.23.0`.
      - Update [`org.apache.olingo:odata-server-core`](https://central.sonatype.com/artifact/org.apache.olingo/odata-server-core/4.10.0) from `4.9.0` to `4.10.0`
      - Update [`org.apache.olingo:odata-server-api`](https://central.sonatype.com/artifact/org.apache.olingo/odata-server-api/4.10.0) from `4.9.0` to `4.10.0`
      - Update [`org.apache.olingo:odata-client-api`](https://central.sonatype.com/artifact/org.apache.olingo/odata-client-api/4.10.0) from `4.9.0` to `4.10.0`
      - Update [`org.apache.olingo:odata-client-core`](https://central.sonatype.com/artifact/org.apache.olingo/odata-client-core/4.10.0) from `4.9.0` to `4.10.0`
      - Update [`org.apache.olingo:odata-commons-api`](https://central.sonatype.com/artifact/org.apache.olingo/odata-commons-api/4.10.0) from `4.9.0` to `4.10.0`
      - Update [`org.apache.olingo:odata-commons-core`](https://central.sonatype.com/artifact/org.apache.olingo/odata-commons-core/4.10.0) from `4.9.0` to `4.10.0`
    - Patch version updates:
      - Update [`com.fasterxml.jackson.datatype:jackson-datatype-jsr310`](https://central.sonatype.com/artifact/com.fasterxml.jackson.datatype/jackson-datatype-jsr310/2.15.3) from `2.15.2` to `2.15.3`
      - Update [`com.fasterxml.jackson.core:jackson-annotations`](https://central.sonatype.com/artifact/com.fasterxml.jackson.core/jackson-annotations/2.15.3) from `2.15.2` to `2.15.3`
      - Update [`com.fasterxml.jackson.core:jackson-databind`](https://central.sonatype.com/artifact/com.fasterxml.jackson.core/jackson-databind/2.15.3) from `2.15.2` to `2.15.3`
      - Update [`com.fasterxml.jackson.core:jackson-core`](https://central.sonatype.com/artifact/com.fasterxml.jackson.core/jackson-core/2.15.3) from `2.15.2` to `2.15.3`
      - Update [`com.fasterxml.jackson.dataformat:jackson-dataformat-yaml`](https://central.sonatype.com/artifact/com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/2.15.3) from `2.15.2` to `2.15.3`
      - Update [`com.fasterxml.jackson.dataformat:jackson-dataformat-xml`](https://central.sonatype.com/artifact/com.fasterxml.jackson.dataformat/jackson-dataformat-xml/2.15.3) from `2.15.2` to `2.15.3`
      - Update [`com.google.guava:guava`](https://central.sonatype.com/artifact/com.google.guava/guava/32.1.3-jre) from `32.1.2-jre` to `32.1.3-jre`
      - Update [`io.projectreactor.netty:reactor-netty-http`](https://central.sonatype.com/artifact/io.projectreactor.netty/reactor-netty-http/1.1.12) from `1.1.11` to `1.1.12`
      - Update [`io.projectreactor.netty:reactor-netty-core`](https://central.sonatype.com/artifact/io.projectreactor.netty/reactor-netty-core/1.1.12) from `1.1.11` to `1.1.12`
      - Update [`org.codehaus.woodstox:stax2-api`](https://central.sonatype.com/artifact/org.codehaus.woodstox/stax2-api/4.2.2) from `4.2.1` to `4.2.2`
      - Update [`org.eclipse.jetty:jetty-webapp`](https://central.sonatype.com/artifact/org.eclipse.jetty/jetty-webapp/9.4.53.v20231009) from `9.4.52.v20230823` to `9.4.53.v20231009`
      - Update [`org.eclipse.jetty:jetty-servlet`](https://central.sonatype.com/artifact/org.eclipse.jetty/jetty-servlet/9.4.53.v20231009) from `9.4.52.v20230823` to `9.4.53.v20231009`
      - Update [`io.swagger:swagger-core`](https://central.sonatype.com/artifact/io.swagger/swagger-core/1.6.12) from `1.6.11` to `1.6.12`
      - Update [`io.projectreactor:reactor-core`](https://central.sonatype.com/artifact/io.projectreactor/reactor-core/3.5.11) from `3.5.10` to `3.5.11`
      - Update [`org.apache.olingo:olingo-odata2-core`](https://central.sonatype.com/artifact/org.apache.olingo/olingo-odata2-core/2.0.13) from `2.0.12` to `2.0.13`
      - Update [`org.apache.olingo:olingo-odata2-api`](https://central.sonatype.com/artifact/org.apache.olingo/olingo-odata2-api/2.0.13) from `2.0.12` to `2.0.13`

## 4.25.0 - October 13, 2023

### Improvements

- Dependency Updates:
  - SAP dependency updates:
    - Update [`com.sap.cds.repackaged:odata-v4-lib`](https://central.sonatype.com/search?q=g:com.sap.cds.repackaged%20%20a:odata-v4-lib) used in the `master-data-integration` modules from `2.2.0` to `2.3.0`
  - Other dependency updates:
    - Minor version updates:
      - Update [`com.google.api:api-common`](https://search.maven.org/search?q=g:com.google.api%20AND%20a:api-common) used in the `blockchain-client-fabric` module from `2.17.0` to `2.18.0`
      - Update [`org.checkerframework:checker-qual`](https://central.sonatype.com/search?q=g:org.checkerframework+a:checker-qual) declared for dependency convergence from `3.38.0` to `3.39.0`
      - Update [`commons-io:commons-io`](https://central.sonatype.com/search?q=g:commons-io%20a:commons-io) from `2.13.0` to `2.14.0`

## 4.24.0 - September 28, 2023

### Compatibility Notes

- The following classes have been deprecated:
  - In module [security](https://search.maven.org/search?q=g:com.sap.cloud.sdk.cloudplatform%20AND%20a:security) (package `com.sap.cloud.sdk.cloudplatform.security`)
    - _No plans for removal due to compatibility reasons. It is, however, still recommended to move away from their use:_
      - `Audience`
      - `Authorization`
      - `Role`
      - `RolesAllowed`
      - `Scope`
      - `TenantSpecificAuthorization`
      - `UserSpecificAuthorization`
  - In module [security](https://search.maven.org/search?q=g:com.sap.cloud.sdk.cloudplatform%20AND%20a:security) (package `com.sap.cloud.sdk.cloudplatform.security.principal`)
    - _No plans for removal due to compatibility reasons. It is, however, still recommended to move away from their use:_
      - `PrincipalAttribute`
      - `CollectionPrincipalAttribute`
      - `SimplePrincipalAttribute`
      - `StringCollectionPrincipalAttribute`
      - `StringPrincipalAttribute`
    - _Will be removed without replacement_
      - `AudienceAuthorizationUtil`
  - In module [security-scp-cf](https://search.maven.org/search?q=g:com.sap.cloud.sdk.cloudplatform%20AND%20a:security-scp-cf) (package `com.sap.cloud.sdk.cloudplatform.security.principal`)
    - _Will be removed without replacement_:
      - `LocalScopePrefixProvider`
      - `DefaultLocalScopePrefixProvider`
      - `LocalScopePrefixExtractor`
    - _Please use related Default classes:_
      - `DefaultPrincipal`
      - `DefaultPrincipalFacade`

### Improvements

- Dependency Updates:
  - SAP dependency updates:
    - Update [SAP Service Binding Library](https://github.com/SAP/btp-environment-variable-access) from `0.9.0` to `0.10.0`
  - Other dependency updates:
    - Minor version updates:
      - Update [Annotations for Error Prone](https://search.maven.org/search?q=g:com.google.errorprone%20AND%20a:error_prone_annotations) (com.google.errorprone:error_prone_annotations) from `2.21.1` to `2.22.0`
      - Update [Lombok](https://search.maven.org/search?q=g:org.projectlombok%20AND%20a:lombok) (`org.projectlombok:lombok`) from `1.18.28` to `1.18.30`
      - Update [httpcore5](https://search.maven.org/search?q=g:org.apache.httpcomponents.core5%20AND%20a:httpcore5) (`org.apache.httpcomponents.core5:httpcore5`) from `5.2.2` to `5.2.3`
      - Update [API Common](https://search.maven.org/search?q=g:com.google.api%20AND%20a:api-common) (`com.google.api:api-common`) used in the `blockchain-client-fabric` module from `2.16.0` to `2.17.0`

### Fixed Issues

- Fix an issue with nested any/all query filter expressions in the _Generic OData_ client.
  For the _OData v4_ client the issue is already resolved since `4.22.0`.

## 4.23.0 - September 15, 2023

### Compatibility

- Deprecate following legacy classes that are related to parsing the `VCAP_SERVICES` environment variable:
  - In module [cloudplatform-connectivity-scp-cf](https://search.maven.org/search?q=g:com.sap.cloud.sdk.cloudplatform%20AND%20a:cloudplatform-connectivity-scp-cf) (package `com.sap.cloud.sdk.cloudplatform.connectivity`)
    - `ScpCfService`
    - `ScpCfServiceAuthorizationFailedException`
    - `ScpCfServiceCreationFailedException`
    - `ScpCfServiceDestinationLoader`
    - `ScpVcapDestinationLoader`
    - `ScpVcapDestinationOptionAugmenter`
    - `ScpVcapLoaderUtils`
    - `ScpXfDestinationData`
    - `ScpXfDestinationLoader`
  - In module [cloudplatform-core-scp-cf](https://search.maven.org/search?q=g:com.sap.cloud.sdk.cloudplatform%20AND%20a:cloudplatform-core-scp-cf) (package `com.sap.cloud.sdk.cloudplatform`)
    - `ScpCfServiceDesignator`
    - `ScpCfServiceInfo`
    - `ServiceBindingDataException`

  As a replacement, please refer to the **experimental** `ServiceBindingDestinationLoader` API (module [cloudplatform-connectivity](https://search.maven.org/search?q=g:com.sap.cloud.sdk.cloudplatform%20AND%20a:cloudplatform-connectivity), package `com.sap.cloud.sdk.cloudplatform.connectivity`) and [the `ServiceBinding` API](https://github.com/SAP/btp-environment-variable-access).

### Improvements

- Dependency Updates:
  - SAP dependency updates:
    - Update [cf-java-logging-support-logback](https://central.sonatype.com/search?q=g%3Acom.sap.hcp.cf.logging+a%3Acf-java-logging-support-logback&smo=true) (`com.sap.hcp.cf.logging:cf-java-logging-support-logback`) from `3.7.0` to `3.7.1`
    - Update [Neo JavaEE7 WP API](https://central.sonatype.com/search?q=g%3Acom.sap.cloud+a%3Aneo-javaee7-wp-api&smo=true) from `1.156.8` to `1.157.7`
    - Update [Cf Tomee7 Bom](https://central.sonatype.com/search?q=g%3Acom.sap.cloud.sjb.cf+a%3Acf-tomee7-bom&smo=true) (`com.sap.cloud.sjb.cf:cf-tomee7-bom`) from `1.76.0` to `1.77.0`
  - Other dependency updates:
    - Minor version updates:
      - Update `org.checkerframework:checker-qual` declared for dependency convergence from `3.37.0` to `3.38.0`
      - Update `com.google.api:api-common` used in the `blockchain-client-fabric` module from `2.15.0` to `2.16.0`
      - Update `org.apache.commons:commons-compress` used in the `blockchain-client-fabric` module from `1.23.0` to `1.24.0`

## 4.22.0 - September 1, 2022

### Compatibility Notes

- Internally deprecate automatic validation during AuthToken decoding.
  For proper user token validation, please use the [SAP XSUAA Security Library](https://github.com/SAP/cloud-security-services-integration-library#21-token-validation) instead.
- Deprecate `OAuth2ServiceProvider` convenience API.
  Please directly use the [Token Client](https://github.com/SAP/cloud-security-services-integration-library/tree/main/token-client) library instead.

### Fixed Issues

- Fix an issue where nested any/all filter expressions in OData queries would have the same prefix.

## 4.21.0 - August 18, 2023

### Compatibility Notes

- The module `security-servlet` and all contained servlet filters have been deprecated without replacement.
  This should not impact most applications, as they were rather specific and can be replaced with standard security tooling such as the [SAP BTP Security Libraries](https://github.com/SAP/cloud-security-services-integration-library).
  Still, in case you are using any of the filters you will see a warning message during application startup containing further details.
- Support for JNDI will be discontinued with SAP Cloud SDK v5 by the end of the year.
  Please migrate to the Cloud Foundry environment. It is better suited for apps and SAP S/4HANA extension development.
  The methods from the following classes are deprecated while still being fully functional and considered supported in
  SAP Cloud SDK v4:
  - `JndiLookupAccessor`
  - `JndiLookupFacade`
  - `DefaultJndiLookupFacade`
- `StringConverter` and `StringValidator` have been deprecated without replacement. Java Standard Library can be used as a replacemet for `StringConverter` and [Apache Commons Codec](https://commons.apache.org/proper/commons-codec/) can be used as a replacement for `StringValidator`. Refer [here](https://sap.github.io/cloud-sdk/docs/java/v5/guides/5.0-upgrade-steps) for more details.

### New Functionality

- While using destinations of authentication type `SAMLAssertion` to execute requests, the `x-sap-security-session` header is now always sent with every request to the destination.

### Improvements

- Dependency Updates:
  - SAP dependency updates:
    - Update [Neo Java Web Api](https://central.sonatype.com/search?q=g%3Acom.sap.cloud+a%3Aneo-java-web-api) (com.sap.cloud:neo-java-web-api) from 4.58.1 to 4.59.2
  - Other dependency updates:
    - Minor version updates:
      - Update [Protobuf Java](https://central.sonatype.com/search?q=g%3Acom.google.protobuf+a%3Aprotobuf-java) from 3.23.4 to 3.24.0
      - Update [Fabric SDK Java](https://central.sonatype.com/search?q=g%3Aorg.hyperledger.fabric-sdk-java+a%3Afabric-sdk-java) (org.hyperledger.fabric-sdk-java:fabric-sdk-java) from 2.2.22 to 2.2.23
      - Update [Checker Qual](https://central.sonatype.com/search?q=g%3Aorg.checkerframework+a%3Achecker-qual) (org.checkerframework:checker-qual) from 3.36.0 to 3.37.0
      - Update [Annotations for Error Prone](https://central.sonatype.com/search?q=g%3Acom.google.errorprone+a%3Aerror_prone_annotations) (com.google.errorprone:error_prone_annotations) from 2.20.0 to 2.21.1

### Fixed Issues

- Fix an issue in OData v2 serialization, where an `Edm.Binary` entity field is represented with a `null`-value `byte[]` array.

## 4.20.0 - August 7, 2023

### Compatibility Notes

- The `BindableService` abstraction has been removed from the SAP Cloud SDK.
  As a replacement, the `ServiceIdentifier` (originating from the [Service Binding Library](https://github.com/SAP/btp-environment-variable-access)) class is now used.
- The builder method `ServiceBindingDestinationOptions.Builder#using(ServiceBinding)` has been removed.
  Use `ServiceBindingDestinationOptions#forService(ServiceBinding)` instead.
- Re-establish default behavior for destination retrieval from _BTP Destination Service_ with destinations requiring a principal context - but without one attached.

  With `4.13.0` we introduced default retrieval strategy `ScpCfDestinationTokenExchangeStrategy.FORWARD_USER_TOKEN` which would no longer throw an exception for missing (but required) principal context, i.e. when a user token could not be resolved from current thread context.
  With this release, we are reverting this behavior back to the original setting.

  If you want to retrieve a destination without any principal context, please use destination retrieval options explicitly with `ScpCfDestinationTokenExchangeStrategy.LOOKUP_ONLY`.

- We are planning to discontinue support of pregenerated OpenAPI clients with SAP Cloud SDK v5 by end of the year.

  Therefore we're announcing module deprecation in advance.
  The following modules and namespaces are deprecated while still being fully functional and considered supported in SAP Cloud SDK v4:
  - **Services - BTP Cloud Foundry Workflow API**: `com.sap.cloud.sdk.services.scp.workflow.cf.*`
  - **Services - SAP Business Rules (Beta)**: `com.sap.cloud.sdk.services.btp.businessrules.cf.ruleauthoring.*`
    The code can now be generated instead by using the [OpenAPI](https://sap.github.io/cloud-sdk/docs/java/features/rest/generate-rest-client) generator with the YAML specification of the service.

- Following APIs have been changed in a **breaking manner** to enable support for Spring 6 in the OpenApi related features of the Cloud SDK:
  - `com.sap.cloud.sdk.services.openapi.apiclient.ApiClient#getStatusCode()`: No longer returns an instance of `HttpStatus`, but a primitive `int` instead.
  - `com.sap.cloud.sdk.services.openapi.core.OpenApiResponse#getStatusCode()`: No longer returns an instance of `HttpStatus`, but a primitive `int` instead.

- `com.sap.cloud.sdk.datamodel.openapi.generator.model.LogLevel` enum has been removed in relation to the `OpenAPI OData Generator`
  `logLevel` property change.

### New Functionality

- Add a new module (`com.sap.cloud.sdk.frameworks:apache-httpclient5`) with APIs for retrieving an Apache version 5 `HttpClient` based on a given destination.
  These APIs consist of the following classes:
  - `ApacheHttpClient5Factory` - A factory interface for creating `HttpClient` instances from `HttpDestinationProperties`.
  - `ApacheHttpClient5FactoryBuilder` - A builder class for instantiating a default implementation of the `ApacheHttpClient5Factory` interface that allows for some customization.
  - `ApacheHttpClient5Cache` - A cache interface for caching `HttpClient` instances.
  - `ApacheHttpClient5CacheBuilder` - A builder class for instantiating a default implementation of the `ApacheHttpClient5Cache` interface that allows for some customization.
  - `ApacheHttpClient5Accessor` - A class with static methods for retrieving an `HttpClient` based on a given destination, which uses the aforementioned factory and cache interfaces.

  ```java
  HttpDestination destination = DestinationAccessor.getDestination("my-destination").asHttp();
  HttpClient client = ApacheHttpClient5Accessor.getHttpClient(destination);
  ```

- Add support for Spring 6 projects within the OpenApi related functionality of the Cloud SDK.
  This is working right out-of-the-box, without the need to re-generate any existing OpenApi clients.

  This feature required a **breaking** API change, which shouldn't affect most users.
  Please refer to the _Compatibility Notes_ (above) for more details.

### Improvements

- Dependency Updates:
  - SAP dependency updates:
    - Update [SAP Service Binding Library](https://github.com/SAP/btp-environment-variable-access) from `0.8.0` to `0.9.0`
  - Other dependency updates:
    - Minor version updates:
      - Update [Guava](https://central.sonatype.com/search?q=g:com.google.guava%20a:guava) from `32.1.1-jre` to `32.1.2-jre`
      - Update `org.apache.commons:commons-lang3` from `3.12` to `3.13.0`

- Property tags have been added to the OData (v2, v4) and and OpenApi generator Maven plugins.
  They can now be run project-less from the command line, using `-D` parameter flags, e.g.:
  ```
  mvn com.sap.cloud.sdk.datamodel:openapi-generator-maven-plugin:4.XX.X:generate -Dopenapi.generate.inputSpec=/foo/bar
  ```

### Fixed Issues

- The _OpenAPI Generator_ property `logLevel` (default value: `INFO`) has been corrected to boolean flag `verbose` (default value: `false`).
  Any previous value other than `DEBUG` would correspond to `verbose=false` (default) now (for both the Maven plugin and CLI generators).

## 4.19.0 - July 28, 2023

### Improvements

- Dependency Updates:
  - SAP Dependency Updates:
    - Minor version updates:
      - Update [SAP Service Binding Library](https://github.com/SAP/btp-environment-variable-access) from `0.7.0` to `0.8.0`
  - Other dependency updates:
    - Minor version updates:
      - Update [Cf Tomee7 Bom](https://central.sonatype.com/search?q=g%3Acom.sap.cloud.sjb.cf+a%3Acf-tomee7-bom&smo=true) (`com.sap.cloud.sjb.cf:cf-tomee7-bom`) from `1.73.1` to `1.74.0`
      - Update [Spring Framework](https://search.maven.org/search?q=g:org.springframework%20AND%20a:spring-framework-bom) (`org.springframework:spring-framework-bom`) from `5.3.28` to `5.3.29`
      - Update [Spring Boot](https://search.maven.org/search?q=g:org.springframework.boot%20AND%20a:spring-boot) (`org.springframework.boot:spring-boot-dependencies` and `org.springframework.boot:spring-boot-maven-plugin`) from `2.7.13` to `2.7.14`
      - Update [Protobuf Java](https://search.maven.org/search?q=g:com.google.protobuf%2BAND%2Ba:protobuf-java) (`com.google.protobuf:protobuf-java`) from `3.23.3` to `3.23.4`
      - Update [Kotlin Stdlib](https://search.maven.org/search?q=g:org.jetbrains.kotlin%2BAND%2Ba:kotlin-stdlib) (`org.jetbrains.kotlin:kotlin-stdlib`) from `1.8.22` to `1.9.0`
      - Update [Kotlin Stdlib Common](https://search.maven.org/search?q=g:org.jetbrains.kotlin%2BAND%2Ba:kotlin-stdlib-common) (`org.jetbrains.kotlin:kotlin-stdlib-common`) from `1.8.22` to `1.9.0`
      - Update [Kotlin Stdlib Jdk8](https://search.maven.org/search?q=g:org.jetbrains.kotlin%2BAND%2Ba:kotlin-stdlib-jdk8) (`org.jetbrains.kotlin:kotlin-stdlib-jdk8`) from `1.8.22` to `1.9.0`
      - Update [Checker Qual](https://search.maven.org/search?q=g:org.checkerframework%2BAND%2Ba:checker-qual) (`org.checkerframework:checker-qual`) from `3.35.0` to `3.36.0`
      - Update [JSON](https://central.sonatype.com/artifact/org.json/json/20230618) from `20230227` to `20230618`

### Fixed Issues

- Fix an issue where, while using the default token exchange strategy `FORWARD_USER_TOKEN`, the destination caching did not isolate the entries based on available user details.

## 4.18.0 - July 11, 2023

### Compatibility Notes

- Change internal dependency declaration of `com.google.code.findbugs:jsr305` to `optional`.
  It should no longer come up as (unnecessary) transitive dependency for users of SAP Cloud SDK.
  If you are using code generators from SAP Cloud SDK, this dependency may still be necessary at compile time as explicit dependency.
  In that case please follow Maven best practices and update your `pom.xml` file accordingly by adding the dependency as explicit direct dependency.
- Deprecate `blockchain-client-multichain`, `blockchain-client-fabric`, `blockchain-business-services-visibility` and `btp-shared-ledger-client`
  - **Services - Blockchain Business Services Visibility**: `com.sap.cloud.sdk.services.blockchainbusinessservices.blockchainvisibility.*`
  - **Services - SAP Blockchain - Fabric**: `com.sap.cloud.sdk.services.blockchain.fabric.*`
  - **Services - SAP Blockchain - Multichain**: `com.sap.cloud.sdk.services.blockchain.multichain.*`
  - **Services - Shared Ledger Client**: `com.sap.cloud.sdk.services.sharedledger.client.*`

### Improvements

- Dependency Updates:
  - Other dependency updates:
    - Minor version updates:
      - Update [Guava](https://central.sonatype.com/search?q=g:com.google.guava%20a:guava) from `32.0.1-jre` to `32.1.1-jre`
      - Update [Cf Tomee7 Bom](https://central.sonatype.com/search?q=g%3Acom.sap.cloud.sjb.cf+a%3Acf-tomee7-bom&smo=true) (`com.sap.cloud.sjb.cf:cf-tomee7-bom`) from `1.72.0` to `1.73.1`
      - Update [SAP Service Binding Library](https://github.com/SAP/btp-environment-variable-access) from `0.6.0` to `0.7.0`

### Fixed Issues

- For HTTP destinations with the authentication type `SAMLAssertion` the destination key store is no longer used for the TLS handshake.

## 4.17.0 - June 30, 2023

### Compatibility Notes

- Deprecate the pregenerated classes for SAP S/4HANA On-Premise and Cloud Edition OData services.
  With the next major release we will discontinue the following Maven modules:
  - [`s4hana-api-odata`](https://search.maven.org/artifact/com.sap.cloud.sdk.s4hana/s4hana-api-odata)
  - [`s4hana-api-odata-onpremise`](https://search.maven.org/artifact/com.sap.cloud.sdk.s4hana/s4hana-api-odata-onpremise)
  - [`s4hana-api-odata-v4`](https://search.maven.org/artifact/com.sap.cloud.sdk.s4hana/s4hana-api-odata-v4)
  - [`s4hana-api-odata-v4-onpremise`](https://search.maven.org/artifact/com.sap.cloud.sdk.s4hana/s4hana-api-odata-v4-onpremise)

  While these dependencies may still receive updates, it's no longer recommended to use them.
  Instead, we suggest to generate your own OData classes using our [OData generator](https://sap.github.io/cloud-sdk/docs/java/features/odata/vdm-generator).
  This approach saves many megabytes of unused dependencies in your application, while offering a useful set of customization options.

- Deprecate the `sdk-sjb-bom`
  Please use [the `cf-tomee7-bom` followed by the `sdk-bom`](https://help.sap.com/docs/BTP/65de2977205c403bbc107264b8eccf4b/6c6936e8e4ea40c9a9a69f6783b1e978.html)
- We are planning to discontinue support of NEO with SAP Cloud SDK v5 by end of the year.
  Therefore, we're announcing module deprecation in advance.
  Please migrate to the Cloud Foundry environment. It is better suited for apps and SAP S/4HANA extension development.
  The following modules are deprecated while still being fully functional and considered supported in SAP
  Cloud SDK v4:
  - `scp-neo`
    - `auditlog-scp-neo`
    - `cloudplatform-connectivity-scp-neo`
    - `cloudplatform-core-scp-neo`
    - `concurrency-scp-neo`
    - `security-scp-neo`
    - `tenant-scp-neo`
  - `plugins-parent`
    - `scp-neo-maven-plugin`
  - `scp-neo-javaee7`
- The "change detection" caching strategy for destinations is now more resilient.
  Previously, a misconfigured destination could lead to degraded application performance.
- Deprecate `s4hana-connectivity` and `s4hana-core`
  - **SAP S/4HANA - Connectivity**: `com.sap.cloud.sdk.s4hana.connectivity.*`
  - **SAP S/4HANA - Core**: `com.sap.cloud.sdk.s4hana.serialization.*` and `com.sap.cloud.sdk.s4hana.types.*`

### Improvements

- Update of the OData VDM to the newest updates of [SAP S/4HANA On-Premise](https://help.sap.com/docs/SAP_S4HANA_ON-PREMISE) and [SAP S/4HANA Cloud Edition](https://api.sap.com/products/SAPS4HANACloud/overview).
  This includes completely new services, new operations in previously existing services, and new entity types in the existing Maven artifacts:
  - [`s4hana-api-odata`](https://search.maven.org/artifact/com.sap.cloud.sdk.s4hana/s4hana-api-odata)
  - [`s4hana-api-odata-onpremise`](https://search.maven.org/artifact/com.sap.cloud.sdk.s4hana/s4hana-api-odata-onpremise)
  - [`s4hana-api-odata-v4`](https://search.maven.org/artifact/com.sap.cloud.sdk.s4hana/s4hana-api-odata-v4)
  - [`s4hana-api-odata-v4-onpremise`](https://search.maven.org/artifact/com.sap.cloud.sdk.s4hana/s4hana-api-odata-v4-onpremise)
- The [official system properties](https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization) `javax.net.ssl.trustStore` and `javax.net.ssl.trustStorePassword` are now recognised when creating an SslContext.
- Improve OData V4 Generator capability to extract label and description data from EDMX specification files.
- Minor version updates:
  - Update [Commons IO](https://mvnrepository.com/artifact/commons-io/commons-io) from `2.12.0` to `2.13.0`
  - Update [Error Prone](https://central.sonatype.com/search?q=g:com.google.errorprone%20a:error_prone_annotations) declared for dependency convergence from `2.19.1` to `2.20.0`
  - Update [Guava](https://central.sonatype.com/search?q=g:com.google.guava%20a:guava) from `31.1-jre` to `32.0.1-jre`

## 4.16.0 - June 14, 2023

### Compatibility Notes

- Deprecate `ErpHttpDestination` and all related classes.
  The functionality is now integrated and handled automatically by `HttpDestination`s.
  For most projects this means simply removing any occurrence of `decorate(DefaultErpHttpDestination::new)`.
  In case you are using `ErpHttpDestination` to automatically add the `sap-language` based on the _current_ system locale, please configure a property `cloudsdk.dynamicSapLanguage` with value `true` on the destination.

### Improvements

- Improved the handling of `sap-client` and `sap-language` to be fully automated.
  Projects can safely remove any invocations of `decorate(DefaultErpHttpDestination::new)`.
  Please also see the related compatibility note above.
- Dependency Updates:
  - SAP Dependency Updates:
    - Minor Dependency Updates:
      - Update [Cf Tomee7 Bom](https://search.maven.org/search?q=g:com.sap.cloud.sjb.cf%2BAND%2Ba:cf-tomee7-bom) (`com.sap.cloud.sjb.cf:cf-tomee7-bom`) from `1.70.0` to `1.71.0`
      - Update [Neo Java Web Api](https://search.maven.org/search?q=g:com.sap.cloud%2BAND%2Ba:neo-java-web-api) (`com.sap.cloud:neo-java-web-api`) from `4.53.3` to `4.54.3`
  - Other Dependency Updates:
    - Minor Dependency Updates:
      - Update [Jackson Annotations](https://search.maven.org/search?q=g:com.fasterxml.jackson.core%2BAND%2Ba:jackson-annotations) (`com.fasterxml.jackson.core:jackson-annotations`) from `2.15.1` to `2.15.2`
      - Update [Jackson Core](https://search.maven.org/search?q=g:com.fasterxml.jackson.core%2BAND%2Ba:jackson-core) (`com.fasterxml.jackson.core:jackson-core`) from `2.15.1` to `2.15.2`
      - Update [Jackson Databind](https://search.maven.org/search?q=g:com.fasterxml.jackson.core%2BAND%2Ba:jackson-databind) (`com.fasterxml.jackson.core:jackson-databind`) from `2.15.1` to `2.15.2`
      - Update [Jackson Datatype Jsr310](https://search.maven.org/search?q=g:com.fasterxml.jackson.datatype%2BAND%2Ba:jackson-datatype-jsr310) (`com.fasterxml.jackson.datatype:jackson-datatype-jsr310`) from `2.15.1` to `2.15.2`
      - Update [Jackson Dataformat Xml](https://search.maven.org/search?q=g:com.fasterxml.jackson.dataformat%2BAND%2Ba:jackson-dataformat-xml) (`com.fasterxml.jackson.dataformat:jackson-dataformat-xml`) from `2.15.1` to `2.15.2`
      - Update [Jackson Dataformat Yaml](https://search.maven.org/search?q=g:com.fasterxml.jackson.dataformat%2BAND%2Ba:jackson-dataformat-yaml) (`com.fasterxml.jackson.dataformat:jackson-dataformat-yaml`) from `2.15.1` to `2.15.2`
      - Update [Netty Codec Http](https://search.maven.org/search?q=g:io.netty%2BAND%2Ba:netty-codec-http) (`io.netty:netty-codec-http`) from `4.1.92.Final` to `4.1.93.Final`
      - Update [Protobuf Java](https://search.maven.org/search?q=g:com.google.protobuf%2BAND%2Ba:protobuf-java) (`com.google.protobuf:protobuf-java`) from `3.23.1` to `3.23.2`
      - Update [Checker Qual](https://search.maven.org/search?q=g:org.checkerframework%2BAND%2Ba:checker-qual) (`org.checkerframework:checker-qual`) from `3.34.0` to `3.35.0`
      - Update [Lombok](https://search.maven.org/search?q=g:org.projectlombok%2BAND%2Ba:lombok) (`org.projectlombok:lombok`) from `1.18.26` to `1.18.28`
      - Update [Kotlin Stdlib](https://search.maven.org/search?q=g:org.jetbrains.kotlin%2BAND%2Ba:kotlin-stdlib) (`org.jetbrains.kotlin:kotlin-stdlib`) from `1.8.21` to `1.8.22`
      - Update [Kotlin Stdlib Common](https://search.maven.org/search?q=g:org.jetbrains.kotlin%2BAND%2Ba:kotlin-stdlib-common) (`org.jetbrains.kotlin:kotlin-stdlib-common`) from `1.8.21` to `1.8.22`
      - Update [Kotlin Stdlib Jdk8](https://search.maven.org/search?q=g:org.jetbrains.kotlin%2BAND%2Ba:kotlin-stdlib-jdk8) (`org.jetbrains.kotlin:kotlin-stdlib-jdk8`) from `1.8.21` to `1.8.22`

### 4.15.0 - May 26, 2023

[Maven Central](https://central.sonatype.com/search?q=com.sap.cloud.sdk%2520v%253A4.15.0)

### Compatibility Notes

- The behaviour of `DestinationAccessor.getDestination(...)` has been changed to throw:
  - `DestinationNotFoundException` instead of `DestinationAccessException` with cause `DestinationNotFoundException` when a destination is not found
  - `DestinationAccessException` instead of `DestinationNotFoundException` when no adapters are declared
- We are planning to discontinue support of Business Logging APIs with SAP Cloud SDK v5 by end of the year.
  Therefore, we're announcing module deprecation in advance.
  The following modules and namespaces are deprecated while still being fully functional and considered supported in SAP
  Cloud SDK v4:
  - **BTP Business Logging Core**: `com.sap.cloud.sdk.services.scp.businesslogging.core.*`
    - `tryGetDestination("destinationName", CLIENT_CREDENTIALS)` is replaced by
      `ScpCfServiceDestinationLoader.getDestinationForService(BUSINESS_LOGGING, "destinationName")`
    - `tryGetDestination("destinationName", USER_TOKEN)` is replaced by
      `ScpCfServiceDestinationLoader.getDestinationForService(BUSINESS_LOGGING, "destinationName", OnBehalfOf.NAMED_USER_CURRENT_TENANT)`
- Rename references from _SAP API Business Hub_ to _SAP Business Accelerator Hub_ in JavaDoc.

### New Functionality

- `OpenAPI` generated objects can now read custom fields which are not part of the object's schema:
  - `getCustomFieldNames()`
  - `getCustomField("nameOfField")`
- The BTP CloudFoundry specific platform modules now support mTLS for communication with destinations having their `securityConfigurationStrategy` set to `FROM_PLATFORM`.

### Improvements

- Dependency Updates:
  - Minor version updates:
    - Update `commons-io:commons-io` from `2.11.0` to `2.12.0`
    - Update Jackson related dependencies from `2.15.0` to `2.15.1`
    - Update `org.checkerframework:checker-qual` declared for dependency convergence from `3.33.0` to `3.34.0`
    - Update `com.google.errorprone:error_prone_annotations` declared for dependency convergence from `2.18.0` to `2.19.1`
    - Update `com.google.api:api-common` used in the `blockchain-client-fabric` module from `2.9.0` to `2.10.0`
- To avoid running into connection leaks while re-using the same `HttpClient` to execute multiple OData batch requests, running batch requests with `try-with-resources` construct is now possible for both OData v2 and v4 clients.

```java
  //Suggestive example for OData v2
  try(
      BatchResponse result = service.batch().addReadOperations(readOperation).executeRequest(dest)
   ) {
      return result.get(0);
  }
```

### Fixed Issues

- Fix an issue where batch requests would leave open connections even after a `BatchResponse` was fully consumed.
